MP2COD 4.00, COFF to COD File Converter
Copyright (c) 2005 Microchip Technology Inc.
Listing File Generated: Sun Nov 06 22:52:39 2005


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /*********************************************************************           E:\usb20\sinegen1\main.c
                                           *                                                                                E:\usb20\sinegen1\main.c
                                           *　USB接続 正弦波発振器プログラム                                                E:\usb20\sinegen1\main.c
                                           *	USBフレームワーク修正情報                                                      E:\usb20\sinegen1\main.c
                                           *　　コンフィギュレーションの設定変更                                            E:\usb20\sinegen1\main.c
                                           *　　main.c　の変更　初期化削除　IO設定変更                                      E:\usb20\sinegen1\main.c
                                           *　　io_cfg.hの変更　LED削除　IOモニタ削除                                       E:\usb20\sinegen1\main.c
                                           *　　user.cの変更　　実行内容削除                                                E:\usb20\sinegen1\main.c
                                           *　　usbcfg.hの変更　IOモニタ削除                                                E:\usb20\sinegen1\main.c
                                           *                                                                                E:\usb20\sinegen1\main.c
                                           *********************************************************************            E:\usb20\sinegen1\main.c
                                           /** I N C L U D E S *************************************************/           E:\usb20\sinegen1\main.c
                                           #include <p18cxxx.h>                                                             E:\usb20\sinegen1\main.c
                                           #include "system\typedefs.h"                        // Required                  E:\usb20\sinegen1\main.c
                                           #include "system\usb\usb.h"                         // Required                  E:\usb20\sinegen1\main.c
                                           #include "io_cfg.h"                                 // Required                  E:\usb20\sinegen1\main.c
                                                                                                                            E:\usb20\sinegen1\main.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  E:\usb20\sinegen1\main.c
                                           #include	"delays.h"                                                              E:\usb20\sinegen1\main.c
                                           #include "lcd_lib.h"                                                             E:\usb20\sinegen1\main.c
                                                                                                                            E:\usb20\sinegen1\main.c
                                           /*** Configuration *******/                                                      E:\usb20\sinegen1\main.c
                                           #pragma config FOSC = HSPLL_HS                                                   E:\usb20\sinegen1\main.c
                                           #pragma config WDT = OFF                                                         E:\usb20\sinegen1\main.c
                                           #pragma config PLLDIV = 5                                                        E:\usb20\sinegen1\main.c
                                           #pragma config CPUDIV = OSC1_PLL2                                                E:\usb20\sinegen1\main.c
                                           #pragma config USBDIV = 2                                                        E:\usb20\sinegen1\main.c
                                           #pragma config PWRT = ON                                                         E:\usb20\sinegen1\main.c
                                           #pragma config BOR = ON                                                          E:\usb20\sinegen1\main.c
                                           #pragma config BORV = 43                                                         E:\usb20\sinegen1\main.c
                                           #pragma config LVP = OFF                                                         E:\usb20\sinegen1\main.c
                                           #pragma config VREGEN = ON                                                       E:\usb20\sinegen1\main.c
                                           #pragma config MCLRE = ON                                                        E:\usb20\sinegen1\main.c
                                           #pragma config PBADEN = OFF                                                      E:\usb20\sinegen1\main.c
                                                                                                                            E:\usb20\sinegen1\main.c
                                           /** V A R I A B L E S ***********************************************/           E:\usb20\sinegen1\main.c
                                           #pragma udata                                                                    E:\usb20\sinegen1\main.c
                                           char input_buffer[64];					//USB入力バッファ                                     E:\usb20\sinegen1\main.c
                                           char output_buffer[64];					//USB出力バッファ                                    E:\usb20\sinegen1\main.c
                                           unsigned long Freq = 10;					//周波数データ 32bits                               E:\usb20\sinegen1\main.c
                                           unsigned long Delta = 10;					//周波数可変幅 32bits                              E:\usb20\sinegen1\main.c
                                           char flag = 0;							//正弦波/三角波                                             E:\usb20\sinegen1\main.c
                                                                                                                            E:\usb20\sinegen1\main.c
                                           byte MsgFreq[] =  "Freq =        Hz";		//液晶表示用バッファ                      E:\usb20\sinegen1\main.c
                                           char MsgStart[] ="Start!";					//初期メッセージ                                  E:\usb20\sinegen1\main.c
                                           char MsgSine[] = "Sine Wave       ";		//液晶表示メッセージ                       E:\usb20\sinegen1\main.c
                                           char MsgTri[]  = "Triangle        ";		//液晶表示メッセージ                       E:\usb20\sinegen1\main.c
                                                                                                                            E:\usb20\sinegen1\main.c
                                           /** P R I V A T E  P R O T O T Y P E S *******************************/          E:\usb20\sinegen1\main.c
                                           void SetupDDS(unsigned long freqdata, char flag);                                E:\usb20\sinegen1\main.c
                                           void SerialOut(unsigned long data);                                              E:\usb20\sinegen1\main.c
                                           void Display(void);                                                              E:\usb20\sinegen1\main.c
                                           void ltostring(char digit, unsigned long data, byte *buffer);                    E:\usb20\sinegen1\main.c
                                                                                                                            E:\usb20\sinegen1\main.c
                                           #pragma code                                                                     E:\usb20\sinegen1\main.c
                                           /*********************************************************************           E:\usb20\sinegen1\main.c
                                            * Function:        void main(void)                                              E:\usb20\sinegen1\main.c
                                            ********************************************************************/           E:\usb20\sinegen1\main.c
000038   cfd9     MOVFF     0xfd9,0xfe6    void main(void)                                                                  E:\usb20\sinegen1\main.c
00003a   ffe6                                                                                                               
00003c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00003e   ffd9                                                                                                               
000040   0e02     MOVLW     0x2                                                                                             
000042   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                E:\usb20\sinegen1\main.c
                                           	int i;                                                                          E:\usb20\sinegen1\main.c
                                           	                                                                                E:\usb20\sinegen1\main.c
000044   0e0f     MOVLW     0xf            	ADCON1 |= 0x0F;                 	// 全ディジタルに設定                          E:\usb20\sinegen1\main.c
000046   12c1     IORWF     0xc1,0x1,0x0                                                                                    
000048   0e07     MOVLW     0x7            	CMCON = 0x07;						// コンパレータオフ                                          E:\usb20\sinegen1\main.c
00004a   6eb4     MOVWF     0xb4,0x0                                                                                        
00004c   0e06     MOVLW     0x6             	LATA = 0x06;						// エンコーダ、DDS初期出力                                   E:\usb20\sinegen1\main.c
00004e   6e89     MOVWF     0x89,0x0                                                                                        
000050   6a8a     CLRF      0x8a,0x0          	LATB = 0;						// 液晶表示ポートリセット                                     E:\usb20\sinegen1\main.c
000052   0e03     MOVLW     0x3              	LATC  = 0x03;						// LED off                                                 E:\usb20\sinegen1\main.c
000054   6e8b     MOVWF     0x8b,0x0                                                                                        
000056   0e38     MOVLW     0x38            	TRISA = 0x38;						// スイッチ                                                 E:\usb20\sinegen1\main.c
000058   6e92     MOVWF     0x92,0x0                                                                                        
00005a   0e01     MOVLW     0x1            	TRISB = 0x01;						// 液晶表示                                                  E:\usb20\sinegen1\main.c
00005c   6e93     MOVWF     0x93,0x0                                                                                        
00005e   0e38     MOVLW     0x38            	TRISC = 0x38;						// LED Output Mode                                          E:\usb20\sinegen1\main.c
000060   6e94     MOVWF     0x94,0x0                                                                                        
                                           	/// USB初期化                                                                   E:\usb20\sinegen1\main.c
000062   0e14     MOVLW     0x14           	mInitializeUSBDriver();         	// See usbdrv.h                                E:\usb20\sinegen1\main.c
000064   6e6f     MOVWF     0x6f,0x0                                                                                        
000066   0100     MOVLB     0x0                                                                                             
000068   6bfb     CLRF      0xfb,0x1                                                                                        
00006a   0100     MOVLB     0x0                                                                                             
00006c   6bfc     CLRF      0xfc,0x1                                                                                        
00006e   0100     MOVLB     0x0                                                                                             
000070   6bfd     CLRF      0xfd,0x1                                                                                        
                                           	/// 液晶表示器初期化                                                            E:\usb20\sinegen1\main.c
000072   ec36     CALL      0x146c,0x0     	lcd_init();						// LCD初期化                                                   E:\usb20\sinegen1\main.c
000074   f00a                                                                                                               
000076   0e1a     MOVLW     0x1a           	lcd_str(MsgStart);				// 初期メッセージ表示                                     E:\usb20\sinegen1\main.c
000078   6ee6     MOVWF     0xe6,0x0                                                                                        
00007a   0e01     MOVLW     0x1                                                                                             
00007c   6ee6     MOVWF     0xe6,0x0                                                                                        
00007e   ec16     CALL      0x142c,0x0                                                                                      
000080   f00a                                                                                                               
000082   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000084   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000086   0ef4     MOVLW     0xf4           	Delay10KTCYx(500);				// 0.5秒                                                  E:\usb20\sinegen1\main.c
000088   6ee6     MOVWF     0xe6,0x0                                                                                        
00008a   ec4c     CALL      0x1898,0x0                                                                                      
00008c   f00c                                                                                                               
00008e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000090   0101     MOVLB     0x1            	Freq = 1000;						// 初期値1kHz                                                 E:\usb20\sinegen1\main.c
000092   0ee8     MOVLW     0xe8                                                                                            
000094   6f00     MOVWF     0x0,0x1                                                                                         
000096   0e03     MOVLW     0x3                                                                                             
000098   6f01     MOVWF     0x1,0x1                                                                                         
00009a   6b02     CLRF      0x2,0x1                                                                                         
00009c   6b03     CLRF      0x3,0x1                                                                                         
00009e   c108     MOVFF     0x108,0xfe6    	SetupDDS(Freq, flag);				// DDS出力                                             E:\usb20\sinegen1\main.c
0000a0   ffe6                                                                                                               
0000a2   c100     MOVFF     0x100,0xfe6                                                                                     
0000a4   ffe6                                                                                                               
0000a6   c101     MOVFF     0x101,0xfe6                                                                                     
0000a8   ffe6                                                                                                               
0000aa   c102     MOVFF     0x102,0xfe6                                                                                     
0000ac   ffe6                                                                                                               
0000ae   c103     MOVFF     0x103,0xfe6                                                                                     
0000b0   ffe6                                                                                                               
0000b2   d950     RCALL     0x354                                                                                           
0000b4   6ef5     MOVWF     0xf5,0x0                                                                                        
0000b6   0e05     MOVLW     0x5                                                                                             
0000b8   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
0000ba   50f5     MOVF      0xf5,0x0,0x0                                                                                    
0000bc   da92     RCALL     0x5e2          	Display();						// 液晶表示                                                     E:\usb20\sinegen1\main.c
0000be   0e64     MOVLW     0x64           	Delay10KTCYx(100);                                                              E:\usb20\sinegen1\main.c
0000c0   6ee6     MOVWF     0xe6,0x0                                                                                        
0000c2   ec4c     CALL      0x1898,0x0                                                                                      
0000c4   f00c                                                                                                               
0000c6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                               /// メインループ                                                             E:\usb20\sinegen1\main.c
00033a   d6c6     BRA       0xc8               while(1)                                                                     E:\usb20\sinegen1\main.c
                                               {                                                                            E:\usb20\sinegen1\main.c
0000c8   ec80     CALL      0x1500,0x0         		USBCheckBusStatus();        	// USB接続チェック                            E:\usb20\sinegen1\main.c
0000ca   f00a                                                                                                               
0000cc   be6f     BTFSC     0x6f,0x7,0x0       		if(UCFGbits.UTEYE!=1)			// アイパターンモードオフか                        E:\usb20\sinegen1\main.c
0000ce   d002     BRA       0xd4                                                                                            
0000d0   ec9f     CALL      0x153e,0x0             		USBDriverService();		// USBイベントポーリング                          E:\usb20\sinegen1\main.c
0000d2   f00a                                                                                                               
0000d4   ecf1     CALL      0x9e2,0x0      		CDCTxService();				// クラス送受信実行                                         E:\usb20\sinegen1\main.c
0000d6   f004                                                                                                               
                                           		/// 送受信データの処理実行                                                     E:\usb20\sinegen1\main.c
0000d8   0e06     MOVLW     0x6            		if((usb_device_state >= CONFIGURED_STATE)&&(UCONbits.SUSPND==0))               E:\usb20\sinegen1\main.c
0000da   0100     MOVLB     0x0                                                                                             
0000dc   5dfb     SUBWF     0xfb,0x0,0x1                                                                                    
0000de   e201     BC        0xe2                                                                                            
0000e0   d0f5     BRA       0x2cc                                                                                           
0000e2   506d     MOVF      0x6d,0x0,0x0                                                                                    
0000e4   0b02     ANDLW     0x2                                                                                             
0000e6   e001     BZ        0xea                                                                                            
0000e8   d0f1     BRA       0x2cc                                                                                           
                                           		{                                                                              E:\usb20\sinegen1\main.c
0000ea   0e40     MOVLW     0x40               			if(getsUSBUSART(input_buffer,64))		// データ受信ポール                    E:\usb20\sinegen1\main.c
0000ec   6ee6     MOVWF     0xe6,0x0                                                                                        
0000ee   0e60     MOVLW     0x60                                                                                            
0000f0   6ee6     MOVWF     0xe6,0x0                                                                                        
0000f2   0e00     MOVLW     0x0                                                                                             
0000f4   6ee6     MOVWF     0xe6,0x0                                                                                        
0000f6   ec36     CALL      0x86c,0x0                                                                                       
0000f8   f004                                                                                                               
0000fa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0000fc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0000fe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000100   0900     IORLW     0x0                                                                                             
000102   e101     BNZ       0x106                                                                                           
000104   d0e3     BRA       0x2cc                                                                                           
                                               			{                                                                         E:\usb20\sinegen1\main.c
000106   708b     BTG       0x8b,0x0,0x0               		LATCbits.LATC0 = !LATCbits.LATC0;	// LED反転                       E:\usb20\sinegen1\main.c
000108   0100     MOVLB     0x0            	    			switch(input_buffer[0])			// 最初の１文字チェック                        E:\usb20\sinegen1\main.c
00010a   5160     MOVF      0x60,0x0,0x1                                                                                    
00010c   0a33     XORLW     0x33                                                                                            
00010e   e101     BNZ       0x112                                                                                           
000110   d078     BRA       0x202                                                                                           
000112   0a01     XORLW     0x1                                                                                             
000114   e022     BZ        0x15a                                                                                           
000116   0a03     XORLW     0x3                                                                                             
000118   e00f     BZ        0x138                                                                                           
00011a   0a01     XORLW     0x1                                                                                             
00011c   e001     BZ        0x120                                                                                           
                                           	    			{                                                                        E:\usb20\sinegen1\main.c
                                           		    			case '0':					// OK応答                                                 E:\usb20\sinegen1\main.c
000120   0100     MOVLB     0x0                     				if(mUSBUSARTIsTxTrfReady())                                         E:\usb20\sinegen1\main.c
000122   51e1     MOVF      0xe1,0x0,0x1                                                                                    
000124   e108     BNZ       0x136                                                                                           
000126   0ef4     MOVLW     0xf4                      			 		putrsUSBUSART("OK");                                            E:\usb20\sinegen1\main.c
000128   6ee6     MOVWF     0xe6,0x0                                                                                        
00012a   0e18     MOVLW     0x18                                                                                            
00012c   6ee6     MOVWF     0xe6,0x0                                                                                        
00012e   ecb3     CALL      0x966,0x0                                                                                       
000130   f004                                                                                                               
000132   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000134   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000136   d0ba     BRA       0x2ac                     			 	break;		    			                                                  E:\usb20\sinegen1\main.c
                                           		    			case '1':					// 現在値入力                                             E:\usb20\sinegen1\main.c
000138   0100     MOVLB     0x0                     				if(mUSBUSARTIsTxTrfReady())                                         E:\usb20\sinegen1\main.c
00013a   51e1     MOVF      0xe1,0x0,0x1                                                                                    
00013c   e10d     BNZ       0x158                                                                                           
00013e   0100     MOVLB     0x0                       			 		mUSBUSARTTxRam(MsgFreq+7, 6);                                   E:\usb20\sinegen1\main.c
000140   0e10     MOVLW     0x10                                                                                            
000142   6fe2     MOVWF     0xe2,0x1                                                                                        
000144   0e01     MOVLW     0x1                                                                                             
000146   6fe3     MOVWF     0xe3,0x1                                                                                        
000148   0100     MOVLB     0x0                                                                                             
00014a   0e06     MOVLW     0x6                                                                                             
00014c   6fe6     MOVWF     0xe6,0x1                                                                                        
00014e   0100     MOVLB     0x0                                                                                             
000150   6be7     CLRF      0xe7,0x1                                                                                        
000152   0100     MOVLB     0x0                                                                                             
000154   0e01     MOVLW     0x1                                                                                             
000156   6fe1     MOVWF     0xe1,0x1                                                                                        
000158   d0a9     BRA       0x2ac                     			 	break;		    				                                                 E:\usb20\sinegen1\main.c
                                           					case '2':					// 周波数設定　正弦波                                         E:\usb20\sinegen1\main.c
00015a   0101     MOVLB     0x1            						Freq = 0;                                                                  E:\usb20\sinegen1\main.c
00015c   6b00     CLRF      0x0,0x1                                                                                         
00015e   6b01     CLRF      0x1,0x1                                                                                         
000160   6b02     CLRF      0x2,0x1                                                                                         
000162   6b03     CLRF      0x3,0x1                                                                                         
000164   6ade     CLRF      0xde,0x0       						for(i=0; i<6; i++)                                                         E:\usb20\sinegen1\main.c
000166   6add     CLRF      0xdd,0x0                                                                                        
000168   cfde     MOVFF     0xfde,0x14                                                                                      
00016a   f014                                                                                                               
00016c   cfdd     MOVFF     0xfdd,0x15                                                                                      
00016e   f015                                                                                                               
000170   90d8     BCF       0xd8,0x0,0x0                                                                                    
000172   5015     MOVF      0x15,0x0,0x0                                                                                    
000174   e604     BN        0x17e                                                                                           
000176   0e06     MOVLW     0x6                                                                                             
000178   5c14     SUBWF     0x14,0x0,0x0                                                                                    
00017a   0e00     MOVLW     0x0                                                                                             
00017c   5815     SUBWFB    0x15,0x0,0x0                                                                                    
00017e   e23f     BC        0x1fe                                                                                           
0001f4   2adf     INCF      0xdf,0x1,0x0                                                                                    
0001f6   0e01     MOVLW     0x1                                                                                             
0001f8   e301     BNC       0x1fc                                                                                           
0001fa   2adb     INCF      0xdb,0x1,0x0                                                                                    
0001fc   d7b5     BRA       0x168                                                                                           
                                           						{                                                                          E:\usb20\sinegen1\main.c
000180   cfde     MOVFF     0xfde,0xfe9    							Freq = Freq * 10 + (input_buffer[i+1] - 0x30);                            E:\usb20\sinegen1\main.c
000182   ffe9                                                                                                               
000184   cfdd     MOVFF     0xfdd,0xfea                                                                                     
000186   ffea                                                                                                               
000188   0e01     MOVLW     0x1                                                                                             
00018a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00018c   0e00     MOVLW     0x0                                                                                             
00018e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000190   0e60     MOVLW     0x60                                                                                            
000192   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
000194   0e00     MOVLW     0x0                                                                                             
000196   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000198   50ef     MOVF      0xef,0x0,0x0                                                                                    
00019a   0fd0     ADDLW     0xd0                                                                                            
00019c   6e14     MOVWF     0x14,0x0                                                                                        
00019e   6a15     CLRF      0x15,0x0                                                                                        
0001a0   6a16     CLRF      0x16,0x0                                                                                        
0001a2   6a17     CLRF      0x17,0x0                                                                                        
0001a4   ae14     BTFSS     0x14,0x7,0x0                                                                                    
0001a6   d003     BRA       0x1ae                                                                                           
0001a8   6815     SETF      0x15,0x0                                                                                        
0001aa   6816     SETF      0x16,0x0                                                                                        
0001ac   6817     SETF      0x17,0x0                                                                                        
0001ae   c100     MOVFF     0x100,0x4                                                                                       
0001b0   f004                                                                                                               
0001b2   c101     MOVFF     0x101,0x5                                                                                       
0001b4   f005                                                                                                               
0001b6   c102     MOVFF     0x102,0x6                                                                                       
0001b8   f006                                                                                                               
0001ba   c103     MOVFF     0x103,0x7                                                                                       
0001bc   f007                                                                                                               
0001be   0e0a     MOVLW     0xa                                                                                             
0001c0   6e09     MOVWF     0x9,0x0                                                                                         
0001c2   6a0a     CLRF      0xa,0x0                                                                                         
0001c4   6a0b     CLRF      0xb,0x0                                                                                         
0001c6   6a0c     CLRF      0xc,0x0                                                                                         
0001c8   ecf0     CALL      0x17e0,0x0                                                                                      
0001ca   f00b                                                                                                               
0001cc   5000     MOVF      0x0,0x0,0x0                                                                                     
0001ce   0100     MOVLB     0x0                                                                                             
0001d0   2414     ADDWF     0x14,0x0,0x0                                                                                    
0001d2   0101     MOVLB     0x1                                                                                             
0001d4   6f00     MOVWF     0x0,0x1                                                                                         
0001d6   5001     MOVF      0x1,0x0,0x0                                                                                     
0001d8   0100     MOVLB     0x0                                                                                             
0001da   2015     ADDWFC    0x15,0x0,0x0                                                                                    
0001dc   0101     MOVLB     0x1                                                                                             
0001de   6f01     MOVWF     0x1,0x1                                                                                         
0001e0   5002     MOVF      0x2,0x0,0x0                                                                                     
0001e2   0100     MOVLB     0x0                                                                                             
0001e4   2016     ADDWFC    0x16,0x0,0x0                                                                                    
0001e6   0101     MOVLB     0x1                                                                                             
0001e8   6f02     MOVWF     0x2,0x1                                                                                         
0001ea   5003     MOVF      0x3,0x0,0x0                                                                                     
0001ec   0100     MOVLB     0x0                                                                                             
0001ee   2017     ADDWFC    0x17,0x0,0x0                                                                                    
0001f0   0101     MOVLB     0x1                                                                                             
0001f2   6f03     MOVWF     0x3,0x1                                                                                         
                                           						}                                                                          E:\usb20\sinegen1\main.c
0001fe   6b08     CLRF      0x8,0x1        						flag = 0;                                                                  E:\usb20\sinegen1\main.c
000200   d055     BRA       0x2ac          						break;                                                                     E:\usb20\sinegen1\main.c
                                           					case '3':					// 周波数設定 三角波                                          E:\usb20\sinegen1\main.c
000202   0101     MOVLB     0x1            						Freq = 0;                                                                  E:\usb20\sinegen1\main.c
000204   6b00     CLRF      0x0,0x1                                                                                         
000206   6b01     CLRF      0x1,0x1                                                                                         
000208   6b02     CLRF      0x2,0x1                                                                                         
00020a   6b03     CLRF      0x3,0x1                                                                                         
00020c   6ade     CLRF      0xde,0x0       						for(i=0; i<6; i++)                                                         E:\usb20\sinegen1\main.c
00020e   6add     CLRF      0xdd,0x0                                                                                        
000210   cfde     MOVFF     0xfde,0x14                                                                                      
000212   f014                                                                                                               
000214   cfdd     MOVFF     0xfdd,0x15                                                                                      
000216   f015                                                                                                               
000218   90d8     BCF       0xd8,0x0,0x0                                                                                    
00021a   5015     MOVF      0x15,0x0,0x0                                                                                    
00021c   e604     BN        0x226                                                                                           
00021e   0e06     MOVLW     0x6                                                                                             
000220   5c14     SUBWF     0x14,0x0,0x0                                                                                    
000222   0e00     MOVLW     0x0                                                                                             
000224   5815     SUBWFB    0x15,0x0,0x0                                                                                    
000226   e23f     BC        0x2a6                                                                                           
00029c   2adf     INCF      0xdf,0x1,0x0                                                                                    
00029e   0e01     MOVLW     0x1                                                                                             
0002a0   e301     BNC       0x2a4                                                                                           
0002a2   2adb     INCF      0xdb,0x1,0x0                                                                                    
0002a4   d7b5     BRA       0x210                                                                                           
                                           						{                                                                          E:\usb20\sinegen1\main.c
000228   cfde     MOVFF     0xfde,0xfe9    								Freq = Freq *10 + (input_buffer[i+1]-0x30);                              E:\usb20\sinegen1\main.c
00022a   ffe9                                                                                                               
00022c   cfdd     MOVFF     0xfdd,0xfea                                                                                     
00022e   ffea                                                                                                               
000230   0e01     MOVLW     0x1                                                                                             
000232   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
000234   0e00     MOVLW     0x0                                                                                             
000236   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000238   0e60     MOVLW     0x60                                                                                            
00023a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00023c   0e00     MOVLW     0x0                                                                                             
00023e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000240   50ef     MOVF      0xef,0x0,0x0                                                                                    
000242   0fd0     ADDLW     0xd0                                                                                            
000244   6e14     MOVWF     0x14,0x0                                                                                        
000246   6a15     CLRF      0x15,0x0                                                                                        
000248   6a16     CLRF      0x16,0x0                                                                                        
00024a   6a17     CLRF      0x17,0x0                                                                                        
00024c   ae14     BTFSS     0x14,0x7,0x0                                                                                    
00024e   d003     BRA       0x256                                                                                           
000250   6815     SETF      0x15,0x0                                                                                        
000252   6816     SETF      0x16,0x0                                                                                        
000254   6817     SETF      0x17,0x0                                                                                        
000256   c100     MOVFF     0x100,0x4                                                                                       
000258   f004                                                                                                               
00025a   c101     MOVFF     0x101,0x5                                                                                       
00025c   f005                                                                                                               
00025e   c102     MOVFF     0x102,0x6                                                                                       
000260   f006                                                                                                               
000262   c103     MOVFF     0x103,0x7                                                                                       
000264   f007                                                                                                               
000266   0e0a     MOVLW     0xa                                                                                             
000268   6e09     MOVWF     0x9,0x0                                                                                         
00026a   6a0a     CLRF      0xa,0x0                                                                                         
00026c   6a0b     CLRF      0xb,0x0                                                                                         
00026e   6a0c     CLRF      0xc,0x0                                                                                         
000270   ecf0     CALL      0x17e0,0x0                                                                                      
000272   f00b                                                                                                               
000274   5000     MOVF      0x0,0x0,0x0                                                                                     
000276   0100     MOVLB     0x0                                                                                             
000278   2414     ADDWF     0x14,0x0,0x0                                                                                    
00027a   0101     MOVLB     0x1                                                                                             
00027c   6f00     MOVWF     0x0,0x1                                                                                         
00027e   5001     MOVF      0x1,0x0,0x0                                                                                     
000280   0100     MOVLB     0x0                                                                                             
000282   2015     ADDWFC    0x15,0x0,0x0                                                                                    
000284   0101     MOVLB     0x1                                                                                             
000286   6f01     MOVWF     0x1,0x1                                                                                         
000288   5002     MOVF      0x2,0x0,0x0                                                                                     
00028a   0100     MOVLB     0x0                                                                                             
00028c   2016     ADDWFC    0x16,0x0,0x0                                                                                    
00028e   0101     MOVLB     0x1                                                                                             
000290   6f02     MOVWF     0x2,0x1                                                                                         
000292   5003     MOVF      0x3,0x0,0x0                                                                                     
000294   0100     MOVLB     0x0                                                                                             
000296   2017     ADDWFC    0x17,0x0,0x0                                                                                    
000298   0101     MOVLB     0x1                                                                                             
00029a   6f03     MOVWF     0x3,0x1                                                                                         
                                           						}                                                                          E:\usb20\sinegen1\main.c
0002a6   0e01     MOVLW     0x1            						flag = 1;                                                                  E:\usb20\sinegen1\main.c
0002a8   6f08     MOVWF     0x8,0x1                                                                                         
0002aa   d000     BRA       0x2ac          						break;  				                                                               E:\usb20\sinegen1\main.c
00011e   d0c6     BRA       0x2ac          		    			default: break;                                                         E:\usb20\sinegen1\main.c
                                           		    		}                                                                        E:\usb20\sinegen1\main.c
0002ac   c108     MOVFF     0x108,0xfe6    		    		SetupDDS(Freq, flag);				// DDS設定出力                                  E:\usb20\sinegen1\main.c
0002ae   ffe6                                                                                                               
0002b0   c100     MOVFF     0x100,0xfe6                                                                                     
0002b2   ffe6                                                                                                               
0002b4   c101     MOVFF     0x101,0xfe6                                                                                     
0002b6   ffe6                                                                                                               
0002b8   c102     MOVFF     0x102,0xfe6                                                                                     
0002ba   ffe6                                                                                                               
0002bc   c103     MOVFF     0x103,0xfe6                                                                                     
0002be   ffe6                                                                                                               
0002c0   d849     RCALL     0x354                                                                                           
0002c2   6ef5     MOVWF     0xf5,0x0                                                                                        
0002c4   0e05     MOVLW     0x5                                                                                             
0002c6   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
0002c8   50f5     MOVF      0xf5,0x0,0x0                                                                                    
0002ca   d98b     RCALL     0x5e2          	    			Display();                                                               E:\usb20\sinegen1\main.c
                                               			}                                                                         E:\usb20\sinegen1\main.c
                                               		}                                                                          E:\usb20\sinegen1\main.c
                                               		//// 周波数刻み設定スイッチチェック                                        E:\usb20\sinegen1\main.c
0002cc   a680     BTFSS     0x80,0x3,0x0       		if(stepSW)                                                                 E:\usb20\sinegen1\main.c
0002ce   d008     BRA       0x2e0                                                                                           
0002d0   0101     MOVLB     0x1                			Delta = 1000;                                                             E:\usb20\sinegen1\main.c
0002d2   0ee8     MOVLW     0xe8                                                                                            
0002d4   6f04     MOVWF     0x4,0x1                                                                                         
0002d6   0e03     MOVLW     0x3                                                                                             
0002d8   6f05     MOVWF     0x5,0x1                                                                                         
0002da   6b06     CLRF      0x6,0x1                                                                                         
0002dc   6b07     CLRF      0x7,0x1                                                                                         
0002de   d006     BRA       0x2ec              		else                                                                       E:\usb20\sinegen1\main.c
0002e0   0101     MOVLB     0x1                			Delta = 10;    		                                                         E:\usb20\sinegen1\main.c
0002e2   0e0a     MOVLW     0xa                                                                                             
0002e4   6f04     MOVWF     0x4,0x1                                                                                         
0002e6   6b05     CLRF      0x5,0x1                                                                                         
0002e8   6b06     CLRF      0x6,0x1                                                                                         
0002ea   6b07     CLRF      0x7,0x1                                                                                         
                                               		//// エンコーダの入力チェック                                              E:\usb20\sinegen1\main.c
0002ec   b880     BTFSC     0x80,0x4,0x0       		if(encoder_a == 0)                                                         E:\usb20\sinegen1\main.c
0002ee   d025     BRA       0x33a                                                                                           
                                               		{                                                                          E:\usb20\sinegen1\main.c
                                                                                                                            E:\usb20\sinegen1\main.c
0002f0   ba80     BTFSC     0x80,0x5,0x0   	    		if(encoder_b == 0)                                                        E:\usb20\sinegen1\main.c
0002f2   d009     BRA       0x306                                                                                           
0002f4   5104     MOVF      0x4,0x0,0x1    	    			Freq += Delta;				// 右周りカウントアップ                                E:\usb20\sinegen1\main.c
0002f6   2700     ADDWF     0x0,0x1,0x1                                                                                     
0002f8   5105     MOVF      0x5,0x0,0x1                                                                                     
0002fa   2301     ADDWFC    0x1,0x1,0x1                                                                                     
0002fc   5106     MOVF      0x6,0x0,0x1                                                                                     
0002fe   2302     ADDWFC    0x2,0x1,0x1                                                                                     
000300   5107     MOVF      0x7,0x0,0x1                                                                                     
000302   2303     ADDWFC    0x3,0x1,0x1                                                                                     
000304   d008     BRA       0x316          	    		else                                                                      E:\usb20\sinegen1\main.c
000306   5104     MOVF      0x4,0x0,0x1    	    			Freq -= Delta;				// 左周りカウントダウン                                E:\usb20\sinegen1\main.c
000308   5f00     SUBWF     0x0,0x1,0x1                                                                                     
00030a   5105     MOVF      0x5,0x0,0x1                                                                                     
00030c   5b01     SUBWFB    0x1,0x1,0x1                                                                                     
00030e   5106     MOVF      0x6,0x0,0x1                                                                                     
000310   5b02     SUBWFB    0x2,0x1,0x1                                                                                     
000312   5107     MOVF      0x7,0x0,0x1                                                                                     
000314   5b03     SUBWFB    0x3,0x1,0x1                                                                                     
                                                                                                                            E:\usb20\sinegen1\main.c
000316   c108     MOVFF     0x108,0xfe6    	    		SetupDDS(Freq, flag);				// DDS設定出力                                   E:\usb20\sinegen1\main.c
000318   ffe6                                                                                                               
00031a   c100     MOVFF     0x100,0xfe6                                                                                     
00031c   ffe6                                                                                                               
00031e   c101     MOVFF     0x101,0xfe6                                                                                     
000320   ffe6                                                                                                               
000322   c102     MOVFF     0x102,0xfe6                                                                                     
000324   ffe6                                                                                                               
000326   c103     MOVFF     0x103,0xfe6                                                                                     
000328   ffe6                                                                                                               
00032a   d814     RCALL     0x354                                                                                           
00032c   6ef5     MOVWF     0xf5,0x0                                                                                        
00032e   0e05     MOVLW     0x5                                                                                             
000330   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
000332   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000334   d956     RCALL     0x5e2          	    		Display();						// 液晶表示                                               E:\usb20\sinegen1\main.c
000336   a880     BTFSS     0x80,0x4,0x0   			while(encoder_a == 0);			// エンコーダ入力完了待ち                            E:\usb20\sinegen1\main.c
000338   d7fe     BRA       0x336                                                                                           
                                               		}                                                                          E:\usb20\sinegen1\main.c
                                                }                                                                           E:\usb20\sinegen1\main.c
00033c   6ef5     MOVWF     0xf5,0x0       }                                                                                E:\usb20\sinegen1\main.c
00033e   0e02     MOVLW     0x2                                                                                             
000340   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000342   e202     BC        0x348                                                                                           
000344   6ae1     CLRF      0xe1,0x0                                                                                        
000346   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000348   6ee1     MOVWF     0xe1,0x0                                                                                        
00034a   50f5     MOVF      0xf5,0x0,0x0                                                                                    
00034c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00034e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000350   ffd9                                                                                                               
000352   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\main.c
                                           ////　DDSシリアル出力関数                                                        E:\usb20\sinegen1\main.c
000354   cfd9     MOVFF     0xfd9,0xfe6    void SetupDDS(unsigned long freqdata, char flag) {                               E:\usb20\sinegen1\main.c
000356   ffe6                                                                                                               
000358   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00035a   ffd9                                                                                                               
00035c   0e0c     MOVLW     0xc                                                                                             
00035e   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	float SetFreq;                                                                  E:\usb20\sinegen1\main.c
                                           	unsigned long temp;                                                             E:\usb20\sinegen1\main.c
                                           	unsigned int uptemp, lowtemp;                                                   E:\usb20\sinegen1\main.c
                                           	                                                                                E:\usb20\sinegen1\main.c
                                           	///設定周波数から設定パラメータ計算                                             E:\usb20\sinegen1\main.c
                                           	///クロック50MHzで計算                                                          E:\usb20\sinegen1\main.c
000360   0e79     MOVLW     0x79           	SetFreq = 5.36871 * (unsigned long)freqdata;	// 設定値                          E:\usb20\sinegen1\main.c
000362   6e14     MOVWF     0x14,0x0                                                                                        
000364   0ecc     MOVLW     0xcc                                                                                            
000366   6e15     MOVWF     0x15,0x0                                                                                        
000368   0eab     MOVLW     0xab                                                                                            
00036a   6e16     MOVWF     0x16,0x0                                                                                        
00036c   0e40     MOVLW     0x40                                                                                            
00036e   6e17     MOVWF     0x17,0x0                                                                                        
000370   0efb     MOVLW     0xfb                                                                                            
000372   cfdb     MOVFF     0xfdb,0x1c                                                                                      
000374   f01c                                                                                                               
000376   0efc     MOVLW     0xfc                                                                                            
000378   cfdb     MOVFF     0xfdb,0x1d                                                                                      
00037a   f01d                                                                                                               
00037c   0efd     MOVLW     0xfd                                                                                            
00037e   cfdb     MOVFF     0xfdb,0x1e                                                                                      
000380   f01e                                                                                                               
000382   0efe     MOVLW     0xfe                                                                                            
000384   cfdb     MOVFF     0xfdb,0x1f                                                                                      
000386   f01f                                                                                                               
000388   c01c     MOVFF     0x1c,0x4                                                                                        
00038a   f004                                                                                                               
00038c   c01d     MOVFF     0x1d,0x5                                                                                        
00038e   f005                                                                                                               
000390   c01e     MOVFF     0x1e,0x6                                                                                        
000392   f006                                                                                                               
000394   c01f     MOVFF     0x1f,0x7                                                                                        
000396   f007                                                                                                               
000398   ec6e     CALL      0x10dc,0x0                                                                                      
00039a   f008                                                                                                               
00039c   c005     MOVFF     0x5,0x18                                                                                        
00039e   f018                                                                                                               
0003a0   c006     MOVFF     0x6,0x19                                                                                        
0003a2   f019                                                                                                               
0003a4   c007     MOVFF     0x7,0x1a                                                                                        
0003a6   f01a                                                                                                               
0003a8   c008     MOVFF     0x8,0x1b                                                                                        
0003aa   f01b                                                                                                               
0003ac   c018     MOVFF     0x18,0xa                                                                                        
0003ae   f00a                                                                                                               
0003b0   c019     MOVFF     0x19,0xb                                                                                        
0003b2   f00b                                                                                                               
0003b4   c01a     MOVFF     0x1a,0xc                                                                                        
0003b6   f00c                                                                                                               
0003b8   c01b     MOVFF     0x1b,0xd                                                                                        
0003ba   f00d                                                                                                               
0003bc   c014     MOVFF     0x14,0x5                                                                                        
0003be   f005                                                                                                               
0003c0   c015     MOVFF     0x15,0x6                                                                                        
0003c2   f006                                                                                                               
0003c4   c016     MOVFF     0x16,0x7                                                                                        
0003c6   f007                                                                                                               
0003c8   c017     MOVFF     0x17,0x8                                                                                        
0003ca   f008                                                                                                               
0003cc   ec89     CALL      0x1112,0x0                                                                                      
0003ce   f008                                                                                                               
0003d0   c005     MOVFF     0x5,0xfde                                                                                       
0003d2   ffde                                                                                                               
0003d4   c006     MOVFF     0x6,0xfde                                                                                       
0003d6   ffde                                                                                                               
0003d8   c007     MOVFF     0x7,0xfde                                                                                       
0003da   ffde                                                                                                               
0003dc   c008     MOVFF     0x8,0xfdd                                                                                       
0003de   ffdd                                                                                                               
0003e0   52dd     MOVF      0xdd,0x1,0x0                                                                                    
0003e2   52dd     MOVF      0xdd,0x1,0x0                                                                                    
0003e4   cfde     MOVFF     0xfde,0x5      	temp = (unsigned long)SetFreq;				// 整数に変換                                 E:\usb20\sinegen1\main.c
0003e6   f005                                                                                                               
0003e8   cfde     MOVFF     0xfde,0x6                                                                                       
0003ea   f006                                                                                                               
0003ec   cfde     MOVFF     0xfde,0x7                                                                                       
0003ee   f007                                                                                                               
0003f0   cfdd     MOVFF     0xfdd,0x8                                                                                       
0003f2   f008                                                                                                               
0003f4   52dd     MOVF      0xdd,0x1,0x0                                                                                    
0003f6   52dd     MOVF      0xdd,0x1,0x0                                                                                    
0003f8   ecf6     CALL      0x11ec,0x0                                                                                      
0003fa   f008                                                                                                               
0003fc   0e04     MOVLW     0x4                                                                                             
0003fe   c004     MOVFF     0x4,0xfdb                                                                                       
000400   ffdb                                                                                                               
000402   0e05     MOVLW     0x5                                                                                             
000404   c005     MOVFF     0x5,0xfdb                                                                                       
000406   ffdb                                                                                                               
000408   0e06     MOVLW     0x6                                                                                             
00040a   c006     MOVFF     0x6,0xfdb                                                                                       
00040c   ffdb                                                                                                               
00040e   0e07     MOVLW     0x7                                                                                             
000410   c007     MOVFF     0x7,0xfdb                                                                                       
000412   ffdb                                                                                                               
000414   6814     SETF      0x14,0x0       	lowtemp =(unsigned int)(temp & 0x3FFF);			// 下位16ビット                       E:\usb20\sinegen1\main.c
000416   0e3f     MOVLW     0x3f                                                                                            
000418   6e15     MOVWF     0x15,0x0                                                                                        
00041a   6a16     CLRF      0x16,0x0                                                                                        
00041c   6a17     CLRF      0x17,0x0                                                                                        
00041e   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000420   0f04     ADDLW     0x4                                                                                             
000422   6ee9     MOVWF     0xe9,0x0                                                                                        
000424   cfda     MOVFF     0xfda,0xfea                                                                                     
000426   ffea                                                                                                               
000428   50ee     MOVF      0xee,0x0,0x0                                                                                    
00042a   1614     ANDWF     0x14,0x1,0x0                                                                                    
00042c   50ee     MOVF      0xee,0x0,0x0                                                                                    
00042e   1615     ANDWF     0x15,0x1,0x0                                                                                    
000430   50ee     MOVF      0xee,0x0,0x0                                                                                    
000432   1616     ANDWF     0x16,0x1,0x0                                                                                    
000434   50ee     MOVF      0xee,0x0,0x0                                                                                    
000436   1617     ANDWF     0x17,0x1,0x0                                                                                    
000438   0e0a     MOVLW     0xa                                                                                             
00043a   c014     MOVFF     0x14,0xfdb                                                                                      
00043c   ffdb                                                                                                               
00043e   0e0b     MOVLW     0xb                                                                                             
000440   c015     MOVFF     0x15,0xfdb                                                                                      
000442   ffdb                                                                                                               
000444   0e04     MOVLW     0x4            	uptemp = (unsigned int)((temp >> 14) & 0x3FFF);	// 上位16ビット                 E:\usb20\sinegen1\main.c
000446   cfdb     MOVFF     0xfdb,0x14                                                                                      
000448   f014                                                                                                               
00044a   0e05     MOVLW     0x5                                                                                             
00044c   cfdb     MOVFF     0xfdb,0x15                                                                                      
00044e   f015                                                                                                               
000450   0e06     MOVLW     0x6                                                                                             
000452   cfdb     MOVFF     0xfdb,0x16                                                                                      
000454   f016                                                                                                               
000456   0e07     MOVLW     0x7                                                                                             
000458   cfdb     MOVFF     0xfdb,0x17                                                                                      
00045a   f017                                                                                                               
00045c   0e0e     MOVLW     0xe                                                                                             
00045e   90d8     BCF       0xd8,0x0,0x0                                                                                    
000460   3217     RRCF      0x17,0x1,0x0                                                                                    
000462   3216     RRCF      0x16,0x1,0x0                                                                                    
000464   3215     RRCF      0x15,0x1,0x0                                                                                    
000466   3214     RRCF      0x14,0x1,0x0                                                                                    
000468   06e8     DECF      0xe8,0x1,0x0                                                                                    
00046a   e1f9     BNZ       0x45e                                                                                           
00046c   6818     SETF      0x18,0x0                                                                                        
00046e   0e3f     MOVLW     0x3f                                                                                            
000470   6e19     MOVWF     0x19,0x0                                                                                        
000472   6a1a     CLRF      0x1a,0x0                                                                                        
000474   6a1b     CLRF      0x1b,0x0                                                                                        
000476   5018     MOVF      0x18,0x0,0x0                                                                                    
000478   1614     ANDWF     0x14,0x1,0x0                                                                                    
00047a   5019     MOVF      0x19,0x0,0x0                                                                                    
00047c   1615     ANDWF     0x15,0x1,0x0                                                                                    
00047e   501a     MOVF      0x1a,0x0,0x0                                                                                    
000480   1616     ANDWF     0x16,0x1,0x0                                                                                    
000482   501b     MOVF      0x1b,0x0,0x0                                                                                    
000484   1617     ANDWF     0x17,0x1,0x0                                                                                    
000486   0e08     MOVLW     0x8                                                                                             
000488   c014     MOVFF     0x14,0xfdb                                                                                      
00048a   ffdb                                                                                                               
00048c   0e09     MOVLW     0x9                                                                                             
00048e   c015     MOVFF     0x15,0xfdb                                                                                      
000490   ffdb                                                                                                               
                                           	/// DDSへコマンド送信                                                           E:\usb20\sinegen1\main.c
                                           	/// Sine 0x2028   Triangle 0x200A                                               E:\usb20\sinegen1\main.c
000492   0efa     MOVLW     0xfa           	if(flag == 0)                                                                   E:\usb20\sinegen1\main.c
000494   50db     MOVF      0xdb,0x0,0x0                                                                                    
000496   e10c     BNZ       0x4b0                                                                                           
000498   0e28     MOVLW     0x28           		SerialOut(0x2028);				// コマンド出力                                          E:\usb20\sinegen1\main.c
00049a   6ee6     MOVWF     0xe6,0x0                                                                                        
00049c   0e20     MOVLW     0x20                                                                                            
00049e   6ee6     MOVWF     0xe6,0x0                                                                                        
0004a0   6ae6     CLRF      0xe6,0x0                                                                                        
0004a2   6ae6     CLRF      0xe6,0x0                                                                                        
0004a4   d84e     RCALL     0x542                                                                                           
0004a6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004a8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004aa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004ac   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004ae   d00b     BRA       0x4c6          	else                                                                            E:\usb20\sinegen1\main.c
0004b0   0e0a     MOVLW     0xa            		SerialOut(0x200A);				// 三角波コマンド出力                                    E:\usb20\sinegen1\main.c
0004b2   6ee6     MOVWF     0xe6,0x0                                                                                        
0004b4   0e20     MOVLW     0x20                                                                                            
0004b6   6ee6     MOVWF     0xe6,0x0                                                                                        
0004b8   6ae6     CLRF      0xe6,0x0                                                                                        
0004ba   6ae6     CLRF      0xe6,0x0                                                                                        
0004bc   d842     RCALL     0x542                                                                                           
0004be   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004c0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004c2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004c6   0e0a     MOVLW     0xa            	SerialOut(lowtemp + 0x4000);			// 周波数データ出力                              E:\usb20\sinegen1\main.c
0004c8   cfdb     MOVFF     0xfdb,0x14                                                                                      
0004ca   f014                                                                                                               
0004cc   0e0b     MOVLW     0xb                                                                                             
0004ce   cfdb     MOVFF     0xfdb,0x15                                                                                      
0004d0   f015                                                                                                               
0004d2   0e00     MOVLW     0x0                                                                                             
0004d4   2614     ADDWF     0x14,0x1,0x0                                                                                    
0004d6   0e40     MOVLW     0x40                                                                                            
0004d8   2215     ADDWFC    0x15,0x1,0x0                                                                                    
0004da   6a16     CLRF      0x16,0x0                                                                                        
0004dc   6a17     CLRF      0x17,0x0                                                                                        
0004de   c014     MOVFF     0x14,0xfe6                                                                                      
0004e0   ffe6                                                                                                               
0004e2   c015     MOVFF     0x15,0xfe6                                                                                      
0004e4   ffe6                                                                                                               
0004e6   c016     MOVFF     0x16,0xfe6                                                                                      
0004e8   ffe6                                                                                                               
0004ea   c017     MOVFF     0x17,0xfe6                                                                                      
0004ec   ffe6                                                                                                               
0004ee   d829     RCALL     0x542                                                                                           
0004f0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004f2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004f4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004f6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0004f8   0e08     MOVLW     0x8            	SerialOut(uptemp + 0x4000);                                                     E:\usb20\sinegen1\main.c
0004fa   cfdb     MOVFF     0xfdb,0x14                                                                                      
0004fc   f014                                                                                                               
0004fe   0e09     MOVLW     0x9                                                                                             
000500   cfdb     MOVFF     0xfdb,0x15                                                                                      
000502   f015                                                                                                               
000504   0e00     MOVLW     0x0                                                                                             
000506   2614     ADDWF     0x14,0x1,0x0                                                                                    
000508   0e40     MOVLW     0x40                                                                                            
00050a   2215     ADDWFC    0x15,0x1,0x0                                                                                    
00050c   6a16     CLRF      0x16,0x0                                                                                        
00050e   6a17     CLRF      0x17,0x0                                                                                        
000510   c014     MOVFF     0x14,0xfe6                                                                                      
000512   ffe6                                                                                                               
000514   c015     MOVFF     0x15,0xfe6                                                                                      
000516   ffe6                                                                                                               
000518   c016     MOVFF     0x16,0xfe6                                                                                      
00051a   ffe6                                                                                                               
00051c   c017     MOVFF     0x17,0xfe6                                                                                      
00051e   ffe6                                                                                                               
000520   d810     RCALL     0x542                                                                                           
000522   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000524   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000526   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000528   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00052a   6ef5     MOVWF     0xf5,0x0       }                                                                                E:\usb20\sinegen1\main.c
00052c   0e0c     MOVLW     0xc                                                                                             
00052e   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000530   e202     BC        0x536                                                                                           
000532   6ae1     CLRF      0xe1,0x0                                                                                        
000534   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000536   6ee1     MOVWF     0xe1,0x0                                                                                        
000538   50f5     MOVF      0xf5,0x0,0x0                                                                                    
00053a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00053c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00053e   ffd9                                                                                                               
000540   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\main.c
                                           //// DDS送信制御関数                                                             E:\usb20\sinegen1\main.c
000542   cfd9     MOVFF     0xfd9,0xfe6    void SerialOut(unsigned long data) {                                             E:\usb20\sinegen1\main.c
000544   ffe6                                                                                                               
000546   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000548   ffd9                                                                                                               
00054a   0e03     MOVLW     0x3                                                                                             
00054c   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	unsigned char i;                                                                E:\usb20\sinegen1\main.c
                                           	unsigned int mask;                                                              E:\usb20\sinegen1\main.c
00054e   0e01     MOVLW     0x1            	mask = 0x8000;                                                                  E:\usb20\sinegen1\main.c
000550   6adb     CLRF      0xdb,0x0                                                                                        
000552   0e80     MOVLW     0x80                                                                                            
000554   6ef3     MOVWF     0xf3,0x0                                                                                        
000556   0e02     MOVLW     0x2                                                                                             
000558   cff3     MOVFF     0xff3,0xfdb                                                                                     
00055a   ffdb                                                                                                               
                                           	                                                                                E:\usb20\sinegen1\main.c
00055c   9489     BCF       0x89,0x2,0x0   	dds_fsync = 0;						// FSYNC low                                                E:\usb20\sinegen1\main.c
00055e   6adf     CLRF      0xdf,0x0       	for(i=0; i<16; i++) {                                                           E:\usb20\sinegen1\main.c
000560   0e10     MOVLW     0x10                                                                                            
000562   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
000564   e231     BC        0x5c8                                                                                           
0005c4   2adf     INCF      0xdf,0x1,0x0                                                                                    
0005c6   d7cc     BRA       0x560                                                                                           
000566   0e01     MOVLW     0x1            		if(data & mask)					// 上位から送信                                            E:\usb20\sinegen1\main.c
000568   cfdb     MOVFF     0xfdb,0x14                                                                                      
00056a   f014                                                                                                               
00056c   0e02     MOVLW     0x2                                                                                             
00056e   cfdb     MOVFF     0xfdb,0x15                                                                                      
000570   f015                                                                                                               
000572   6a16     CLRF      0x16,0x0                                                                                        
000574   6a17     CLRF      0x17,0x0                                                                                        
000576   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000578   0ffb     ADDLW     0xfb                                                                                            
00057a   6ee9     MOVWF     0xe9,0x0                                                                                        
00057c   0eff     MOVLW     0xff                                                                                            
00057e   20da     ADDWFC    0xda,0x0,0x0                                                                                    
000580   6eea     MOVWF     0xea,0x0                                                                                        
000582   50ee     MOVF      0xee,0x0,0x0                                                                                    
000584   1614     ANDWF     0x14,0x1,0x0                                                                                    
000586   50ee     MOVF      0xee,0x0,0x0                                                                                    
000588   1615     ANDWF     0x15,0x1,0x0                                                                                    
00058a   50ee     MOVF      0xee,0x0,0x0                                                                                    
00058c   1616     ANDWF     0x16,0x1,0x0                                                                                    
00058e   50ee     MOVF      0xee,0x0,0x0                                                                                    
000590   1617     ANDWF     0x17,0x1,0x0                                                                                    
000592   5014     MOVF      0x14,0x0,0x0                                                                                    
000594   1015     IORWF     0x15,0x0,0x0                                                                                    
000596   1016     IORWF     0x16,0x0,0x0                                                                                    
000598   1017     IORWF     0x17,0x0,0x0                                                                                    
00059a   e002     BZ        0x5a0                                                                                           
00059c   8089     BSF       0x89,0x0,0x0   			dds_sdat = 1;	                                                                E:\usb20\sinegen1\main.c
00059e   d001     BRA       0x5a2          		else                                                                           E:\usb20\sinegen1\main.c
0005a0   9089     BCF       0x89,0x0,0x0   			dds_sdat = 0;                                                                 E:\usb20\sinegen1\main.c
0005a2   9289     BCF       0x89,0x1,0x0   		dds_sclk = 0;						// SCK                                                      E:\usb20\sinegen1\main.c
0005a4   8289     BSF       0x89,0x1,0x0   		dds_sclk = 1;                                                                  E:\usb20\sinegen1\main.c
0005a6   0e01     MOVLW     0x1            		mask = mask >> 1;					// next bit                                              E:\usb20\sinegen1\main.c
0005a8   cfdb     MOVFF     0xfdb,0x14                                                                                      
0005aa   f014                                                                                                               
0005ac   0e02     MOVLW     0x2                                                                                             
0005ae   cfdb     MOVFF     0xfdb,0x15                                                                                      
0005b0   f015                                                                                                               
0005b2   90d8     BCF       0xd8,0x0,0x0                                                                                    
0005b4   3215     RRCF      0x15,0x1,0x0                                                                                    
0005b6   3214     RRCF      0x14,0x1,0x0                                                                                    
0005b8   0e01     MOVLW     0x1                                                                                             
0005ba   c014     MOVFF     0x14,0xfdb                                                                                      
0005bc   ffdb                                                                                                               
0005be   0e02     MOVLW     0x2                                                                                             
0005c0   c015     MOVFF     0x15,0xfdb                                                                                      
0005c2   ffdb                                                                                                               
                                           	}                                                                               E:\usb20\sinegen1\main.c
0005c8   8489     BSF       0x89,0x2,0x0   	dds_fsync = 1;						// FSYNC High                                               E:\usb20\sinegen1\main.c
0005ca   6ef5     MOVWF     0xf5,0x0       }                                                                                E:\usb20\sinegen1\main.c
0005cc   0e03     MOVLW     0x3                                                                                             
0005ce   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0005d0   e202     BC        0x5d6                                                                                           
0005d2   6ae1     CLRF      0xe1,0x0                                                                                        
0005d4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0005d6   6ee1     MOVWF     0xe1,0x0                                                                                        
0005d8   50f5     MOVF      0xf5,0x0,0x0                                                                                    
0005da   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0005dc   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0005de   ffd9                                                                                                               
0005e0   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\main.c
                                           /// データ表示関数                                                               E:\usb20\sinegen1\main.c
                                           void Display(void)                                                               E:\usb20\sinegen1\main.c
                                           {                                                                                E:\usb20\sinegen1\main.c
                                           	//// 周波数可変幅表示                                                           E:\usb20\sinegen1\main.c
0005e2   0e80     MOVLW     0x80           	lcd_cmd(0x80);						//１行目へ                                                  E:\usb20\sinegen1\main.c
0005e4   6ee6     MOVWF     0xe6,0x0                                                                                        
0005e6   ece9     CALL      0x13d2,0x0                                                                                      
0005e8   f009                                                                                                               
0005ea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0005ec   0e10     MOVLW     0x10           	ltostring(6, Freq, &MsgFreq[0]+7);		// 周波数表示                               E:\usb20\sinegen1\main.c
0005ee   6ee6     MOVWF     0xe6,0x0                                                                                        
0005f0   0e01     MOVLW     0x1                                                                                             
0005f2   6ee6     MOVWF     0xe6,0x0                                                                                        
0005f4   c100     MOVFF     0x100,0xfe6                                                                                     
0005f6   ffe6                                                                                                               
0005f8   c101     MOVFF     0x101,0xfe6                                                                                     
0005fa   ffe6                                                                                                               
0005fc   c102     MOVFF     0x102,0xfe6                                                                                     
0005fe   ffe6                                                                                                               
000600   c103     MOVFF     0x103,0xfe6                                                                                     
000602   ffe6                                                                                                               
000604   0e06     MOVLW     0x6                                                                                             
000606   6ee6     MOVWF     0xe6,0x0                                                                                        
000608   d826     RCALL     0x656                                                                                           
00060a   6ef5     MOVWF     0xf5,0x0                                                                                        
00060c   0e07     MOVLW     0x7                                                                                             
00060e   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
000610   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000612   0e09     MOVLW     0x9            	lcd_str((char *)MsgFreq);				// 見出し表示                                      E:\usb20\sinegen1\main.c
000614   6ee6     MOVWF     0xe6,0x0                                                                                        
000616   0e01     MOVLW     0x1                                                                                             
000618   6ee6     MOVWF     0xe6,0x0                                                                                        
00061a   ec16     CALL      0x142c,0x0                                                                                      
00061c   f00a                                                                                                               
00061e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000620   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000622   0ec0     MOVLW     0xc0           	lcd_cmd(0xC0);						// ２行目へ                                                 E:\usb20\sinegen1\main.c
000624   6ee6     MOVWF     0xe6,0x0                                                                                        
000626   ece9     CALL      0x13d2,0x0                                                                                      
000628   f009                                                                                                               
00062a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00062c   0101     MOVLB     0x1            	if(flag == 0)                                                                   E:\usb20\sinegen1\main.c
00062e   5108     MOVF      0x8,0x0,0x1                                                                                     
000630   e109     BNZ       0x644                                                                                           
000632   0e21     MOVLW     0x21           		lcd_str(MsgSine);					// 正弦波表示                                            E:\usb20\sinegen1\main.c
000634   6ee6     MOVWF     0xe6,0x0                                                                                        
000636   0e01     MOVLW     0x1                                                                                             
000638   6ee6     MOVWF     0xe6,0x0                                                                                        
00063a   ec16     CALL      0x142c,0x0                                                                                      
00063c   f00a                                                                                                               
00063e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000640   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000642   d008     BRA       0x654          	else                                                                            E:\usb20\sinegen1\main.c
000644   0e32     MOVLW     0x32           		lcd_str(MsgTri);					// 三角波表示                                             E:\usb20\sinegen1\main.c
000646   6ee6     MOVWF     0xe6,0x0                                                                                        
000648   0e01     MOVLW     0x1                                                                                             
00064a   6ee6     MOVWF     0xe6,0x0                                                                                        
00064c   ec16     CALL      0x142c,0x0                                                                                      
00064e   f00a                                                                                                               
000650   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000652   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000654   0012     RETURN    0x0            }                                                                                E:\usb20\sinegen1\main.c
                                                                                                                            E:\usb20\sinegen1\main.c
                                           ///// 数値から文字列に変換                                                       E:\usb20\sinegen1\main.c
000656   cfd9     MOVFF     0xfd9,0xfe6    void ltostring(char digit, unsigned long data, byte *buffer)                     E:\usb20\sinegen1\main.c
000658   ffe6                                                                                                               
00065a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00065c   ffd9                                                                                                               
00065e   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                E:\usb20\sinegen1\main.c
                                           	char i;                                                                         E:\usb20\sinegen1\main.c
000660   0efe     MOVLW     0xfe           	buffer += digit;					// 文字列の最後                                            E:\usb20\sinegen1\main.c
000662   cfdb     MOVFF     0xfdb,0x14                                                                                      
000664   f014                                                                                                               
000666   6a15     CLRF      0x15,0x0                                                                                        
000668   be14     BTFSC     0x14,0x7,0x0                                                                                    
00066a   6815     SETF      0x15,0x0                                                                                        
00066c   50d9     MOVF      0xd9,0x0,0x0                                                                                    
00066e   0ff8     ADDLW     0xf8                                                                                            
000670   6ee9     MOVWF     0xe9,0x0                                                                                        
000672   0eff     MOVLW     0xff                                                                                            
000674   20da     ADDWFC    0xda,0x0,0x0                                                                                    
000676   6eea     MOVWF     0xea,0x0                                                                                        
000678   5014     MOVF      0x14,0x0,0x0                                                                                    
00067a   26ee     ADDWF     0xee,0x1,0x0                                                                                    
00067c   5015     MOVF      0x15,0x0,0x0                                                                                    
00067e   22ed     ADDWFC    0xed,0x1,0x0                                                                                    
000680   0efe     MOVLW     0xfe           	for(i=digit; i>0; i--) {			// 最下位桁から上位へ                                E:\usb20\sinegen1\main.c
000682   50db     MOVF      0xdb,0x0,0x0                                                                                    
000684   6edf     MOVWF     0xdf,0x0                                                                                        
000686   cfdf     MOVFF     0xfdf,0x14                                                                                      
000688   f014                                                                                                               
00068a   0e00     MOVLW     0x0                                                                                             
00068c   6ee7     MOVWF     0xe7,0x0                                                                                        
00068e   1814     XORWF     0x14,0x0,0x0                                                                                    
000690   aee8     BTFSS     0xe8,0x7,0x0                                                                                    
000692   d002     BRA       0x698                                                                                           
000694   3414     RLCF      0x14,0x0,0x0                                                                                    
000696   d003     BRA       0x69e                                                                                           
000698   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00069a   80d8     BSF       0xd8,0x0,0x0                                                                                    
00069c   5414     SUBFWB    0x14,0x0,0x0                                                                                    
00069e   e257     BC        0x74e                                                                                           
00074a   06df     DECF      0xdf,0x1,0x0                                                                                    
00074c   d79c     BRA       0x686                                                                                           
0006a0   0ef8     MOVLW     0xf8           		buffer--;					// ポインター１                                                  E:\usb20\sinegen1\main.c
0006a2   06db     DECF      0xdb,0x1,0x0                                                                                    
0006a4   0ef9     MOVLW     0xf9                                                                                            
0006a6   e201     BC        0x6aa                                                                                           
0006a8   06db     DECF      0xdb,0x1,0x0                                                                                    
0006aa   0efa     MOVLW     0xfa           		*buffer = (data % 10) + '0';	// その桁数値を文字にして格納                     E:\usb20\sinegen1\main.c
0006ac   cfdb     MOVFF     0xfdb,0x14                                                                                      
0006ae   f014                                                                                                               
0006b0   0efb     MOVLW     0xfb                                                                                            
0006b2   cfdb     MOVFF     0xfdb,0x15                                                                                      
0006b4   f015                                                                                                               
0006b6   0efc     MOVLW     0xfc                                                                                            
0006b8   cfdb     MOVFF     0xfdb,0x16                                                                                      
0006ba   f016                                                                                                               
0006bc   0efd     MOVLW     0xfd                                                                                            
0006be   cfdb     MOVFF     0xfdb,0x17                                                                                      
0006c0   f017                                                                                                               
0006c2   0e0a     MOVLW     0xa                                                                                             
0006c4   6e09     MOVWF     0x9,0x0                                                                                         
0006c6   6a0a     CLRF      0xa,0x0                                                                                         
0006c8   6a0b     CLRF      0xb,0x0                                                                                         
0006ca   6a0c     CLRF      0xc,0x0                                                                                         
0006cc   c014     MOVFF     0x14,0x4                                                                                        
0006ce   f004                                                                                                               
0006d0   c015     MOVFF     0x15,0x5                                                                                        
0006d2   f005                                                                                                               
0006d4   c016     MOVFF     0x16,0x6                                                                                        
0006d6   f006                                                                                                               
0006d8   c017     MOVFF     0x17,0x7                                                                                        
0006da   f007                                                                                                               
0006dc   ec28     CALL      0x1850,0x0                                                                                      
0006de   f00c                                                                                                               
0006e0   c000     MOVFF     0x0,0x14                                                                                        
0006e2   f014                                                                                                               
0006e4   c001     MOVFF     0x1,0x15                                                                                        
0006e6   f015                                                                                                               
0006e8   c002     MOVFF     0x2,0x16                                                                                        
0006ea   f016                                                                                                               
0006ec   c003     MOVFF     0x3,0x17                                                                                        
0006ee   f017                                                                                                               
0006f0   0e30     MOVLW     0x30                                                                                            
0006f2   2614     ADDWF     0x14,0x1,0x0                                                                                    
0006f4   0e00     MOVLW     0x0                                                                                             
0006f6   2215     ADDWFC    0x15,0x1,0x0                                                                                    
0006f8   2216     ADDWFC    0x16,0x1,0x0                                                                                    
0006fa   2217     ADDWFC    0x17,0x1,0x0                                                                                    
0006fc   0ef8     MOVLW     0xf8                                                                                            
0006fe   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000700   ffe9                                                                                                               
000702   0ef9     MOVLW     0xf9                                                                                            
000704   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000706   ffea                                                                                                               
000708   c014     MOVFF     0x14,0xfef                                                                                      
00070a   ffef                                                                                                               
00070c   0efa     MOVLW     0xfa           		data = data / 10;				// 桁-1                                                   E:\usb20\sinegen1\main.c
00070e   cfdb     MOVFF     0xfdb,0x4                                                                                       
000710   f004                                                                                                               
000712   0efb     MOVLW     0xfb                                                                                            
000714   cfdb     MOVFF     0xfdb,0x5                                                                                       
000716   f005                                                                                                               
000718   0efc     MOVLW     0xfc                                                                                            
00071a   cfdb     MOVFF     0xfdb,0x6                                                                                       
00071c   f006                                                                                                               
00071e   0efd     MOVLW     0xfd                                                                                            
000720   cfdb     MOVFF     0xfdb,0x7                                                                                       
000722   f007                                                                                                               
000724   0e0a     MOVLW     0xa                                                                                             
000726   6e09     MOVWF     0x9,0x0                                                                                         
000728   6a0a     CLRF      0xa,0x0                                                                                         
00072a   6a0b     CLRF      0xb,0x0                                                                                         
00072c   6a0c     CLRF      0xc,0x0                                                                                         
00072e   ec28     CALL      0x1850,0x0                                                                                      
000730   f00c                                                                                                               
000732   0efa     MOVLW     0xfa                                                                                            
000734   c004     MOVFF     0x4,0xfdb                                                                                       
000736   ffdb                                                                                                               
000738   0efb     MOVLW     0xfb                                                                                            
00073a   c005     MOVFF     0x5,0xfdb                                                                                       
00073c   ffdb                                                                                                               
00073e   0efc     MOVLW     0xfc                                                                                            
000740   c006     MOVFF     0x6,0xfdb                                                                                       
000742   ffdb                                                                                                               
000744   0efd     MOVLW     0xfd                                                                                            
000746   c007     MOVFF     0x7,0xfdb                                                                                       
000748   ffdb                                                                                                               
                                           	}                                                                               E:\usb20\sinegen1\main.c
00074e   52e5     MOVF      0xe5,0x1,0x0   }                                                                                E:\usb20\sinegen1\main.c
000750   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000752   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000754   ffd9                                                                                                               
000756   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\main.c
                                                                                                                            E:\usb20\sinegen1\main.c
                                           /*********************************************************************           E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                Microchip USB C18 Firmware Version 1.0                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *********************************************************************           E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * FileName:        usbmmap.c                                                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Dependencies:    See INCLUDES section below                                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Processor:       PIC18                                                        E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Compiler:        C18 2.30.01+                                                 E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Company:         Microchip Technology, Inc.                                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Software License Agreement                                                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The software supplied herewith by Microchip Technology Incorporated           E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * (the 鼎ompany) for its PICmicroｮ Microcontroller is intended and             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * supplied to you, the Company痴 customer, for use solely and                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * software is owned by the Company and/or its supplier, and is                  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * protected under applicable copyright laws. All rights are reserved.           E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Any use in violation of the foregoing restrictions may subject the            E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * user to criminal sanctions under applicable laws, as well as to               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * civil liability for the breach of the terms and conditions of this            E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * license.                                                                      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * THIS SOFTWARE IS PROVIDED IN AN 鄭S IS CONDITION. NO WARRANTIES,             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Author               Date        Comment                                      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            ********************************************************************/           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * -usbmmap.c-                                                                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * USB Memory Map                                                                E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * This file is the USB memory manager; it serves as a compile-time memory       E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * allocator for the USB endpoints. It uses the compile time options passed      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * from usbcfg.h to instantiate endpoints and endpoint buffer.                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Each endpoint requires to have a set of Buffer Descriptor registers(BDT).     E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * A BDT is 4-byte long and has a specific RAM location for each endpoint.       E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 out is located at address 0x400 to 0x403.              E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 in is located at address 0x404 to 0x407.               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The BDT for endpoint 1 out is located at address 0x408 to 0x40B.              E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * and so on... The above allocation assumes the Ping-Pong Buffer Mode 0 is      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * used. These locations are already hard-wired in the silicon. The point        E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * of doing instantiation, i.e. volatile far BDT ep0Bo;, is to provide the       E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * C compiler a way to address each variable directly. This is very important    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * because when a register can be accessed directly, it saves execution time     E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * and reduces program size.                                                     E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Endpoints are defined using the endpoint number and the direction             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * of transfer. For simplicity, usbmmap.c only uses the endpoint number          E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * in the BDT register allocation scheme. This means if the usbcfg.h states      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * that the MAX_EP_NUMBER is number 1, then four BDTs will be                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * instantiated: one each for endpoint0 in and endpoint0 out, which must         E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * always be instantiated for control transfer by default, and one each sets     E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * for endpoint1 in and endpoint1 out. The naming convention for instantiating   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * BDT is                                                                        E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * ep<#>B<d>                                                                     E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * where # is the endpoint number, and d is the direction of                     E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * transfer, which could be either <i> or <o>.                                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The USB memory manager uses MAX_EP_NUMBER, as defined in usbcfg.h, to define  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * the endpoints to be instantiated. This represents the highest endpoint        E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * number to be allocated, not how many endpoints are used. Since the BDTs for   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * endpoints have hardware-assigned addresses in Bank 4, setting this value too  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * high may lead to inefficient use of data RAM. For example, if an application  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * uses only endpoints EP0 and EP4, then the MAX_EP_NUMBER is 4, and not 2.      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The in-between endpoint BDTs in this example (EP1, EP2, and EP3) go unused,   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * and the 24 bytes of memory associated with them are wasted. It does not make  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * much sense to skip endpoints, but the final decision lies with the user.      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The next step is to assign the instantiated BDTs to different                 E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * USB functions. The firmware framework fundamentally assumes that every USB    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * function should know which endpoint it is using, i.e., the default control    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * transfer should know that it is using endpoint 0 in and endpoint 0 out.       E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * A HID class can choose which endpoint it wants to use, but once chosen, it    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * should always know the number of the endpoint.                                E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The assignment of endpoints to USB functions is managed centrally             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * in usbcfg.h. This helps prevent the mistake of having more                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * than one USB function using the same endpoint. The "Endpoint Allocation"      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * section in usbcfg.h provides examples for how to map USB endpoints to USB     E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * functions.                                                                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Quite a few things can be mapped in that section. There is no                 E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * one correct way to do the mapping and the user has the choice to              E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * choose a method that is most suitable to the application.                     E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Typically, however, a user will want to map the following for a given         E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * USB interface function:                                                       E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * 1. The USB interface ID                                                       E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * 2. The endpoint control registers (UEPn)                                      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * 3. The BDT registers (ep<#>B<d>)                                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * 4. The endpoint size                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Example: Assume a USB device class "foo", which uses one out endpoint         E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *          of size 64-byte and one in endpoint of size 64-byte, then:           E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * #define FOO_INTF_ID          0x00                                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * #define FOO_UEP              UEP1                                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * #define FOO_BD_OUT           ep1Bo                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * #define FOO_BD_IN            ep1Bi                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * #define FOO_EP_SIZE          64                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The mapping above has chosen class "foo" to use endpoint 1.                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The names are arbitrary and can be anything other than FOO_??????.            E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * For abstraction, the code for class "foo" should use the abstract             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * definitions of FOO_BD_OUT,FOO_BD_IN, and not ep1Bo or ep1Bi.                  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Note that the endpoint size defined in the usbcfg.h file is again             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * used in the usbmmap.c file. This shows that the relationship between          E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * the two files are tightly related.                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The endpoint buffer for each USB function must be located in the              E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * dual-port RAM area and has to come after all the BDTs have been               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * instantiated. An example declaration is:                                      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * volatile far unsigned char[FOO_EP_SIZE] data;                                 E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * The 'volatile' keyword tells the compiler not to perform any code             E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * optimization on this variable because its content could be modified           E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * by the hardware. The 'far' keyword tells the compiler that this variable      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * is not located in the Access RAM area (0x000 - 0x05F).                        E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * For the variable to be globally accessible by other files, it should be       E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * declared in the header file usbmmap.h as an extern definition, such as        E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * extern volatile far unsigned char[FOO_EP_SIZE] data;                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Conclusion:                                                                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * In a short summary, the dependencies between usbcfg and usbmmap can           E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * be shown as:                                                                  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * usbcfg[MAX_EP_NUMBER] -> usbmmap                                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * usbmmap[ep<#>B<d>] -> usbcfg                                                  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * usbcfg[EP size] -> usbmmap                                                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * usbcfg[abstract ep definitions] -> usb9/hid/cdc/etc class code                E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * usbmmap[endpoint buffer variable] -> usb9/hid/cdc/etc class code              E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Data mapping provides a means for direct addressing of BDT and endpoint       E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * buffer. This means less usage of pointers, which equates to a faster and      E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * smaller program code.                                                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           /** I N C L U D E S **********************************************************/  E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #include "system\typedefs.h"                                                     E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #include "system\usb\usb.h"                                                      E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           /** U S B  G L O B A L  V A R I A B L E S ************************************/  E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #pragma udata                                                                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        E:\usb20\sinegen1\system\usb\usbmmap.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           byte usb_active_cfg;            // Value of current configuration                E:\usb20\sinegen1\system\usb\usbmmap.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                           // setting for each interface ID                 E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           /** U S B  F I X E D  L O C A T I O N  V A R I A B L E S *********************/  E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte)   E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Section A: Buffer Descriptor Table                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * - 0x400 - 0x4FF(max)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * - MAX_EP_NUMBER is defined in autofiles\usbcfg.h                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * - BDT data type is defined in system\usb\usbmmap.h                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(0 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep0Bo;         //Endpoint #0 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep0Bi;         //Endpoint #0 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(1 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep1Bo;         //Endpoint #1 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep1Bi;         //Endpoint #1 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(2 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep2Bo;         //Endpoint #2 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep2Bi;         //Endpoint #2 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(3 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep3Bo;         //Endpoint #3 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep3Bi;         //Endpoint #3 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(4 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep4Bo;         //Endpoint #4 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep4Bi;         //Endpoint #4 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(5 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep5Bo;         //Endpoint #5 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep5Bi;         //Endpoint #5 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(6 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep6Bo;         //Endpoint #6 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep6Bi;         //Endpoint #6 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(7 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep7Bo;         //Endpoint #7 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep7Bi;         //Endpoint #7 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(8 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep8Bo;         //Endpoint #8 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep8Bi;         //Endpoint #8 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(9 <= MAX_EP_NUMBER)                                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep9Bo;         //Endpoint #9 BD Out                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep9Bi;         //Endpoint #9 BD In                              E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(10 <= MAX_EP_NUMBER)                                                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep10Bo;        //Endpoint #10 BD Out                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep10Bi;        //Endpoint #10 BD In                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(11 <= MAX_EP_NUMBER)                                                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep11Bo;        //Endpoint #11 BD Out                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep11Bi;        //Endpoint #11 BD In                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(12 <= MAX_EP_NUMBER)                                                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep12Bo;        //Endpoint #12 BD Out                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep12Bi;        //Endpoint #12 BD In                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(13 <= MAX_EP_NUMBER)                                                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep13Bo;        //Endpoint #13 BD Out                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep13Bi;        //Endpoint #13 BD In                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(14 <= MAX_EP_NUMBER)                                                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep14Bo;        //Endpoint #14 BD Out                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep14Bi;        //Endpoint #14 BD In                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if(15 <= MAX_EP_NUMBER)                                                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep15Bo;        //Endpoint #15 BD Out                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far BDT ep15Bi;        //Endpoint #15 BD In                             E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Section B: EP0 Buffer Space                                                   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            ******************************************************************************  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * - Two buffer areas are defined:                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *   A. CTRL_TRF_SETUP                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *      - Detailed data structure allows direct adddressing of bits and bytes.   E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *   B. CTRL_TRF_DATA                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *      - Data structure allows direct adddressing of the first 8 bytes.         E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * - Both data types are defined in system\usb\usbdefs\usbdefs_ep0_buff.h        E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            * Section C: CDC Buffer                                                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                            ******************************************************************************  E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbmmap.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #pragma udata usbram5a=0x500    //See Linker Script,usb5:0x500-...               E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #if defined(USB_USE_CDC)                                                         E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_notice[CDC_INT_EP_SIZE];                          E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_data_rx[CDC_BULK_OUT_EP_SIZE];                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_data_tx[CDC_BULK_IN_EP_SIZE];                     E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #endif                                                                           E:\usb20\sinegen1\system\usb\usbmmap.c
                                           #pragma udata                                                                    E:\usb20\sinegen1\system\usb\usbmmap.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbmmap.c
                                           /** EOF usbmmap.c ************************************************************/  E:\usb20\sinegen1\system\usb\usbmmap.c
                                           /*********************************************************************           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *             Microchip USB C18 Firmware -  CDC Version 1.0                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *********************************************************************           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * FileName:        cdc.c                                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Dependencies:    See INCLUDES section below                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Processor:       PIC18                                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Compiler:        C18 2.30.01+                                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Company:         Microchip Technology, Inc.                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Software License Agreement                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * (the 鼎ompany) for its PICmicroｮ Microcontroller is intended and             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * supplied to you, the Company痴 customer, for use solely and                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * software is owned by the Company and/or its supplier, and is                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * protected under applicable copyright laws. All rights are reserved.           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Any use in violation of the foregoing restrictions may subject the            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * user to criminal sanctions under applicable laws, as well as to               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * civil liability for the breach of the terms and conditions of this            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * license.                                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN 鄭S IS CONDITION. NO WARRANTIES,             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Author               Date        Comment                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Rawin Rojvanit       11/19/04    Original. RS-232 Emulation Subset            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            ********************************************************************/           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /** I N C L U D E S **********************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           #include <p18cxxx.h>                                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           #include "system\typedefs.h"                                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           #include "system\usb\usb.h"                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           #ifdef USB_USE_CDC                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /** V A R I A B L E S ********************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           #pragma udata                                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           byte cdc_rx_len;            // total rx length                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           byte cdc_trf_state;         // States are defined cdc.h                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           POINTER pCDCSrc;            // Dedicated source pointer                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           POINTER pCDCDst;            // Dedicated destination pointer                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           byte cdc_tx_len;            // total tx length                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           byte cdc_mem_type;          // _ROM, _RAM                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           LINE_CODING line_coding;    // Buffer to store line coding information           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           CONTROL_SIGNAL_BITMAP control_signal_bitmap;                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /*                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * SEND_ENCAPSULATED_COMMAND and GET_ENCAPSULATED_RESPONSE are required          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * requests according to the CDC specification.                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * However, it is not really being used here, therefore a dummy buffer is        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * used for conformance.                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            */                                                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           #define dummy_length    0x08                                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           byte dummy_encapsulated_cmd_response[dummy_length];                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /** D E C L A R A T I O N S **************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           #pragma code                                                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /** C L A S S  S P E C I F I C  R E Q ****************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Function:        void USBCheckCDCRequest(void)                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Overview:        This routine checks the setup data packet to see if it       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  knows how to handle it                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           void USBCheckCDCRequest(void)                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * If request recipient is not an interface then return                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000758   0104     MOVLB     0x4                if(SetupPkt.Recipient != RCPT_INTF) return;                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00075a   5120     MOVF      0x20,0x0,0x1                                                                                    
00075c   0b1f     ANDLW     0x1f                                                                                            
00075e   0801     SUBLW     0x1                                                                                             
000760   e001     BZ        0x764                                                                                           
000762   d05b     BRA       0x81a                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * If request type is not class-specific then return                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000764   5120     MOVF      0x20,0x0,0x1       if(SetupPkt.RequestType != CLASS) return;                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000766   0b60     ANDLW     0x60                                                                                            
000768   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00076a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00076c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00076e   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000770   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000772   0801     SUBLW     0x1                                                                                             
000774   e001     BZ        0x778                                                                                           
000776   d051     BRA       0x81a                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Interface ID must match interface numbers associated with                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * CDC class, else return                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000778   5124     MOVF      0x24,0x0,0x1       if((SetupPkt.bIntfID != CDC_COMM_INTF_ID)&&                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00077a   e003     BZ        0x782                 (SetupPkt.bIntfID != CDC_DATA_INTF_ID)) return;                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00077c   0524     DECF      0x24,0x0,0x1                                                                                    
00077e   e001     BZ        0x782                                                                                           
000780   d04c     BRA       0x81a                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000782   5121     MOVF      0x21,0x0,0x1       switch(SetupPkt.bRequest)                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000784   0a23     XORLW     0x23                                                                                            
000786   e048     BZ        0x818                                                                                           
000788   0a01     XORLW     0x1                                                                                             
00078a   e040     BZ        0x80c                                                                                           
00078c   0a03     XORLW     0x3                                                                                             
00078e   e030     BZ        0x7f0                                                                                           
000790   0a01     XORLW     0x1                                                                                             
000792   e025     BZ        0x7de                                                                                           
000794   0a24     XORLW     0x24                                                                                            
000796   e022     BZ        0x7dc                                                                                           
000798   0a07     XORLW     0x7                                                                                             
00079a   e01f     BZ        0x7da                                                                                           
00079c   0a01     XORLW     0x1                                                                                             
00079e   e01c     BZ        0x7d8                                                                                           
0007a0   0a03     XORLW     0x3                                                                                             
0007a2   e011     BZ        0x7c6                                                                                           
0007a4   0a01     XORLW     0x1                                                                                             
0007a6   e001     BZ        0x7aa                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   case SEND_ENCAPSULATED_COMMAND:                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007aa   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007ac   0e03     MOVLW     0x3                                                                                             
0007ae   6f4e     MOVWF     0x4e,0x1                                                                                        
0007b0   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&dummy_encapsulated_cmd_response;                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007b2   0ef3     MOVLW     0xf3                                                                                            
0007b4   6f4f     MOVWF     0x4f,0x1                                                                                        
0007b6   0e00     MOVLW     0x0                                                                                             
0007b8   6f50     MOVWF     0x50,0x1                                                                                        
0007ba   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007bc   93fc     BCF       0xfc,0x1,0x1                                                                                    
0007be   0101     MOVLB     0x1                        LSB(wCount) = dummy_length;                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007c0   0e08     MOVLW     0x8                                                                                             
0007c2   6f53     MOVWF     0x53,0x1                                                                                        
0007c4   d02a     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   case GET_ENCAPSULATED_RESPONSE:                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007c6   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007c8   0e03     MOVLW     0x3                                                                                             
0007ca   6f4e     MOVWF     0x4e,0x1                                                                                        
                                                       // Populate dummy_encapsulated_cmd_response first.                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007cc   0101     MOVLB     0x1                        pDst.bRam = (byte*)&dummy_encapsulated_cmd_response;                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007ce   0ef3     MOVLW     0xf3                                                                                            
0007d0   6f51     MOVWF     0x51,0x1                                                                                        
0007d2   0e00     MOVLW     0x0                                                                                             
0007d4   6f52     MOVWF     0x52,0x1                                                                                        
0007d6   d021     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   case SET_COMM_FEATURE:                  // Optional                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007d8   d020     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   case GET_COMM_FEATURE:                  // Optional                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007da   d01f     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   case CLEAR_COMM_FEATURE:                // Optional                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007dc   d01e     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   case SET_LINE_CODING:                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007de   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007e0   0e03     MOVLW     0x3                                                                                             
0007e2   6f4e     MOVWF     0x4e,0x1                                                                                        
0007e4   0101     MOVLB     0x1                        pDst.bRam = (byte*)&line_coding;    // Set destination               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007e6   0ee8     MOVLW     0xe8                                                                                            
0007e8   6f51     MOVWF     0x51,0x1                                                                                        
0007ea   0e00     MOVLW     0x0                                                                                             
0007ec   6f52     MOVWF     0x52,0x1                                                                                        
0007ee   d015     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   case GET_LINE_CODING:                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007f0   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007f2   0e03     MOVLW     0x3                                                                                             
0007f4   6f4e     MOVWF     0x4e,0x1                                                                                        
0007f6   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&line_coding;    // Set source                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007f8   0ee8     MOVLW     0xe8                                                                                            
0007fa   6f4f     MOVWF     0x4f,0x1                                                                                        
0007fc   0e00     MOVLW     0x0                                                                                             
0007fe   6f50     MOVWF     0x50,0x1                                                                                        
000800   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;       // Set memory type               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000802   93fc     BCF       0xfc,0x1,0x1                                                                                    
000804   0101     MOVLB     0x1                        LSB(wCount) = LINE_CODING_LENGTH;   // Set data count                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000806   0e07     MOVLW     0x7                                                                                             
000808   6f53     MOVWF     0x53,0x1                                                                                        
00080a   d007     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   case SET_CONTROL_LINE_STATE:                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00080c   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00080e   0e03     MOVLW     0x3                                                                                             
000810   6f4e     MOVWF     0x4e,0x1                                                                                        
000812   c422     MOVFF     0x422,0xef                 control_signal_bitmap._byte = LSB(SetupPkt.W_Value);                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000814   f0ef                                                                                                               
000816   d001     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   case SEND_BREAK:                        // Optional                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000818   d000     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   default:                                                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0007a8   d038     BRA       0x81a                      break;                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               }//end switch(SetupPkt.bRequest)                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00081a   0012     RETURN    0x0            }//end USBCheckCDCRequest                                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /** U S E R  A P I ***********************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Function:        void CDCInitEP(void)                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Overview:        CDCInitEP initializes CDC endpoints, buffer descriptors,     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  internal state-machine, and variables.                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  It should be called after the USB host has sent out a        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  SET_CONFIGURATION request.                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           void CDCInitEP(void)                                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               //Abstract line coding information                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00081c   0100     MOVLB     0x0                line_coding.dwDTERate._dword = 115200;      // baud rate                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00081e   6be8     CLRF      0xe8,0x1                                                                                        
000820   0ec2     MOVLW     0xc2                                                                                            
000822   6fe9     MOVWF     0xe9,0x1                                                                                        
000824   0e01     MOVLW     0x1                                                                                             
000826   6fea     MOVWF     0xea,0x1                                                                                        
000828   6beb     CLRF      0xeb,0x1                                                                                        
00082a   6bec     CLRF      0xec,0x1           line_coding.bCharFormat = 0x00;             // 1 stop bit                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00082c   6bed     CLRF      0xed,0x1           line_coding.bParityType = 0x00;             // None                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00082e   0e08     MOVLW     0x8                line_coding.bDataBits = 0x08;               // 5,6,7,8, or 16                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000830   6fee     MOVWF     0xee,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000832   6be1     CLRF      0xe1,0x1           cdc_trf_state = CDC_TX_READY;                                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000834   6be0     CLRF      0xe0,0x1           cdc_rx_len = 0;                                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000836   0e1a     MOVLW     0x1a               CDC_COMM_UEP = EP_IN|HSHK_EN;               // Enable 1 Comm pipe            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000838   6e72     MOVWF     0x72,0x0                                                                                        
00083a   0e1e     MOVLW     0x1e               CDC_DATA_UEP = EP_OUT_IN|HSHK_EN;           // Enable 2 data pipes           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00083c   6e73     MOVWF     0x73,0x0                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Do not have to init Cnt of IN pipes here.                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Reason:  Number of bytes to send to the host                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *          varies from one transaction to                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *          another. Cnt should equal the exact                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *          number of bytes to transmit for                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *          a given IN transaction.                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *          This number of bytes will only                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *          be known right before the data is                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *          sent.                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00083e   0104     MOVLB     0x4                CDC_INT_BD_IN.ADR = (byte*)&cdc_notice;     // Set buffer address            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000840   0e00     MOVLW     0x0                                                                                             
000842   6f16     MOVWF     0x16,0x1                                                                                        
000844   0e05     MOVLW     0x5                                                                                             
000846   6f17     MOVWF     0x17,0x1                                                                                        
000848   0e40     MOVLW     0x40               CDC_INT_BD_IN.Stat._byte = _UCPU|_DAT1;     // Set status                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00084a   6f14     MOVWF     0x14,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00084c   0104     MOVLB     0x4                CDC_BULK_BD_OUT.Cnt = sizeof(cdc_data_rx);  // Set buffer size               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00084e   6f19     MOVWF     0x19,0x1                                                                                        
000850   0e08     MOVLW     0x8                CDC_BULK_BD_OUT.ADR = (byte*)&cdc_data_rx;  // Set buffer address            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000852   6f1a     MOVWF     0x1a,0x1                                                                                        
000854   0e05     MOVLW     0x5                                                                                             
000856   6f1b     MOVWF     0x1b,0x1                                                                                        
000858   0e88     MOVLW     0x88               CDC_BULK_BD_OUT.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00085a   6f18     MOVWF     0x18,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00085c   0104     MOVLB     0x4                CDC_BULK_BD_IN.ADR = (byte*)&cdc_data_tx;   // Set buffer size               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00085e   0e48     MOVLW     0x48                                                                                            
000860   6f1e     MOVWF     0x1e,0x1                                                                                        
000862   0e05     MOVLW     0x5                                                                                             
000864   6f1f     MOVWF     0x1f,0x1                                                                                        
000866   0e40     MOVLW     0x40               CDC_BULK_BD_IN.Stat._byte = _UCPU|_DAT1;    // Set buffer address            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000868   6f1c     MOVWF     0x1c,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00086a   0012     RETURN    0x0            }//end CDCInitEP                                                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Function:        byte getsUSBUSART(char *buffer,                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                    byte len)                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * PreCondition:    Value of input argument 'len' should be smaller than the     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  maximum endpoint size responsible for receiving bulk         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  data from USB host for CDC class.                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  Input argument 'buffer' should point to a buffer area that   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  is bigger or equal to the size specified by 'len'.           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Input:           buffer  : Pointer to where received bytes are to be stored   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  len     : The number of bytes expected.                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Output:          The number of bytes copied to buffer.                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Side Effects:    Publicly accessible variable cdc_rx_len is updated with      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  the number of bytes copied to buffer.                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  Once getsUSBUSART is called, subsequent retrieval of         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  cdc_rx_len can be done by calling macro mCDCGetRxLength().   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Overview:        getsUSBUSART copies a string of bytes received through       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  USB CDC Bulk OUT endpoint to a user's specified location.    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  It is a non-blocking function. It does not wait              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  for data if there is no data available. Instead it returns   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  '0' to notify the caller that there is no data available.    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Note:            If the actual number of bytes received is larger than the    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  number of bytes expected (len), only the expected number     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  of bytes specified will be copied to buffer.                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  If the actual number of bytes received is smaller than the   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  number of bytes expected (len), only the actual number       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  of bytes received will be copied to buffer.                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00086c   cfd9     MOVFF     0xfd9,0xfe6    byte getsUSBUSART(char *buffer, byte len)                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00086e   ffe6                                                                                                               
000870   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000872   ffd9                                                                                                               
                                           {                                                                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000874   0100     MOVLB     0x0                cdc_rx_len = 0;                                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000876   6be0     CLRF      0xe0,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000878   0104     MOVLB     0x4                if(!mCDCUsartRxIsBusy())                                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00087a   bf18     BTFSC     0x18,0x7,0x1                                                                                    
00087c   d030     BRA       0x8de                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    * Adjust the expected number of bytes to equal                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    * the actual number of bytes received.                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00087e   0efc     MOVLW     0xfc                   if(len > CDC_BULK_BD_OUT.Cnt)                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000880   cfdb     MOVFF     0xfdb,0x14                                                                                      
000882   f014                                                                                                               
000884   5119     MOVF      0x19,0x0,0x1                                                                                    
000886   80d8     BSF       0xd8,0x0,0x0                                                                                    
000888   5414     SUBFWB    0x14,0x0,0x0                                                                                    
00088a   e203     BC        0x892                                                                                           
00088c   0efc     MOVLW     0xfc                       len = CDC_BULK_BD_OUT.Cnt;                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00088e   c419     MOVFF     0x419,0xfdb                                                                                     
000890   ffdb                                                                                                               
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    * Copy data from dual-ram buffer to user's buffer                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000892   0100     MOVLB     0x0                    for(cdc_rx_len = 0; cdc_rx_len < len; cdc_rx_len++)                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000894   6be0     CLRF      0xe0,0x1                                                                                        
000896   0efc     MOVLW     0xfc                                                                                            
000898   50db     MOVF      0xdb,0x0,0x0                                                                                    
00089a   5de0     SUBWF     0xe0,0x0,0x1                                                                                    
00089c   e219     BC        0x8d0                                                                                           
0008cc   2be0     INCF      0xe0,0x1,0x1                                                                                    
0008ce   d7e3     BRA       0x896                                                                                           
00089e   51e0     MOVF      0xe0,0x0,0x1               buffer[cdc_rx_len] = cdc_data_rx[cdc_rx_len];                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008a0   6aea     CLRF      0xea,0x0                                                                                        
0008a2   0f08     ADDLW     0x8                                                                                             
0008a4   6ee9     MOVWF     0xe9,0x0                                                                                        
0008a6   0e05     MOVLW     0x5                                                                                             
0008a8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0008aa   50ef     MOVF      0xef,0x0,0x0                                                                                    
0008ac   6ee6     MOVWF     0xe6,0x0                                                                                        
0008ae   51e0     MOVF      0xe0,0x0,0x1                                                                                    
0008b0   6ee7     MOVWF     0xe7,0x0                                                                                        
0008b2   0efd     MOVLW     0xfd                                                                                            
0008b4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0008b6   ffe9                                                                                                               
0008b8   0efe     MOVLW     0xfe                                                                                            
0008ba   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0008bc   ffea                                                                                                               
0008be   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0008c0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0008c2   0e00     MOVLW     0x0                                                                                             
0008c4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0008c6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0008c8   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0008ca   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    * Prepare dual-ram buffer for next OUT transaction                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008d0   0104     MOVLB     0x4                    CDC_BULK_BD_OUT.Cnt = sizeof(cdc_data_rx);                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008d2   0e40     MOVLW     0x40                                                                                            
0008d4   6f19     MOVWF     0x19,0x1                                                                                        
0008d6   1718     ANDWF     0x18,0x1,0x1           mUSBBufferReady(CDC_BULK_BD_OUT);                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008d8   7d18     BTG       0x18,0x6,0x1                                                                                    
0008da   0e88     MOVLW     0x88                                                                                            
0008dc   1318     IORWF     0x18,0x1,0x1                                                                                    
                                               }//end if                                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008de   0100     MOVLB     0x0                return cdc_rx_len;                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008e0   51e0     MOVF      0xe0,0x0,0x1                                                                                    
0008e2   d000     BRA       0x8e4                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008e4   52e5     MOVF      0xe5,0x1,0x0   }//end getsUSBUSART                                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008e6   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0008e8   ffd9                                                                                                               
0008ea   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Function:        void putsUSBUSART(char *data)                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * PreCondition:    cdc_trf_state must be in the CDC_TX_READY state.             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  The string of characters pointed to by 'data' must equal     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  to or smaller than 255 bytes.                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Input:           data    : Pointer to a null-terminated string of data.       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                            If a null character is not found, 255 bytes        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                            of data will be transferred to the host.           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Overview:        putsUSBUSART writes a string of data to the USB including    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  the null character. Use this version, 'puts', to transfer    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  data located in data memory.                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Note:            The transfer mechanism for device-to-host(put) is more       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  flexible than host-to-device(get). It can handle             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  a string of data larger than the maximum size of bulk IN     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  endpoint. A state machine is used to transfer a long         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  string of data over multiple USB transactions.               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  See CDCTxService() for more details.                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008ec   cfd9     MOVFF     0xfd9,0xfe6    void putsUSBUSART(char *data)                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008ee   ffe6                                                                                                               
0008f0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0008f2   ffd9                                                                                                               
0008f4   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               byte len;                                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * User should have checked that cdc_trf_state is in CDC_TX_READY state      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * before calling this function.                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * As a safety precaution, this fuction checks the state one more time       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * to make sure it does not override any pending transactions.               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Currently it just quits the routine without reporting any errors back     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * to the user.                                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Bottomline: User MUST make sure that mUSBUSARTIsTxTrfReady()==1           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *             before calling this function!                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Example:                                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * if(mUSBUSARTIsTxTrfReady())                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * IMPORTANT: Never use the following blocking while loop to wait:           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * while(!mUSBUSARTIsTxTrfReady())                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * The whole firmware framework is written based on cooperative              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * multi-tasking and a blocking code is not acceptable.                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Use a state machine instead.                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008f6   0100     MOVLB     0x0                if(cdc_trf_state != CDC_TX_READY) return;                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008f8   51e1     MOVF      0xe1,0x0,0x1                                                                                    
0008fa   e001     BZ        0x8fe                                                                                           
0008fc   d02f     BRA       0x95c                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * While loop counts the number of bytes to send including the               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * null character.                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0008fe   6adf     CLRF      0xdf,0x0           len = 0;                                                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               do                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               {                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000900   2adf     INCF      0xdf,0x1,0x0           len++;                                                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000902   50df     MOVF      0xdf,0x0,0x0           if(len == 255) break;       // Break loop once max len is reached.       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000904   6e14     MOVWF     0x14,0x0                                                                                        
000906   6a15     CLRF      0x15,0x0                                                                                        
000908   0eff     MOVLW     0xff                                                                                            
00090a   1814     XORWF     0x14,0x0,0x0                                                                                    
00090c   e101     BNZ       0x910                                                                                           
00090e   5015     MOVF      0x15,0x0,0x0                                                                                    
000910   e101     BNZ       0x914                                                                                           
000912   d00b     BRA       0x92a                                                                                           
000914   0efd     MOVLW     0xfd               }while(*data++);                                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000916   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000918   ffe9                                                                                                               
00091a   2adb     INCF      0xdb,0x1,0x0                                                                                    
00091c   0efe     MOVLW     0xfe                                                                                            
00091e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000920   ffea                                                                                                               
000922   e301     BNC       0x926                                                                                           
000924   2adb     INCF      0xdb,0x1,0x0                                                                                    
000926   50ef     MOVF      0xef,0x0,0x0                                                                                    
000928   e1eb     BNZ       0x900                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Re-adjust pointer to its initial location                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00092a   50df     MOVF      0xdf,0x0,0x0       data-=len;                                                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00092c   6e14     MOVWF     0x14,0x0                                                                                        
00092e   6a15     CLRF      0x15,0x0                                                                                        
000930   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000932   0ffd     ADDLW     0xfd                                                                                            
000934   6ee9     MOVWF     0xe9,0x0                                                                                        
000936   0eff     MOVLW     0xff                                                                                            
000938   20da     ADDWFC    0xda,0x0,0x0                                                                                    
00093a   6eea     MOVWF     0xea,0x0                                                                                        
00093c   5014     MOVF      0x14,0x0,0x0                                                                                    
00093e   5eee     SUBWF     0xee,0x1,0x0                                                                                    
000940   5015     MOVF      0x15,0x0,0x0                                                                                    
000942   5aed     SUBWFB    0xed,0x1,0x0                                                                                    
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Second piece of information (length of data to send) is ready.            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Call mUSBUSARTTxRam to setup the transfer.                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * The actual transfer process will be handled by CDCTxService(),            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * which should be called once per Main Program loop.                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000944   0efd     MOVLW     0xfd               mUSBUSARTTxRam((byte*)data,len);     // See cdc.h                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000946   cfdb     MOVFF     0xfdb,0xe2                                                                                      
000948   f0e2                                                                                                               
00094a   0efe     MOVLW     0xfe                                                                                            
00094c   cfdb     MOVFF     0xfdb,0xe3                                                                                      
00094e   f0e3                                                                                                               
000950   cfdf     MOVFF     0xfdf,0xe6                                                                                      
000952   f0e6                                                                                                               
000954   0100     MOVLB     0x0                                                                                             
000956   6be7     CLRF      0xe7,0x1                                                                                        
000958   0e01     MOVLW     0x1                                                                                             
00095a   6fe1     MOVWF     0xe1,0x1                                                                                        
00095c   52e5     MOVF      0xe5,0x1,0x0   }//end putsUSBUSART                                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00095e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000960   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000962   ffd9                                                                                                               
000964   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Function:        void putrsUSBUSART(const rom char *data)                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * PreCondition:    cdc_trf_state must be in the CDC_TX_READY state.             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  The string of characters pointed to by 'data' must equal     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  to or smaller than 255 bytes.                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Input:           data    : Pointer to a null-terminated string of data.       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                            If a null character is not found, 255 bytes        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                            of data will be transferred to the host.           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Overview:        putrsUSBUSART writes a string of data to the USB including   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  the null character. Use this version, 'putrs', to transfer   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  data literals and data located in program memory.            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Note:            The transfer mechanism for device-to-host(put) is more       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  flexible than host-to-device(get). It can handle             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  a string of data larger than the maximum size of bulk IN     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  endpoint. A state machine is used to transfer a long         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  string of data over multiple USB transactions.               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  See CDCTxService() for more details.                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000966   cfd9     MOVFF     0xfd9,0xfe6    void putrsUSBUSART(const rom char *data)                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000968   ffe6                                                                                                               
00096a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00096c   ffd9                                                                                                               
00096e   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               byte len;                                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * User should have checked that cdc_trf_state is in CDC_TX_READY state      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * before calling this function.                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * As a safety precaution, this fuction checks the state one more time       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * to make sure it does not override any pending transactions.               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Currently it just quits the routine without reporting any errors back     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * to the user.                                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Bottomline: User MUST make sure that mUSBUSARTIsTxTrfReady()              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *             before calling this function!                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Example:                                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * if(mUSBUSARTIsTxTrfReady())                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * IMPORTANT: Never use the following blocking while loop to wait:           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * while(cdc_trf_state != CDC_TX_READY)                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * The whole firmware framework is written based on cooperative              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * multi-tasking and a blocking code is not acceptable.                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Use a state machine instead.                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000970   0100     MOVLB     0x0                if(cdc_trf_state != CDC_TX_READY) return;                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000972   51e1     MOVF      0xe1,0x0,0x1                                                                                    
000974   e001     BZ        0x978                                                                                           
000976   d030     BRA       0x9d8                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * While loop counts the number of bytes to send including the               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * null character.                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000978   6adf     CLRF      0xdf,0x0           len = 0;                                                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               do                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               {                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00097a   2adf     INCF      0xdf,0x1,0x0           len++;                                                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00097c   50df     MOVF      0xdf,0x0,0x0           if(len == 255) break;       // Break loop once max len is reached.       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
00097e   6e14     MOVWF     0x14,0x0                                                                                        
000980   6a15     CLRF      0x15,0x0                                                                                        
000982   0eff     MOVLW     0xff                                                                                            
000984   1814     XORWF     0x14,0x0,0x0                                                                                    
000986   e101     BNZ       0x98a                                                                                           
000988   5015     MOVF      0x15,0x0,0x0                                                                                    
00098a   e101     BNZ       0x98e                                                                                           
00098c   d00c     BRA       0x9a6                                                                                           
00098e   0efd     MOVLW     0xfd               }while(*data++);                                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000990   cfdb     MOVFF     0xfdb,0xff6                                                                                     
000992   fff6                                                                                                               
000994   2adb     INCF      0xdb,0x1,0x0                                                                                    
000996   0efe     MOVLW     0xfe                                                                                            
000998   cfdb     MOVFF     0xfdb,0xff7                                                                                     
00099a   fff7                                                                                                               
00099c   e301     BNC       0x9a0                                                                                           
00099e   2adb     INCF      0xdb,0x1,0x0                                                                                    
0009a0   0008     TBLRD                                                                                                     
0009a2   50f5     MOVF      0xf5,0x0,0x0                                                                                    
0009a4   e1ea     BNZ       0x97a                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Re-adjust pointer to its initial location                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009a6   50df     MOVF      0xdf,0x0,0x0       data-=len;                                                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009a8   6e14     MOVWF     0x14,0x0                                                                                        
0009aa   6a15     CLRF      0x15,0x0                                                                                        
0009ac   50d9     MOVF      0xd9,0x0,0x0                                                                                    
0009ae   0ffd     ADDLW     0xfd                                                                                            
0009b0   6ee9     MOVWF     0xe9,0x0                                                                                        
0009b2   0eff     MOVLW     0xff                                                                                            
0009b4   20da     ADDWFC    0xda,0x0,0x0                                                                                    
0009b6   6eea     MOVWF     0xea,0x0                                                                                        
0009b8   5014     MOVF      0x14,0x0,0x0                                                                                    
0009ba   5eee     SUBWF     0xee,0x1,0x0                                                                                    
0009bc   5015     MOVF      0x15,0x0,0x0                                                                                    
0009be   5aed     SUBWFB    0xed,0x1,0x0                                                                                    
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Second piece of information (length of data to send) is ready.            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Call mUSBUSARTTxRom to setup the transfer.                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * The actual transfer process will be handled by CDCTxService(),            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * which should be called once per Main Program loop.                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009c0   0efd     MOVLW     0xfd               mUSBUSARTTxRom((rom byte*)data,len); // See cdc.h                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009c2   cfdb     MOVFF     0xfdb,0xe2                                                                                      
0009c4   f0e2                                                                                                               
0009c6   0efe     MOVLW     0xfe                                                                                            
0009c8   cfdb     MOVFF     0xfdb,0xe3                                                                                      
0009ca   f0e3                                                                                                               
0009cc   cfdf     MOVFF     0xfdf,0xe6                                                                                      
0009ce   f0e6                                                                                                               
0009d0   0100     MOVLB     0x0                                                                                             
0009d2   0e01     MOVLW     0x1                                                                                             
0009d4   6fe7     MOVWF     0xe7,0x1                                                                                        
0009d6   6fe1     MOVWF     0xe1,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009d8   52e5     MOVF      0xe5,0x1,0x0   }//end putrsUSBUSART                                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009da   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009dc   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0009de   ffd9                                                                                                               
0009e0   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Function:        void CDCTxService(void)                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Overview:        CDCTxService handles device-to-host transaction(s).          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                  This function should be called once per Main Program loop.   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009e2   cfd9     MOVFF     0xfd9,0xfe6    void CDCTxService(void)                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009e4   ffe6                                                                                                               
0009e6   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0009e8   ffd9                                                                                                               
0009ea   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               byte byte_to_send;                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009ec   0104     MOVLB     0x4                if(mCDCUsartTxIsBusy()) return;                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009ee   bf1c     BTFSC     0x1c,0x7,0x1                                                                                    
0009f0   d06b     BRA       0xac8                                                                                           
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Completing stage is necessary while [ mCDCUSartTxIsBusy()==1 ].           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * By having this stage, user can always check cdc_trf_state,                E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * and not having to call mCDCUsartTxIsBusy() directly.                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009f2   0e03     MOVLW     0x3                if(cdc_trf_state == CDC_TX_COMPLETING)                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009f4   0100     MOVLB     0x0                                                                                             
0009f6   5de1     SUBWF     0xe1,0x0,0x1                                                                                    
0009f8   e101     BNZ       0x9fc                                                                                           
0009fa   6be1     CLRF      0xe1,0x1               cdc_trf_state = CDC_TX_READY;                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * If CDC_TX_READY state, nothing to do, just return.                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009fc   51e1     MOVF      0xe1,0x0,0x1       if(cdc_trf_state == CDC_TX_READY) return;                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
0009fe   e101     BNZ       0xa02                                                                                           
000a00   d063     BRA       0xac8                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * If CDC_TX_BUSY_ZLP state, send zero length packet                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a02   0e02     MOVLW     0x2                if(cdc_trf_state == CDC_TX_BUSY_ZLP)                                         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a04   5de1     SUBWF     0xe1,0x0,0x1                                                                                    
000a06   e106     BNZ       0xa14                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a08   0104     MOVLB     0x4                    CDC_BULK_BD_IN.Cnt = 0;                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a0a   6b1d     CLRF      0x1d,0x1                                                                                        
000a0c   0100     MOVLB     0x0                    cdc_trf_state = CDC_TX_COMPLETING;                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a0e   0e03     MOVLW     0x3                                                                                             
000a10   6fe1     MOVWF     0xe1,0x1                                                                                        
                                               }                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a12   d054     BRA       0xabc              else if(cdc_trf_state == CDC_TX_BUSY)                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a14   05e1     DECF      0xe1,0x0,0x1                                                                                    
000a16   e152     BNZ       0xabc                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    * First, have to figure out how many byte of data to send.              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a18   0e40     MOVLW     0x40               	if(cdc_tx_len > sizeof(cdc_data_tx))                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a1a   6e14     MOVWF     0x14,0x0                                                                                        
000a1c   6a15     CLRF      0x15,0x0                                                                                        
000a1e   51e6     MOVF      0xe6,0x0,0x1                                                                                    
000a20   5c14     SUBWF     0x14,0x0,0x0                                                                                    
000a22   0e00     MOVLW     0x0                                                                                             
000a24   5815     SUBWFB    0x15,0x0,0x0                                                                                    
000a26   e203     BC        0xa2e                                                                                           
000a28   0e40     MOVLW     0x40               	    byte_to_send = sizeof(cdc_data_tx);                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a2a   6edf     MOVWF     0xdf,0x0                                                                                        
000a2c   d002     BRA       0xa32              	else                                                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a2e   c0e6     MOVFF     0xe6,0xfdf         	    byte_to_send = cdc_tx_len;                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a30   ffdf                                                                                                               
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    * Next, load the number of bytes to send to Cnt in buffer descriptor    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a32   cfdf     MOVFF     0xfdf,0x41d            CDC_BULK_BD_IN.Cnt = byte_to_send;                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a34   f41d                                                                                                               
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    * Subtract the number of bytes just about to be sent from the total.    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a36   50df     MOVF      0xdf,0x0,0x0       	cdc_tx_len = cdc_tx_len - byte_to_send;                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a38   5de6     SUBWF     0xe6,0x0,0x1                                                                                    
000a3a   6fe6     MOVWF     0xe6,0x1                                                                                        
                                               	                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a3c   0e48     MOVLW     0x48                   pCDCDst.bRam = (byte*)&cdc_data_tx; // Set destination pointer           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a3e   6fe4     MOVWF     0xe4,0x1                                                                                        
000a40   0e05     MOVLW     0x5                                                                                             
000a42   6fe5     MOVWF     0xe5,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a44   05e7     DECF      0xe7,0x0,0x1           if(cdc_mem_type == _ROM)            // Determine type of memory source   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a46   e115     BNZ       0xa72                                                                                           
                                                   {                                                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a48   50df     MOVF      0xdf,0x0,0x0               while(byte_to_send)                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a4a   e012     BZ        0xa70                                                                                           
000a6e   d7ec     BRA       0xa48                                                                                           
                                                       {                                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a4c   c0e2     MOVFF     0xe2,0xff6                     *pCDCDst.bRam = *pCDCSrc.bRom;                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a4e   fff6                                                                                                               
000a50   c0e3     MOVFF     0xe3,0xff7                                                                                      
000a52   fff7                                                                                                               
000a54   0008     TBLRD                                                                                                     
000a56   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000a58   c0e4     MOVFF     0xe4,0xfe9                                                                                      
000a5a   ffe9                                                                                                               
000a5c   c0e5     MOVFF     0xe5,0xfea                                                                                      
000a5e   ffea                                                                                                               
000a60   6eef     MOVWF     0xef,0x0                                                                                        
000a62   2be4     INCF      0xe4,0x1,0x1                   pCDCDst.bRam++;                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a64   0e00     MOVLW     0x0                                                                                             
000a66   23e5     ADDWFC    0xe5,0x1,0x1                                                                                    
000a68   2be2     INCF      0xe2,0x1,0x1                   pCDCSrc.bRom++;                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a6a   23e3     ADDWFC    0xe3,0x1,0x1                                                                                    
000a6c   06df     DECF      0xdf,0x1,0x0                   byte_to_send--;                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                       }//end while(byte_to_send)                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   }                                                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a70   d013     BRA       0xa98                  else // _RAM                                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   {                                                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a72   50df     MOVF      0xdf,0x0,0x0               while(byte_to_send)                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a74   e011     BZ        0xa98                                                                                           
000a96   d7ed     BRA       0xa72                                                                                           
                                                       {                                                                    E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a76   c0e2     MOVFF     0xe2,0xfe9                     *pCDCDst.bRam = *pCDCSrc.bRam;                                   E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a78   ffe9                                                                                                               
000a7a   c0e3     MOVFF     0xe3,0xfea                                                                                      
000a7c   ffea                                                                                                               
000a7e   50ef     MOVF      0xef,0x0,0x0                                                                                    
000a80   c0e4     MOVFF     0xe4,0xfe9                                                                                      
000a82   ffe9                                                                                                               
000a84   c0e5     MOVFF     0xe5,0xfea                                                                                      
000a86   ffea                                                                                                               
000a88   6eef     MOVWF     0xef,0x0                                                                                        
000a8a   2be4     INCF      0xe4,0x1,0x1                   pCDCDst.bRam++;                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a8c   0e00     MOVLW     0x0                                                                                             
000a8e   23e5     ADDWFC    0xe5,0x1,0x1                                                                                    
000a90   2be2     INCF      0xe2,0x1,0x1                   pCDCSrc.bRam++;                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a92   23e3     ADDWFC    0xe3,0x1,0x1                                                                                    
000a94   06df     DECF      0xdf,0x1,0x0                   byte_to_send--;                                                  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                       }//end while(byte_to_send._word)                                     E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   }//end if(cdc_mem_type...)                                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    * Lastly, determine if a zero length packet state is necessary.         E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    * See explanation in USB Specification 2.0: Section 5.8.3               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a98   51e6     MOVF      0xe6,0x0,0x1           if(cdc_tx_len == 0)                                                      E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a9a   e110     BNZ       0xabc                                                                                           
                                                   {                                                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a9c   0104     MOVLB     0x4                        if(CDC_BULK_BD_IN.Cnt == sizeof(cdc_data_tx))                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000a9e   511d     MOVF      0x1d,0x0,0x1                                                                                    
000aa0   6e14     MOVWF     0x14,0x0                                                                                        
000aa2   6a15     CLRF      0x15,0x0                                                                                        
000aa4   0e40     MOVLW     0x40                                                                                            
000aa6   1814     XORWF     0x14,0x0,0x0                                                                                    
000aa8   e101     BNZ       0xaac                                                                                           
000aaa   5015     MOVF      0x15,0x0,0x0                                                                                    
000aac   e104     BNZ       0xab6                                                                                           
000aae   0100     MOVLB     0x0                            cdc_trf_state = CDC_TX_BUSY_ZLP;                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000ab0   0e02     MOVLW     0x2                                                                                             
000ab2   6fe1     MOVWF     0xe1,0x1                                                                                        
000ab4   d003     BRA       0xabc                      else                                                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000ab6   0100     MOVLB     0x0                            cdc_trf_state = CDC_TX_COMPLETING;                               E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000ab8   0e03     MOVLW     0x3                                                                                             
000aba   6fe1     MOVWF     0xe1,0x1                                                                                        
                                                   }//end if(cdc_tx_len...)                                                 E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               }//end if(cdc_tx_sate == CDC_TX_BUSY)                                        E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                * Both CDC_TX_BUSY and CDC_TX_BUSY_ZLP states use the following macro       E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000abc   0e40     MOVLW     0x40               mUSBBufferReady(CDC_BULK_BD_IN);                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000abe   0104     MOVLB     0x4                                                                                             
000ac0   171c     ANDWF     0x1c,0x1,0x1                                                                                    
000ac2   7d1c     BTG       0x1c,0x6,0x1                                                                                    
000ac4   0e88     MOVLW     0x88                                                                                            
000ac6   131c     IORWF     0x1c,0x1,0x1                                                                                    
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000ac8   52e5     MOVF      0xe5,0x1,0x0   }//end CDCTxService                                                              E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
000aca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000acc   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000ace   ffd9                                                                                                               
000ad0   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           #endif //USB_USE_CDC                                                             E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                                                                                                            E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /** EOF cdc.c ****************************************************************/  E:\usb20\sinegen1\system\usb\class\cdc\cdc.c
                                           /*********************************************************************           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                Microchip USB C18 Firmware Version 1.0                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *********************************************************************           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * FileName:        usb9.c                                                       E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Dependencies:    See INCLUDES section below                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Processor:       PIC18                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Compiler:        C18 2.30.01+                                                 E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Company:         Microchip Technology, Inc.                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Software License Agreement                                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * The software supplied herewith by Microchip Technology Incorporated           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * (the 鼎ompany・ for its PICmicroｮ Microcontroller is intended and             E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * supplied to you, the Company痴 customer, for use solely and                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * software is owned by the Company and/or its supplier, and is                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * protected under applicable copyright laws. All rights are reserved.           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Any use in violation of the foregoing restrictions may subject the            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * user to criminal sanctions under applicable laws, as well as to               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * civil liability for the breach of the terms and conditions of this            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * license.                                                                      E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * THIS SOFTWARE IS PROVIDED IN AN 鄭S IS・CONDITION. NO WARRANTIES,             E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Author               Date        Comment                                      E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            ********************************************************************/           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /** I N C L U D E S **********************************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           #include <p18cxxx.h>                                                             E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           #include "system\typedefs.h"                                                     E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           #include "system\usb\usb.h"                                                      E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           #include "io_cfg.h"                     // Required for self_power status        E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /** V A R I A B L E S ********************************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           #pragma udata                                                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void);                                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void);                                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void);                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void);                                              E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /** D E C L A R A T I O N S **************************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           #pragma code                                                                     E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Function:        void USBCheckStdRequest(void)                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Overview:        This routine checks the setup data packet to see if it       E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                  knows how to handle it                                       E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           void USBCheckStdRequest(void)                                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
000ad2   0104     MOVLB     0x4                if(SetupPkt.RequestType != STANDARD) return;                                 E:\usb20\sinegen1\system\usb\usb9\usb9.c
000ad4   5120     MOVF      0x20,0x0,0x1                                                                                    
000ad6   0b60     ANDLW     0x60                                                                                            
000ad8   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000ada   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000adc   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000ade   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000ae0   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000ae2   0900     IORLW     0x0                                                                                             
000ae4   e001     BZ        0xae8                                                                                           
000ae6   d055     BRA       0xb92                                                                                           
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000ae8   5121     MOVF      0x21,0x0,0x1       switch(SetupPkt.bRequest)                                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000aea   0a07     XORLW     0x7                                                                                             
000aec   e051     BZ        0xb90                                                                                           
000aee   0a0b     XORLW     0xb                                                                                             
000af0   e04f     BZ        0xb90                                                                                           
000af2   0a07     XORLW     0x7                                                                                             
000af4   e040     BZ        0xb76                                                                                           
000af6   0a01     XORLW     0x1                                                                                             
000af8   e02c     BZ        0xb52                                                                                           
000afa   0a0b     XORLW     0xb                                                                                             
000afc   e028     BZ        0xb4e                                                                                           
000afe   0a02     XORLW     0x2                                                                                             
000b00   e026     BZ        0xb4e                                                                                           
000b02   0a03     XORLW     0x3                                                                                             
000b04   e022     BZ        0xb4a                                                                                           
000b06   0a08     XORLW     0x8                                                                                             
000b08   e012     BZ        0xb2e                                                                                           
000b0a   0a01     XORLW     0x1                                                                                             
000b0c   e00e     BZ        0xb2a                                                                                           
000b0e   0a0f     XORLW     0xf                                                                                             
000b10   e00a     BZ        0xb26                                                                                           
000b12   0a03     XORLW     0x3                                                                                             
000b14   e001     BZ        0xb18                                                                                           
000b16   d03c     BRA       0xb90                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case SET_ADR:                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b18   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b1a   0e01     MOVLW     0x1                                                                                             
000b1c   6f4e     MOVWF     0x4e,0x1                                                                                        
000b1e   0100     MOVLB     0x0                        usb_device_state = ADR_PENDING_STATE;       // Update state only     E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b20   0e04     MOVLW     0x4                                                                                             
000b22   6ffb     MOVWF     0xfb,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b24   d036     BRA       0xb92                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case GET_DSC:                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b26   d836     RCALL     0xb94                      USBStdGetDscHandler();                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b28   d034     BRA       0xb92                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case SET_CFG:                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b2a   d890     RCALL     0xc4c                      USBStdSetCfgHandler();                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b2c   d032     BRA       0xb92                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case GET_CFG:                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b2e   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b30   0e01     MOVLW     0x1                                                                                             
000b32   6f4e     MOVWF     0x4e,0x1                                                                                        
000b34   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b36   0efd     MOVLW     0xfd                                                                                            
000b38   6f4f     MOVWF     0x4f,0x1                                                                                        
000b3a   0e00     MOVLW     0x0                                                                                             
000b3c   6f50     MOVWF     0x50,0x1                                                                                        
000b3e   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b40   93fc     BCF       0xfc,0x1,0x1                                                                                    
000b42   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b44   0e01     MOVLW     0x1                                                                                             
000b46   6f53     MOVWF     0x53,0x1                                                                                        
000b48   d024     BRA       0xb92                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case GET_STATUS:                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b4a   d8a8     RCALL     0xc9c                      USBStdGetStatusHandler();                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b4c   d022     BRA       0xb92                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case CLR_FEATURE:                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case SET_FEATURE:                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b4e   d8f4     RCALL     0xd38                      USBStdFeatureReqHandler();                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b50   d020     BRA       0xb92                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case GET_INTF:                                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b52   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b54   0e01     MOVLW     0x1                                                                                             
000b56   6f4e     MOVWF     0x4e,0x1                                                                                        
000b58   0104     MOVLB     0x4                        pSrc.bRam = (byte*)&usb_alt_intf+SetupPkt.bIntfID;  // Set source    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b5a   5124     MOVF      0x24,0x0,0x1                                                                                    
000b5c   0101     MOVLB     0x1                                                                                             
000b5e   6f4f     MOVWF     0x4f,0x1                                                                                        
000b60   6b50     CLRF      0x50,0x1                                                                                        
000b62   0efe     MOVLW     0xfe                                                                                            
000b64   274f     ADDWF     0x4f,0x1,0x1                                                                                    
000b66   0e00     MOVLW     0x0                                                                                             
000b68   2350     ADDWFC    0x50,0x1,0x1                                                                                    
000b6a   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b6c   93fc     BCF       0xfc,0x1,0x1                                                                                    
000b6e   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b70   0e01     MOVLW     0x1                                                                                             
000b72   6f53     MOVWF     0x53,0x1                                                                                        
000b74   d00e     BRA       0xb92                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case SET_INTF:                                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b76   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b78   0e01     MOVLW     0x1                                                                                             
000b7a   6f4e     MOVWF     0x4e,0x1                                                                                        
000b7c   0104     MOVLB     0x4                        usb_alt_intf[SetupPkt.bIntfID] = SetupPkt.bAltID;                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b7e   5124     MOVF      0x24,0x0,0x1                                                                                    
000b80   6aea     CLRF      0xea,0x0                                                                                        
000b82   0ffe     ADDLW     0xfe                                                                                            
000b84   6ee9     MOVWF     0xe9,0x0                                                                                        
000b86   0e00     MOVLW     0x0                                                                                             
000b88   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000b8a   c422     MOVFF     0x422,0xfef                                                                                     
000b8c   ffef                                                                                                               
000b8e   d001     BRA       0xb92                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case SET_DSC:                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case SYNCH_FRAME:                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   default:                                                                 E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b90   d000     BRA       0xb92                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                               }//end switch                                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b92   0012     RETURN    0x0            }//end USBCheckStdRequest                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetDscHandler(void)                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                  This routine should never have to be modified if the tables  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                  in usbdsc.c are declared correctly.                          E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void)                                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b94   0e80     MOVLW     0x80               if(SetupPkt.bmRequestType == 0x80)                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b96   0104     MOVLB     0x4                                                                                             
000b98   5d20     SUBWF     0x20,0x0,0x1                                                                                    
000b9a   e157     BNZ       0xc4a                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b9c   5123     MOVF      0x23,0x0,0x1           switch(SetupPkt.bDscType)                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
000b9e   0a03     XORLW     0x3                                                                                             
000ba0   e034     BZ        0xc0a                                                                                           
000ba2   0a01     XORLW     0x1                                                                                             
000ba4   e010     BZ        0xbc6                                                                                           
000ba6   0a03     XORLW     0x3                                                                                             
000ba8   e001     BZ        0xbac                                                                                           
000baa   d04d     BRA       0xc46                                                                                           
                                                   {                                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                       case DSC_DEV:                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000bac   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              E:\usb20\sinegen1\system\usb\usb9\usb9.c
000bae   0e01     MOVLW     0x1                                                                                             
000bb0   6f4e     MOVWF     0x4e,0x1                                                                                        
000bb2   0101     MOVLB     0x1                            pSrc.bRom = (rom byte*)&device_dsc;                              E:\usb20\sinegen1\system\usb\usb9\usb9.c
000bb4   0e74     MOVLW     0x74                                                                                            
000bb6   6f4f     MOVWF     0x4f,0x1                                                                                        
000bb8   0e16     MOVLW     0x16                                                                                            
000bba   6f50     MOVWF     0x50,0x1                                                                                        
000bbc   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);          // Set data count    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000bbe   0101     MOVLB     0x1                                                                                             
000bc0   6f53     MOVWF     0x53,0x1                                                                                        
000bc2   6b54     CLRF      0x54,0x1                                                                                        
000bc4   d040     BRA       0xc46                          break;                                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                       case DSC_CFG:                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000bc6   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              E:\usb20\sinegen1\system\usb\usb9\usb9.c
000bc8   0e01     MOVLW     0x1                                                                                             
000bca   6f4e     MOVWF     0x4e,0x1                                                                                        
000bcc   0104     MOVLB     0x4                            pSrc.bRom = *(USB_CD_Ptr+SetupPkt.bDscIndex);                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000bce   5122     MOVF      0x22,0x0,0x1                                                                                    
000bd0   6ef6     MOVWF     0xf6,0x0                                                                                        
000bd2   6af7     CLRF      0xf7,0x0                                                                                        
000bd4   90d8     BCF       0xd8,0x0,0x0                                                                                    
000bd6   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000bd8   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000bda   0e35     MOVLW     0x35                                                                                            
000bdc   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000bde   0e17     MOVLW     0x17                                                                                            
000be0   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000be2   0009     TBLRDPOSTINC                                                                                              
000be4   cff5     MOVFF     0xff5,0x14f                                                                                     
000be6   f14f                                                                                                               
000be8   000a     TBLRDPOSTDEC                                                                                              
000bea   cff5     MOVFF     0xff5,0x150                                                                                     
000bec   f150                                                                                                               
000bee   0e02     MOVLW     0x2                            wCount._word = *(pSrc.wRom+1);              // Set data count    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000bf0   0101     MOVLB     0x1                                                                                             
000bf2   6af7     CLRF      0xf7,0x0                                                                                        
000bf4   254f     ADDWF     0x4f,0x0,0x1                                                                                    
000bf6   6ef6     MOVWF     0xf6,0x0                                                                                        
000bf8   5150     MOVF      0x50,0x0,0x1                                                                                    
000bfa   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000bfc   0009     TBLRDPOSTINC                                                                                              
000bfe   cff5     MOVFF     0xff5,0x153                                                                                     
000c00   f153                                                                                                               
000c02   000a     TBLRDPOSTDEC                                                                                              
000c04   cff5     MOVFF     0xff5,0x154                                                                                     
000c06   f154                                                                                                               
000c08   d01e     BRA       0xc46                          break;                                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                       case DSC_STR:                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c0a   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c0c   0e01     MOVLW     0x1                                                                                             
000c0e   6f4e     MOVWF     0x4e,0x1                                                                                        
000c10   0104     MOVLB     0x4                            pSrc.bRom = *(USB_SD_Ptr+SetupPkt.bDscIndex);                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c12   5122     MOVF      0x22,0x0,0x1                                                                                    
000c14   6ef6     MOVWF     0xf6,0x0                                                                                        
000c16   6af7     CLRF      0xf7,0x0                                                                                        
000c18   90d8     BCF       0xd8,0x0,0x0                                                                                    
000c1a   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000c1c   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000c1e   0e39     MOVLW     0x39                                                                                            
000c20   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000c22   0e17     MOVLW     0x17                                                                                            
000c24   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000c26   0009     TBLRDPOSTINC                                                                                              
000c28   cff5     MOVFF     0xff5,0x14f                                                                                     
000c2a   f14f                                                                                                               
000c2c   000a     TBLRDPOSTDEC                                                                                              
000c2e   cff5     MOVFF     0xff5,0x150                                                                                     
000c30   f150                                                                                                               
000c32   c14f     MOVFF     0x14f,0xff6                    wCount._word = *pSrc.bRom;                  // Set data count    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c34   fff6                                                                                                               
000c36   c150     MOVFF     0x150,0xff7                                                                                     
000c38   fff7                                                                                                               
000c3a   0008     TBLRD                                                                                                     
000c3c   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000c3e   0101     MOVLB     0x1                                                                                             
000c40   6f53     MOVWF     0x53,0x1                                                                                        
000c42   6b54     CLRF      0x54,0x1                                                                                        
000c44   d000     BRA       0xc46                          break;                                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   }//end switch                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c46   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _ROM;                       // Set memory type   E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c48   83fc     BSF       0xfc,0x1,0x1                                                                                    
                                               }//end if                                                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c4a   0012     RETURN    0x0            }//end USBStdGetDscHandler                                                       E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Function:        void USBStdSetCfgHandler(void)                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Overview:        This routine first disables all endpoints by clearing        E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                  UEP registers. It then configures (initializes) endpoints    E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                  specified in the modifiable section.                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void)                                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c4c   0101     MOVLB     0x1                ctrl_trf_session_owner = MUID_USB9;                                          E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c4e   0e01     MOVLW     0x1                                                                                             
000c50   6f4e     MOVWF     0x4e,0x1                                                                                        
000c52   0e0f     MOVLW     0xf                mDisableEP1to15();                          // See usbdrv.h                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c54   6ee6     MOVWF     0xe6,0x0                                                                                        
000c56   0e71     MOVLW     0x71                                                                                            
000c58   6ee6     MOVWF     0xe6,0x0                                                                                        
000c5a   0e0f     MOVLW     0xf                                                                                             
000c5c   6ee6     MOVWF     0xe6,0x0                                                                                        
000c5e   ec25     CALL      0x164a,0x0                                                                                      
000c60   f00b                                                                                                               
000c62   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c64   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c66   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c68   0e01     MOVLW     0x1                ClearArray((byte*)&usb_alt_intf,MAX_NUM_INT);                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c6a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c6c   0efe     MOVLW     0xfe                                                                                            
000c6e   6ee6     MOVWF     0xe6,0x0                                                                                        
000c70   0e00     MOVLW     0x0                                                                                             
000c72   6ee6     MOVWF     0xe6,0x0                                                                                        
000c74   ec25     CALL      0x164a,0x0                                                                                      
000c76   f00b                                                                                                               
000c78   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c7a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c7c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c7e   c422     MOVFF     0x422,0xfd         usb_active_cfg = SetupPkt.bCfgValue;                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c80   f0fd                                                                                                               
000c82   0104     MOVLB     0x4                if(SetupPkt.bCfgValue == 0)                                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c84   5122     MOVF      0x22,0x0,0x1                                                                                    
000c86   e104     BNZ       0xc90                                                                                           
000c88   0100     MOVLB     0x0                    usb_device_state = ADDRESS_STATE;                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c8a   0e05     MOVLW     0x5                                                                                             
000c8c   6ffb     MOVWF     0xfb,0x1                                                                                        
000c8e   d005     BRA       0xc9a              else                                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                               {                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c90   0100     MOVLB     0x0                    usb_device_state = CONFIGURED_STATE;                                     E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c92   0e06     MOVLW     0x6                                                                                             
000c94   6ffb     MOVWF     0xfb,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   /* Modifiable Section */                                                 E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   #if defined(USB_USE_CDC)                // See autofiles\usbcfg.h        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c96   ec0e     CALL      0x81c,0x0              CDCInitEP();                                                             E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c98   f004                                                                                                               
                                                   #endif                                                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   /* End modifiable section */                                             E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                               }//end if(SetupPkt.bcfgValue == 0)                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c9a   0012     RETURN    0x0            }//end USBStdSetCfgHandler                                                       E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetStatusHandler(void)                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_STATUS request         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void)                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c9c   0104     MOVLB     0x4                CtrlTrfData._byte0 = 0;                         // Initialize content        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000c9e   6b28     CLRF      0x28,0x1                                                                                        
000ca0   6b29     CLRF      0x29,0x1           CtrlTrfData._byte1 = 0;                                                      E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000ca2   0104     MOVLB     0x4                switch(SetupPkt.Recipient)                                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
000ca4   5120     MOVF      0x20,0x0,0x1                                                                                    
000ca6   0b1f     ANDLW     0x1f                                                                                            
000ca8   0a02     XORLW     0x2                                                                                             
000caa   e014     BZ        0xcd4                                                                                           
000cac   0a03     XORLW     0x3                                                                                             
000cae   e00e     BZ        0xccc                                                                                           
000cb0   0a01     XORLW     0x1                                                                                             
000cb2   e001     BZ        0xcb6                                                                                           
000cb4   d033     BRA       0xd1c                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case RCPT_DEV:                                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cb6   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cb8   0e01     MOVLW     0x1                                                                                             
000cba   6f4e     MOVWF     0x4e,0x1                                                                                        
                                                       /*                                                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                        *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled     E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                        */                                                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                       if(self_power == 1)                     // self_power defined in io_cfg.h E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cbc   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b000000001;    // Set bit0                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cbe   8128     BSF       0x28,0x0,0x1                                                                                    
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cc0   0100     MOVLB     0x0                        if(usb_stat.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cc2   a1fc     BTFSS     0xfc,0x0,0x1                                                                                    
000cc4   d002     BRA       0xcca                                                                                           
000cc6   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b00000010;     // Set bit1                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cc8   8328     BSF       0x28,0x1,0x1                                                                                    
000cca   d028     BRA       0xd1c                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case RCPT_INTF:                                                          E:\usb20\sinegen1\system\usb\usb9\usb9.c
000ccc   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;     // No data to update         E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cce   0e01     MOVLW     0x1                                                                                             
000cd0   6f4e     MOVWF     0x4e,0x1                                                                                        
000cd2   d024     BRA       0xd1c                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   case RCPT_EP:                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cd4   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cd6   0e01     MOVLW     0x1                                                                                             
000cd8   6f4e     MOVWF     0x4e,0x1                                                                                        
                                                       /*                                                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Halt Status [0] Not Halted [1] Halted               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                        */                                                                  E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cda   0104     MOVLB     0x4                        pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);     E:\usb20\sinegen1\system\usb\usb9\usb9.c
000cdc   5124     MOVF      0x24,0x0,0x1                                                                                    
000cde   0b0f     ANDLW     0xf                                                                                             
000ce0   0d08     MULLW     0x8                                                                                             
000ce2   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000ce4   6a15     CLRF      0x15,0x0                                                                                        
000ce6   0f00     ADDLW     0x0                                                                                             
000ce8   6e14     MOVWF     0x14,0x0                                                                                        
000cea   0e04     MOVLW     0x4                                                                                             
000cec   2215     ADDWFC    0x15,0x1,0x0                                                                                    
000cee   5124     MOVF      0x24,0x0,0x1                                                                                    
000cf0   0b80     ANDLW     0x80                                                                                            
000cf2   e001     BZ        0xcf6                                                                                           
000cf4   0e01     MOVLW     0x1                                                                                             
000cf6   0d04     MULLW     0x4                                                                                             
000cf8   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000cfa   0101     MOVLB     0x1                                                                                             
000cfc   2414     ADDWF     0x14,0x0,0x0                                                                                    
000cfe   6f51     MOVWF     0x51,0x1                                                                                        
000d00   0e00     MOVLW     0x0                                                                                             
000d02   2015     ADDWFC    0x15,0x0,0x0                                                                                    
000d04   6f52     MOVWF     0x52,0x1                                                                                        
000d06   c151     MOVFF     0x151,0xfe9                if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask             E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d08   ffe9                                                                                                               
000d0a   c152     MOVFF     0x152,0xfea                                                                                     
000d0c   ffea                                                                                                               
000d0e   50ef     MOVF      0xef,0x0,0x0                                                                                    
000d10   0b04     ANDLW     0x4                                                                                             
000d12   e003     BZ        0xd1a                                                                                           
000d14   0104     MOVLB     0x4                            CtrlTrfData._byte0=0x01;// Set bit0                              E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d16   0e01     MOVLW     0x1                                                                                             
000d18   6f28     MOVWF     0x28,0x1                                                                                        
000d1a   d000     BRA       0xd1c                      break;                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                               }//end switch                                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d1c   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_USB9)                                      E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d1e   054e     DECF      0x4e,0x0,0x1                                                                                    
000d20   e10a     BNZ       0xd36                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d22   0101     MOVLB     0x1                    pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source                E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d24   0e28     MOVLW     0x28                                                                                            
000d26   6f4f     MOVWF     0x4f,0x1                                                                                        
000d28   0e04     MOVLW     0x4                                                                                             
000d2a   6f50     MOVWF     0x50,0x1                                                                                        
000d2c   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _RAM;               // Set memory type           E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d2e   93fc     BCF       0xfc,0x1,0x1                                                                                    
000d30   0101     MOVLB     0x1                    LSB(wCount) = 2;                            // Set data count            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d32   0e02     MOVLW     0x2                                                                                             
000d34   6f53     MOVWF     0x53,0x1                                                                                        
                                               }//end if(...)                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d36   0012     RETURN    0x0            }//end USBStdGetStatusHandler                                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                  requests                                                     E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void)                                               E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d38   0104     MOVLB     0x4                if((SetupPkt.bFeature == DEVICE_REMOTE_WAKEUP)&&                             E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d3a   0522     DECF      0x22,0x0,0x1                                                                                    
000d3c   e110     BNZ       0xd5e                 (SetupPkt.Recipient == RCPT_DEV))                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d3e   5120     MOVF      0x20,0x0,0x1                                                                                    
000d40   0b1f     ANDLW     0x1f                                                                                            
000d42   0900     IORLW     0x0                                                                                             
000d44   e10c     BNZ       0xd5e                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d46   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d48   0e01     MOVLW     0x1                                                                                             
000d4a   6f4e     MOVWF     0x4e,0x1                                                                                        
000d4c   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d4e   0104     MOVLB     0x4                                                                                             
000d50   5d21     SUBWF     0x21,0x0,0x1                                                                                    
000d52   e103     BNZ       0xd5a                                                                                           
000d54   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 1;                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d56   81fc     BSF       0xfc,0x0,0x1                                                                                    
000d58   d002     BRA       0xd5e                  else                                                                     E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d5a   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 0;                                           E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d5c   91fc     BCF       0xfc,0x0,0x1                                                                                    
                                               }//end if                                                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d5e   0104     MOVLB     0x4                if((SetupPkt.bFeature == ENDPOINT_HALT)&&                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d60   5122     MOVF      0x22,0x0,0x1                                                                                    
000d62   e13a     BNZ       0xdd8                 (SetupPkt.Recipient == RCPT_EP)&&                                         E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d64   5120     MOVF      0x20,0x0,0x1                                                                                    
000d66   0b1f     ANDLW     0x1f                                                                                            
000d68   0802     SUBLW     0x2                                                                                             
000d6a   e136     BNZ       0xdd8                                                                                           
000d6c   5124     MOVF      0x24,0x0,0x1          (SetupPkt.EPNum != 0))                                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d6e   0b0f     ANDLW     0xf                                                                                             
000d70   0900     IORLW     0x0                                                                                             
000d72   e032     BZ        0xdd8                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d74   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d76   0e01     MOVLW     0x1                                                                                             
000d78   6f4e     MOVWF     0x4e,0x1                                                                                        
                                                   /* Must do address calculation here */                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d7a   0104     MOVLB     0x4                    pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);         E:\usb20\sinegen1\system\usb\usb9\usb9.c
000d7c   5124     MOVF      0x24,0x0,0x1                                                                                    
000d7e   0b0f     ANDLW     0xf                                                                                             
000d80   0d08     MULLW     0x8                                                                                             
000d82   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000d84   6a15     CLRF      0x15,0x0                                                                                        
000d86   0f00     ADDLW     0x0                                                                                             
000d88   6e14     MOVWF     0x14,0x0                                                                                        
000d8a   0e04     MOVLW     0x4                                                                                             
000d8c   2215     ADDWFC    0x15,0x1,0x0                                                                                    
000d8e   5124     MOVF      0x24,0x0,0x1                                                                                    
000d90   0b80     ANDLW     0x80                                                                                            
000d92   e001     BZ        0xd96                                                                                           
000d94   0e01     MOVLW     0x1                                                                                             
000d96   0d04     MULLW     0x4                                                                                             
000d98   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000d9a   0101     MOVLB     0x1                                                                                             
000d9c   2414     ADDWF     0x14,0x0,0x0                                                                                    
000d9e   6f51     MOVWF     0x51,0x1                                                                                        
000da0   0e00     MOVLW     0x0                                                                                             
000da2   2015     ADDWFC    0x15,0x0,0x0                                                                                    
000da4   6f52     MOVWF     0x52,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
000da6   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     E:\usb20\sinegen1\system\usb\usb9\usb9.c
000da8   0104     MOVLB     0x4                                                                                             
000daa   5d21     SUBWF     0x21,0x0,0x1                                                                                    
000dac   e107     BNZ       0xdbc                                                                                           
000dae   0e84     MOVLW     0x84                       *pDst.bRam = _USIE|_BSTALL;                                          E:\usb20\sinegen1\system\usb\usb9\usb9.c
000db0   c151     MOVFF     0x151,0xfe9                                                                                     
000db2   ffe9                                                                                                               
000db4   c152     MOVFF     0x152,0xfea                                                                                     
000db6   ffea                                                                                                               
000db8   6eef     MOVWF     0xef,0x0                                                                                        
000dba   d00e     BRA       0xdd8                  else                                                                     E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                   {                                                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000dbc   af24     BTFSS     0x24,0x7,0x1               if(SetupPkt.EPDir == 1) // IN                                        E:\usb20\sinegen1\system\usb\usb9\usb9.c
000dbe   d006     BRA       0xdcc                                                                                           
000dc0   c151     MOVFF     0x151,0xfe9                    *pDst.bRam = _UCPU;                                              E:\usb20\sinegen1\system\usb\usb9\usb9.c
000dc2   ffe9                                                                                                               
000dc4   c152     MOVFF     0x152,0xfea                                                                                     
000dc6   ffea                                                                                                               
000dc8   6aef     CLRF      0xef,0x0                                                                                        
000dca   d006     BRA       0xdd8                      else                                                                 E:\usb20\sinegen1\system\usb\usb9\usb9.c
000dcc   0e88     MOVLW     0x88                           *pDst.bRam = _USIE|_DAT0|_DTSEN;                                 E:\usb20\sinegen1\system\usb\usb9\usb9.c
000dce   c151     MOVFF     0x151,0xfe9                                                                                     
000dd0   ffe9                                                                                                               
000dd2   c152     MOVFF     0x152,0xfea                                                                                     
000dd4   ffea                                                                                                               
000dd6   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end if                                                                E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                               }//end if                                                                    E:\usb20\sinegen1\system\usb\usb9\usb9.c
000dd8   0012     RETURN    0x0            }//end USBStdFeatureReqHandler                                                   E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /** EOF usb9.c ***************************************************************/  E:\usb20\sinegen1\system\usb\usb9\usb9.c
                                           /*********************************************************************           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                Microchip USB C18 Firmware Version 1.0                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *********************************************************************           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * FileName:        usbctrltrf.c                                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Dependencies:    See INCLUDES section below                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Processor:       PIC18                                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Compiler:        C18 2.30.01+                                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Company:         Microchip Technology, Inc.                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Software License Agreement                                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * The software supplied herewith by Microchip Technology Incorporated           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * (the 鼎ompany) for its PICmicroｮ Microcontroller is intended and             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * supplied to you, the Company痴 customer, for use solely and                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * software is owned by the Company and/or its supplier, and is                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * protected under applicable copyright laws. All rights are reserved.           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Any use in violation of the foregoing restrictions may subject the            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * user to criminal sanctions under applicable laws, as well as to               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * civil liability for the breach of the terms and conditions of this            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * license.                                                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * THIS SOFTWARE IS PROVIDED IN AN 鄭S IS CONDITION. NO WARRANTIES,             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Author               Date        Comment                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            ********************************************************************/           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           #include <p18cxxx.h>                                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\typedefs.h"                                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\usb\usb.h"                                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /** V A R I A B L E S ********************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma udata                                                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_state;                // Control Transfer State                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pSrc;                       // Data source pointer                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pDst;                       // Data destination pointer                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           WORD wCount;                        // Data counter                              E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void);                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void);                                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void);                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /** D E C L A R A T I O N S **************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma code                                                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPService(void)                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it knows how to service and services them:                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. EP0 SETUP                                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. EP0 OUT                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. EP0 IN                                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPService(void)                                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000dda   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ddc   e002     BZ        0xde2                                                                                           
000dde   0e00     MOVLW     0x0                                                                                             
000de0   d001     BRA       0xde4                                                                                           
000de2   0e01     MOVLW     0x1                                                                                             
000de4   0900     IORLW     0x0                                                                                             
000de6   e00b     BZ        0xdfe                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000de8   0104     MOVLB     0x4                    if(ep0Bo.Stat.PID == SETUP_TOKEN)           // EP0 SETUP                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000dea   5100     MOVF      0x0,0x0,0x1                                                                                     
000dec   0b3c     ANDLW     0x3c                                                                                            
000dee   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000df0   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000df2   080d     SUBLW     0xd                                                                                             
000df4   e102     BNZ       0xdfa                                                                                           
000df6   d80c     RCALL     0xe10                      USBCtrlTrfSetupHandler();                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000df8   d001     BRA       0xdfc                  else                                        // EP0 OUT                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000dfa   d840     RCALL     0xe7c                      USBCtrlTrfOutHandler();                                              E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000dfc   d008     BRA       0xe0e              else if(USTAT == EP00_IN)                       // EP0 IN                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000dfe   506c     MOVF      0x6c,0x0,0x0                                                                                    
000e00   e002     BZ        0xe06                                                                                           
000e02   0e00     MOVLW     0x0                                                                                             
000e04   d001     BRA       0xe08                                                                                           
000e06   0e01     MOVLW     0x1                                                                                             
000e08   0904     IORLW     0x4                                                                                             
000e0a   e001     BZ        0xe0e                                                                                           
000e0c   d847     RCALL     0xe9c                  USBCtrlTrfInHandler();                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e0e   0012     RETURN    0x0            }//end USBCtrlEPService                                                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. It initializes the control transfer state machine.        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. It calls on each of the module that may know how to       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     service the Setup Request from the host.                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     As new classes are added, ClassReqHandler table in        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     usbdsc.c should be updated to call all available          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     class handlers.                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. Once each of the modules has had a chance to check if     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     it is responsible for servicing the request, stage 3      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     then checks direction of the transfer to determine how    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     to prepare EP0 for the control transfer.                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Microchip USB Firmware has three different states for        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  the control transfer state machine:                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. WAIT_SETUP                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. CTRL_TRF_TX                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. CTRL_TRF_RX                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Refer to firmware manual to find out how one state           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  is transitioned to another.                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  A Control Transfer is composed of many USB transactions.     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  When transferring data over multiple transactions,           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it is important to keep track of data source, data           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  destination, and data count. These three parameters are      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  note if the data source is from ROM or RAM.                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e10   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfSetupHandler(void)                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e12   ffe6                                                                                                               
000e14   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000e16   ffd9                                                                                                               
000e18   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               byte i;                                                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 1 */                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e1a   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;                                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e1c   6b4d     CLRF      0x4d,0x1                                                                                        
000e1e   6b4e     CLRF      0x4e,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e20   6b53     CLRF      0x53,0x1           wCount._word = 0;                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e22   6b54     CLRF      0x54,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 2 */                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e24   ec69     CALL      0xad2,0x0          USBCheckStdRequest();                   // See system\usb9\usb9.c            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e26   f005                                                                                                               
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e28   6adf     CLRF      0xdf,0x0           for(i=0;i < (sizeof(ClassReqHandler)/sizeof(pFunc));i++)                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e2a   50df     MOVF      0xdf,0x0,0x0                                                                                    
000e2c   6e14     MOVWF     0x14,0x0                                                                                        
000e2e   6a15     CLRF      0x15,0x0                                                                                        
000e30   0e01     MOVLW     0x1                                                                                             
000e32   5c14     SUBWF     0x14,0x0,0x0                                                                                    
000e34   0e00     MOVLW     0x0                                                                                             
000e36   5815     SUBWFB    0x15,0x0,0x0                                                                                    
000e38   e21b     BC        0xe70                                                                                           
000e6c   2adf     INCF      0xdf,0x1,0x0                                                                                    
000e6e   d7dd     BRA       0xe2a                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e3a   0101     MOVLB     0x1                    if(ctrl_trf_session_owner != MUID_NULL)break;                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e3c   514e     MOVF      0x4e,0x0,0x1                                                                                    
000e3e   e001     BZ        0xe42                                                                                           
000e40   d017     BRA       0xe70                                                                                           
000e42   6af7     CLRF      0xf7,0x0               ClassReqHandler[i]();               // See autofiles\usbdsc.c            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e44   34df     RLCF      0xdf,0x0,0x0                                                                                    
000e46   0bfe     ANDLW     0xfe                                                                                            
000e48   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000e4a   6ef6     MOVWF     0xf6,0x0                                                                                        
000e4c   0e3f     MOVLW     0x3f                                                                                            
000e4e   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000e50   0e17     MOVLW     0x17                                                                                            
000e52   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000e54   0009     TBLRDPOSTINC                                                                                              
000e56   cff5     MOVFF     0xff5,0x14                                                                                      
000e58   f014                                                                                                               
000e5a   0008     TBLRD                                                                                                     
000e5c   cff5     MOVFF     0xff5,0x15                                                                                      
000e5e   f015                                                                                                               
000e60   d004     BRA       0xe6a                                                                                           
000e62   c015     MOVFF     0x15,0xffa                                                                                      
000e64   fffa                                                                                                               
000e66   5014     MOVF      0x14,0x0,0x0                                                                                    
000e68   6ef9     MOVWF     0xf9,0x0                                                                                        
000e6a   dffb     RCALL     0xe62                                                                                           
                                               }//end while                                                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 3 */                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e70   d8e1     RCALL     0x1034             USBCtrlEPServiceComplete();                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e72   52e5     MOVF      0xe5,0x1,0x0   }//end USBCtrlTrfSetupHandler                                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e74   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e76   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000e78   ffd9                                                                                                               
000e7a   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an OUT transaction according to         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Note that if the the control transfer was from               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  host to device, the session owner should be notified         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  at the end of each OUT transaction to service the            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  received data.                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void)                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e7c   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e7e   0101     MOVLB     0x1                                                                                             
000e80   5d4d     SUBWF     0x4d,0x0,0x1                                                                                    
000e82   e10a     BNZ       0xe98                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e84   d898     RCALL     0xfb6                  USBCtrlTrfRxService();                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Don't have to worry about overwriting _KEEP bit                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                    * because if _KEEP was set, TRNIF would not have been                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                    * generated in the first place.                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e86   0104     MOVLB     0x4                    if(ep0Bo.Stat.DTS == 0)                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e88   bd00     BTFSC     0x0,0x6,0x1                                                                                     
000e8a   d003     BRA       0xe92                                                                                           
000e8c   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e8e   6f00     MOVWF     0x0,0x1                                                                                         
000e90   d002     BRA       0xe96                  else                                                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e92   0e88     MOVLW     0x88                       ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e94   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e96   d001     BRA       0xe9a              else    // CTRL_TRF_TX                                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e98   d913     RCALL     0x10c0                 USBPrepareForNextSetupTrf();                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e9a   0012     RETURN    0x0            }//end USBCtrlTrfOutHandler                                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an IN transaction according to          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            A Set Address Request must not change the acutal address     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  of the device until the completion of the control            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer. The end of the control transfer for Set Address    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Request is an IN transaction. Therefore it is necessary      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  to service this unique situation when the condition is       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb9.h and its function is to specifically service this      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  event.                                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void)                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e9c   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000e9e   0100     MOVLB     0x0                                                                                             
000ea0   5dfb     SUBWF     0xfb,0x0,0x1                                                                                    
000ea2   e10a     BNZ       0xeb8                                                                                           
000ea4   c422     MOVFF     0x422,0xf6e                                                                                     
000ea6   ff6e                                                                                                               
000ea8   506e     MOVF      0x6e,0x0,0x0                                                                                    
000eaa   0800     SUBLW     0x0                                                                                             
000eac   e203     BC        0xeb4                                                                                           
000eae   0e05     MOVLW     0x5                                                                                             
000eb0   6ffb     MOVWF     0xfb,0x1                                                                                        
000eb2   d002     BRA       0xeb8                                                                                           
000eb4   0e03     MOVLW     0x3                                                                                             
000eb6   6ffb     MOVWF     0xfb,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000eb8   0101     MOVLB     0x1                if(ctrl_trf_state == CTRL_TRF_TX)                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000eba   054d     DECF      0x4d,0x0,0x1                                                                                    
000ebc   e10a     BNZ       0xed2                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ebe   d80b     RCALL     0xed6                  USBCtrlTrfTxService();                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ec0   0104     MOVLB     0x4                    if(ep0Bi.Stat.DTS == 0)                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ec2   bd04     BTFSC     0x4,0x6,0x1                                                                                     
000ec4   d003     BRA       0xecc                                                                                           
000ec6   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ec8   6f04     MOVWF     0x4,0x1                                                                                         
000eca   d002     BRA       0xed0                  else                                                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ecc   0e88     MOVLW     0x88                       ep0Bi.Stat._byte = _USIE|_DAT0|_DTSEN;                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ece   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ed0   d001     BRA       0xed4              else // CTRL_TRF_RX                                                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ed2   d8f6     RCALL     0x10c0                 USBPrepareForNextSetupTrf();                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ed4   0012     RETURN    0x0            }//end USBCtrlTrfInHandler                                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfTxService(void)                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine should be called from only two places.          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer over multiple USB transactions.                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            This routine works with isochronous endpoint larger than     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  256 bytes and is shown here as an example of how to deal     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  be larger than 64 bytes.                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ed6   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfTxService(void)                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ed8   ffe6                                                                                                               
000eda   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000edc   ffd9                                                                                                               
000ede   0e02     MOVLW     0x2                                                                                             
000ee0   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_send;                                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                * First, have to figure out how many byte of data to send.                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ee2   0101     MOVLB     0x1                if(wCount._word < EP0_BUFF_SIZE)                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ee4   0e08     MOVLW     0x8                                                                                             
000ee6   5d53     SUBWF     0x53,0x0,0x1                                                                                    
000ee8   0e00     MOVLW     0x0                                                                                             
000eea   5954     SUBWFB    0x54,0x0,0x1                                                                                    
000eec   e205     BC        0xef8                                                                                           
000eee   c153     MOVFF     0x153,0xfde            byte_to_send._word = wCount._word;                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ef0   ffde                                                                                                               
000ef2   c154     MOVFF     0x154,0xfdd                                                                                     
000ef4   ffdd                                                                                                               
000ef6   d003     BRA       0xefe              else                                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ef8   0e08     MOVLW     0x8                    byte_to_send._word = EP0_BUFF_SIZE;                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000efa   6ede     MOVWF     0xde,0x0                                                                                        
000efc   6add     CLRF      0xdd,0x0                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                * Next, load the number of bytes to send to BC9..0 in buffer descriptor     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000efe   0104     MOVLB     0x4                ep0Bi.Stat.BC9 = 0;                                                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f00   9304     BCF       0x4,0x1,0x1                                                                                     
000f02   9104     BCF       0x4,0x0,0x1        ep0Bi.Stat.BC8 = 0;                                                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f04   0e01     MOVLW     0x1                ep0Bi.Stat._byte |= MSB(byte_to_send);                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f06   50db     MOVF      0xdb,0x0,0x0                                                                                    
000f08   1304     IORWF     0x4,0x1,0x1                                                                                     
000f0a   cfdf     MOVFF     0xfdf,0x405        ep0Bi.Cnt = LSB(byte_to_send);                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f0c   f405                                                                                                               
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                * Subtract the number of bytes just about to be sent from the total.        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f0e   0e00     MOVLW     0x0                wCount._word = wCount._word - byte_to_send._word;                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f10   50db     MOVF      0xdb,0x0,0x0                                                                                    
000f12   0101     MOVLB     0x1                                                                                             
000f14   5f53     SUBWF     0x53,0x1,0x1                                                                                    
000f16   0e01     MOVLW     0x1                                                                                             
000f18   50db     MOVF      0xdb,0x0,0x0                                                                                    
000f1a   5b54     SUBWFB    0x54,0x1,0x1                                                                                    
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f1c   0e28     MOVLW     0x28               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f1e   6f51     MOVWF     0x51,0x1                                                                                        
000f20   0e04     MOVLW     0x4                                                                                             
000f22   6f52     MOVWF     0x52,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f24   0100     MOVLB     0x0                if(usb_stat.ctrl_trf_mem == _ROM)       // Determine type of memory source   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f26   a3fc     BTFSS     0xfc,0x1,0x1                                                                                    
000f28   d01e     BRA       0xf66                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f2a   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f2c   ffe9                                                                                                               
000f2e   cfda     MOVFF     0xfda,0xfea                                                                                     
000f30   ffea                                                                                                               
000f32   50ee     MOVF      0xee,0x0,0x0                                                                                    
000f34   10ed     IORWF     0xed,0x0,0x0                                                                                    
000f36   e016     BZ        0xf64                                                                                           
000f62   d7e3     BRA       0xf2a                                                                                           
                                                   {                                                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f38   c14f     MOVFF     0x14f,0xff6                *pDst.bRam = *pSrc.bRom;                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f3a   fff6                                                                                                               
000f3c   c150     MOVFF     0x150,0xff7                                                                                     
000f3e   fff7                                                                                                               
000f40   0008     TBLRD                                                                                                     
000f42   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000f44   c151     MOVFF     0x151,0xfe9                                                                                     
000f46   ffe9                                                                                                               
000f48   c152     MOVFF     0x152,0xfea                                                                                     
000f4a   ffea                                                                                                               
000f4c   6eef     MOVWF     0xef,0x0                                                                                        
000f4e   0101     MOVLB     0x1                        pDst.bRam++;                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f50   2b51     INCF      0x51,0x1,0x1                                                                                    
000f52   0e00     MOVLW     0x0                                                                                             
000f54   2352     ADDWFC    0x52,0x1,0x1                                                                                    
000f56   2b4f     INCF      0x4f,0x1,0x1               pSrc.bRom++;                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f58   2350     ADDWFC    0x50,0x1,0x1                                                                                    
000f5a   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f5c   0e01     MOVLW     0x1                                                                                             
000f5e   e201     BC        0xf62                                                                                           
000f60   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f64   d01c     BRA       0xf9e              else // RAM                                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f66   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f68   ffe9                                                                                                               
000f6a   cfda     MOVFF     0xfda,0xfea                                                                                     
000f6c   ffea                                                                                                               
000f6e   50ee     MOVF      0xee,0x0,0x0                                                                                    
000f70   10ed     IORWF     0xed,0x0,0x0                                                                                    
000f72   e015     BZ        0xf9e                                                                                           
000f9c   d7e4     BRA       0xf66                                                                                           
                                                   {                                                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f74   c14f     MOVFF     0x14f,0xfe9                *pDst.bRam = *pSrc.bRam;                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f76   ffe9                                                                                                               
000f78   c150     MOVFF     0x150,0xfea                                                                                     
000f7a   ffea                                                                                                               
000f7c   50ef     MOVF      0xef,0x0,0x0                                                                                    
000f7e   c151     MOVFF     0x151,0xfe9                                                                                     
000f80   ffe9                                                                                                               
000f82   c152     MOVFF     0x152,0xfea                                                                                     
000f84   ffea                                                                                                               
000f86   6eef     MOVWF     0xef,0x0                                                                                        
000f88   0101     MOVLB     0x1                        pDst.bRam++;                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f8a   2b51     INCF      0x51,0x1,0x1                                                                                    
000f8c   0e00     MOVLW     0x0                                                                                             
000f8e   2352     ADDWFC    0x52,0x1,0x1                                                                                    
000f90   2b4f     INCF      0x4f,0x1,0x1               pSrc.bRam++;                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f92   2350     ADDWFC    0x50,0x1,0x1                                                                                    
000f94   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f96   0e01     MOVLW     0x1                                                                                             
000f98   e201     BC        0xf9c                                                                                           
000f9a   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(usb_stat.ctrl_trf_mem == _ROM)                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000f9e   6ef5     MOVWF     0xf5,0x0       }//end USBCtrlTrfTxService                                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fa0   0e02     MOVLW     0x2                                                                                             
000fa2   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000fa4   e202     BC        0xfaa                                                                                           
000fa6   6ae1     CLRF      0xe1,0x0                                                                                        
000fa8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000faa   6ee1     MOVWF     0xe1,0x0                                                                                        
000fac   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000fae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000fb0   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000fb2   ffd9                                                                                                               
000fb4   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfRxService(void)                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pDst and wCount are setup properly.                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  pSrc is always &CtrlTrfData                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb_stat.ctrl_trf_mem is always _RAM.                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  wCount should be set to 0 at the start of each control       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer.                                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        *** This routine is only partially complete. Check for       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  new version of the firmware.                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fb6   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfRxService(void)                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fb8   ffe6                                                                                                               
000fba   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000fbc   ffd9                                                                                                               
000fbe   0e02     MOVLW     0x2                                                                                             
000fc0   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_read;                                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fc2   0e03     MOVLW     0x3                MSB(byte_to_read) = 0x03 & ep0Bo.Stat._byte;    // Filter out last 2 bits    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fc4   0104     MOVLB     0x4                                                                                             
000fc6   1500     ANDWF     0x0,0x0,0x1                                                                                     
000fc8   6ee7     MOVWF     0xe7,0x0                                                                                        
000fca   0e01     MOVLW     0x1                                                                                             
000fcc   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
000fce   ffdb                                                                                                               
000fd0   c401     MOVFF     0x401,0xfdf        LSB(byte_to_read) = ep0Bo.Cnt;                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fd2   ffdf                                                                                                               
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                * Accumulate total number of bytes read                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fd4   50de     MOVF      0xde,0x0,0x0       wCount._word = wCount._word + byte_to_read._word;                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fd6   0101     MOVLB     0x1                                                                                             
000fd8   2753     ADDWF     0x53,0x1,0x1                                                                                    
000fda   50dd     MOVF      0xdd,0x0,0x0                                                                                    
000fdc   2354     ADDWFC    0x54,0x1,0x1                                                                                    
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fde   0e28     MOVLW     0x28               pSrc.bRam = (byte*)&CtrlTrfData;                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fe0   6f4f     MOVWF     0x4f,0x1                                                                                        
000fe2   0e04     MOVLW     0x4                                                                                             
000fe4   6f50     MOVWF     0x50,0x1                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fe6   cfd9     MOVFF     0xfd9,0xfe9        while(byte_to_read._word)                                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000fe8   ffe9                                                                                                               
000fea   cfda     MOVFF     0xfda,0xfea                                                                                     
000fec   ffea                                                                                                               
000fee   50ee     MOVF      0xee,0x0,0x0                                                                                    
000ff0   10ed     IORWF     0xed,0x0,0x0                                                                                    
000ff2   e014     BZ        0x101c                                                                                          
00101a   d7e5     BRA       0xfe6                                                                                           
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ff4   c14f     MOVFF     0x14f,0xfe9            *pDst.bRam = *pSrc.bRam;                                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
000ff6   ffe9                                                                                                               
000ff8   c150     MOVFF     0x150,0xfea                                                                                     
000ffa   ffea                                                                                                               
000ffc   50ef     MOVF      0xef,0x0,0x0                                                                                    
000ffe   c151     MOVFF     0x151,0xfe9                                                                                     
001000   ffe9                                                                                                               
001002   c152     MOVFF     0x152,0xfea                                                                                     
001004   ffea                                                                                                               
001006   6eef     MOVWF     0xef,0x0                                                                                        
001008   2b51     INCF      0x51,0x1,0x1           pDst.bRam++;                                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00100a   0e00     MOVLW     0x0                                                                                             
00100c   2352     ADDWFC    0x52,0x1,0x1                                                                                    
00100e   2b4f     INCF      0x4f,0x1,0x1           pSrc.bRam++;                                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001010   2350     ADDWFC    0x50,0x1,0x1                                                                                    
001012   06df     DECF      0xdf,0x1,0x0           byte_to_read._word--;                                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001014   0e01     MOVLW     0x1                                                                                             
001016   e201     BC        0x101a                                                                                          
001018   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while(byte_to_read._word)                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00101c   6ef5     MOVWF     0xf5,0x0       }//end USBCtrlTrfRxService                                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00101e   0e02     MOVLW     0x2                                                                                             
001020   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001022   e202     BC        0x1028                                                                                          
001024   6ae1     CLRF      0xe1,0x0                                                                                        
001026   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001028   6ee1     MOVWF     0xe1,0x0                                                                                        
00102a   50f5     MOVF      0xf5,0x0,0x0                                                                                    
00102c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00102e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001030   ffd9                                                                                                               
001032   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a Setup Request. Its main task is to set the endpoint        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  controls appropriately for a given situation. See code       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  below.                                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  There are three main scenarios:                              E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a) There was no handler for the Request, in this case        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a STALL should be sent out.                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  b) The host has requested a read control transfer,           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     endpoints are required to be setup in a specific way.     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  c) The host has requested a write control transfer, or       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a control data stage is not required, endpoints are       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     required to be setup in a specific way.                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPServiceComplete(void)                                              E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001034   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_NULL)                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001036   514e     MOVF      0x4e,0x0,0x1                                                                                    
001038   e10c     BNZ       0x1052                                                                                          
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                    * If no one knows how to service this request then stall.               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00103a   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00103c   0e08     MOVLW     0x8                                                                                             
00103e   6f01     MOVWF     0x1,0x1                                                                                         
001040   0e20     MOVLW     0x20                   ep0Bo.ADR = (byte*)&SetupPkt;                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001042   6f02     MOVWF     0x2,0x1                                                                                         
001044   0e04     MOVLW     0x4                                                                                             
001046   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001048   0e84     MOVLW     0x84                   ep0Bo.Stat._byte = _USIE|_BSTALL;                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00104a   6f00     MOVWF     0x0,0x1                                                                                         
00104c   0104     MOVLB     0x4                    ep0Bi.Stat._byte = _USIE|_BSTALL;                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00104e   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001050   d035     BRA       0x10bc             else    // A module has claimed ownership of the control transfer session.   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001052   0104     MOVLB     0x4                    if(SetupPkt.DataDir == DEV_TO_HOST)                                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001054   af20     BTFSS     0x20,0x7,0x1                                                                                    
001056   d022     BRA       0x109c                                                                                          
                                                   {                                                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001058   0101     MOVLB     0x1                        if(SetupPkt.wLength < wCount._word)                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00105a   5153     MOVF      0x53,0x0,0x1                                                                                    
00105c   0104     MOVLB     0x4                                                                                             
00105e   5d26     SUBWF     0x26,0x0,0x1                                                                                    
001060   0101     MOVLB     0x1                                                                                             
001062   5154     MOVF      0x54,0x0,0x1                                                                                    
001064   0104     MOVLB     0x4                                                                                             
001066   5927     SUBWFB    0x27,0x0,0x1                                                                                    
001068   e204     BC        0x1072                                                                                          
00106a   c426     MOVFF     0x426,0x153                    wCount._word = SetupPkt.wLength;                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00106c   f153                                                                                                               
00106e   c427     MOVFF     0x427,0x154                                                                                     
001070   f154                                                                                                               
001072   df31     RCALL     0xed6                      USBCtrlTrfTxService();                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001074   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_TX;                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001076   0e01     MOVLW     0x1                                                                                             
001078   6f4d     MOVWF     0x4d,0x1                                                                                        
                                                       /*                                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Read:                                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare OUT EP to respond to early termination                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * NOTE:                                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * If something went wrong during the control transfer,              E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the last status stage may not be sent by the host.                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * When this happens, two different things could happen              E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * depending on the host.                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * a) The host could send out a RESET.                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * b) The host could send out a new SETUP transaction                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    without sending a RESET first.                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * To properly handle case (b), the OUT EP must be setup             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * to receive either a zero length OUT transaction, or a             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * new SETUP transaction.                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Since the SETUP transaction requires the DTS bit to be            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * DAT0 while the zero length OUT status requires the DTS            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * be disabled. This way the SIE could accept either of              E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the two transactions.                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the SETUP data (8-byte or more), and the buffer address           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * should be pointed to SetupPkt.                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00107a   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00107c   0e08     MOVLW     0x8                                                                                             
00107e   6f01     MOVWF     0x1,0x1                                                                                         
001080   0e20     MOVLW     0x20                       ep0Bo.ADR = (byte*)&SetupPkt;                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001082   6f02     MOVWF     0x2,0x1                                                                                         
001084   0e04     MOVLW     0x4                                                                                             
001086   6f03     MOVWF     0x3,0x1                                                                                         
001088   0e80     MOVLW     0x80                       ep0Bo.Stat._byte = _USIE;           // Note: DTSEN is 0!             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00108a   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    been initialized by responsible request owner.                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00108c   0104     MOVLB     0x4                        ep0Bi.ADR = (byte*)&CtrlTrfData;                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00108e   0e28     MOVLW     0x28                                                                                            
001090   6f06     MOVWF     0x6,0x1                                                                                         
001092   0e04     MOVLW     0x4                                                                                             
001094   6f07     MOVWF     0x7,0x1                                                                                         
001096   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
001098   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00109a   d010     BRA       0x10bc                 else    // (SetupPkt.DataDir == HOST_TO_DEV)                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00109c   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_RX;                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
00109e   0e02     MOVLW     0x2                                                                                             
0010a0   6f4d     MOVWF     0x4d,0x1                                                                                        
                                                       /*                                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Write:                                                    E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare IN EP to respond to early termination                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    This is the same as a Zero Length Packet Response              E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    for control transfer without a data stage                      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010a2   0104     MOVLB     0x4                        ep0Bi.Cnt = 0;                                                       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010a4   6b05     CLRF      0x5,0x1                                                                                         
0010a6   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010a8   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare OUT EP to receive data.                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010aa   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010ac   0e08     MOVLW     0x8                                                                                             
0010ae   6f01     MOVWF     0x1,0x1                                                                                         
0010b0   0e28     MOVLW     0x28                       ep0Bo.ADR = (byte*)&CtrlTrfData;                                     E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010b2   6f02     MOVWF     0x2,0x1                                                                                         
0010b4   0e04     MOVLW     0x4                                                                                             
0010b6   6f03     MOVWF     0x3,0x1                                                                                         
0010b8   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010ba   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.DataDir == DEV_TO_HOST)                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                * Clear to resume packet processing.                                        E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010bc   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010be   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBPrepareForNextSetupTrf(void)                                             E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010c0   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h                  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010c2   6b4d     CLRF      0x4d,0x1                                                                                        
0010c4   0104     MOVLB     0x4                ep0Bo.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h               E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010c6   0e08     MOVLW     0x8                                                                                             
0010c8   6f01     MOVWF     0x1,0x1                                                                                         
0010ca   0e20     MOVLW     0x20               ep0Bo.ADR = (byte*)&SetupPkt;                                                E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010cc   6f02     MOVWF     0x2,0x1                                                                                         
0010ce   0e04     MOVLW     0x4                                                                                             
0010d0   6f03     MOVWF     0x3,0x1                                                                                         
0010d2   0e88     MOVLW     0x88               ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;  // EP0 buff dsc init, see usbmmap.h  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010d4   6f00     MOVWF     0x0,0x1                                                                                         
0010d6   0104     MOVLB     0x4                ep0Bi.Stat._byte = _UCPU;               // EP0 IN buffer initialization      E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
0010d8   6b04     CLRF      0x4,0x1                                                                                         
0010da   0012     RETURN    0x0            }//end USBPrepareForNextSetupTrf                                                 E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /** EOF usbctrltrf.c *********************************************************/  E:\usb20\sinegen1\system\usb\usbctrltrf\usbctrltrf.c
                                           /*********************************************************************           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                Microchip USB C18 Firmware Version 1.0                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *********************************************************************           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * FileName:        usbdrv.c                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Dependencies:    See INCLUDES section below                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Processor:       PIC18                                                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Compiler:        C18 2.30.01+                                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Company:         Microchip Technology, Inc.                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Software License Agreement                                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * The software supplied herewith by Microchip Technology Incorporated           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * (the 鼎ompany・ for its PICmicroｮ Microcontroller is intended and             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * supplied to you, the Company痴 customer, for use solely and                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * software is owned by the Company and/or its supplier, and is                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * protected under applicable copyright laws. All rights are reserved.           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Any use in violation of the foregoing restrictions may subject the            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * user to criminal sanctions under applicable laws, as well as to               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * civil liability for the breach of the terms and conditions of this            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * license.                                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * THIS SOFTWARE IS PROVIDED IN AN 鄭S IS・CONDITION. NO WARRANTIES,             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Author               Date        Comment                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            ********************************************************************/           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /** I N C L U D E S **********************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           #include <p18cxxx.h>                                                             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           #include "system\typedefs.h"                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           #include "system\usb\usb.h"                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           #include "io_cfg.h"             // Required for USBCheckBusStatus()              E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /** V A R I A B L E S ********************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           #pragma udata                                                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void);                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void);                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void);                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void);                                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void);                                              E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void);                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void);                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void);                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /** D E C L A R A T I O N S **************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           #pragma code                                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBCheckBusStatus(void)                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  the USB power signal.                                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBCheckBusStatus(void)                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /**************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Bus Attachment & Detachment Detection                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * usb_bus_sense is an i/o pin defined in io_cfg.h                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_ATTACHED    1                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_DETACHED    0                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               if(usb_bus_sense == USB_BUS_ATTACHED)       // Is USB bus attached?          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001500   a66d     BTFSS     0x6d,0x3,0x0           if(UCONbits.USBEN == 0)                 // Is the module off?            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001502   d80f     RCALL     0x1522                     USBModuleEnable();                  // Is off, enable it             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               }                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001504   d002     BRA       0x150a             else                                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001506   b66d     BTFSC     0x6d,0x3,0x0           if(UCONbits.USBEN == 1)                 // Is the module on?             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001508   d813     RCALL     0x1530                     USBModuleDisable();                 // Is on, disable it             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_bus_sense...)                                                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * After enabling the USB module, it takes some time for the voltage         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * unique event as a USB bus reset from the USB host.                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00150a   0100     MOVLB     0x0                if(usb_device_state == ATTACHED_STATE)                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00150c   05fb     DECF      0xfb,0x0,0x1                                                                                    
00150e   e108     BNZ       0x1520                                                                                          
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001510   ba6d     BTFSC     0x6d,0x5,0x0           if(!UCONbits.SE0)                                                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001512   d006     BRA       0x1520                                                                                          
                                                   {                                                                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001514   6a68     CLRF      0x68,0x0                   UIR = 0;                        // Clear all USB interrupts          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001516   6a69     CLRF      0x69,0x0                   UIE = 0;                        // Mask all USB interrupts           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001518   8069     BSF       0x69,0x0,0x0               UIEbits.URSTIE = 1;             // Unmask RESET interrupt            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00151a   8869     BSF       0x69,0x4,0x0               UIEbits.IDLEIE = 1;             // Unmask IDLE interrupt             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00151c   0e02     MOVLW     0x2                        usb_device_state = POWERED_STATE;                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00151e   6ffb     MOVWF     0xfb,0x1                                                                                        
                                                   }//end if                           // else wait until SE0 is cleared    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_device_state == ATTACHED_STATE)                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001520   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleEnable(void)                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables the USB module.                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void)                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001522   6a6d     CLRF      0x6d,0x0           UCON = 0;                                                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001524   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001526   866d     BSF       0x6d,0x3,0x0       UCONbits.USBEN = 1;                     // Enable module & attach to bus     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001528   0100     MOVLB     0x0                usb_device_state = ATTACHED_STATE;      // Defined in usbmmap.c & .h         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00152a   0e01     MOVLW     0x1                                                                                             
00152c   6ffb     MOVWF     0xfb,0x1                                                                                        
00152e   0012     RETURN    0x0            }//end USBModuleEnable                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleDisable(void)                                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine disables the USB module.                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void)                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001530   6a6d     CLRF      0x6d,0x0           UCON = 0;                               // Disable module & detach from bus  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001532   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001534   0100     MOVLB     0x0                usb_device_state = DETACHED_STATE;      // Defined in usbmmap.c & .h         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001536   6bfb     CLRF      0xfb,0x1                                                                                        
001538   0012     RETURN    0x0            }//end USBModuleDisable                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSoftDetach(void)                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    The device will have to be re-enumerated to function again.  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        USBSoftDetach electrically disconnects the device from       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  the bus. This is done by stop supplying Vusb voltage to      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  pull-up resistor. The pull-down resistors on the host        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  side will pull both differential signal lines low and        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  the host registers the event as a disconnect.                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  Since the USB cable is not physically disconnected, the      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  power supply through the cable can still be sensed by        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  the device. The next time USBCheckBusStatus() function       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  is called, it will reconnect the device back to the bus.     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBSoftDetach(void)                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00153a   ef98     GOTO      0x1530             USBModuleDisable();                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00153c   f00a                                                                                                               
                                           }//end USBSoftDetach                                                             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBDriverService(void)                                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine is the heart of this firmware. It manages       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  all USB interrupts.                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            Device state transitions through the following stages:       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBDriverService(void)                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if USB cable is not even attached.        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00153e   0100     MOVLB     0x0                if(usb_device_state == DETACHED_STATE) return;                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001540   51fb     MOVF      0xfb,0x0,0x1                                                                                    
001542   e101     BNZ       0x1546                                                                                          
001544   d03a     BRA       0x15ba                                                                                          
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Task A: Service USB Activity Interrupt                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001546   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)    USBWakeFromSuspend();                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001548   0b04     ANDLW     0x4                                                                                             
00154a   e004     BZ        0x1554                                                                                          
00154c   5069     MOVF      0x69,0x0,0x0                                                                                    
00154e   0b04     ANDLW     0x4                                                                                             
001550   e001     BZ        0x1554                                                                                          
001552   d838     RCALL     0x15c4                                                                                          
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the device is in suspend mode.         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001554   b26d     BTFSC     0x6d,0x1,0x0       if(UCONbits.SUSPND==1) return;                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001556   d031     BRA       0x15ba                                                                                          
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * This is why URSTIF is checked after ACTVIF.                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001558   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00155a   0b01     ANDLW     0x1                                                                                             
00155c   e004     BZ        0x1566                                                                                          
00155e   5069     MOVF      0x69,0x0,0x0                                                                                    
001560   0b01     ANDLW     0x1                                                                                             
001562   e001     BZ        0x1566                                                                                          
001564   d850     RCALL     0x1606                                                                                          
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Task C: Service other USB interrupts                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001566   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)    USBSuspend();                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001568   0b10     ANDLW     0x10                                                                                            
00156a   e004     BZ        0x1574                                                                                          
00156c   5069     MOVF      0x69,0x0,0x0                                                                                    
00156e   0b10     ANDLW     0x10                                                                                            
001570   e001     BZ        0x1574                                                                                          
001572   d824     RCALL     0x15bc                                                                                          
001574   5068     MOVF      0x68,0x0,0x0       if(UIRbits.SOFIF && UIEbits.SOFIE)      USB_SOF_Handler();                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001576   0b40     ANDLW     0x40                                                                                            
001578   e004     BZ        0x1582                                                                                          
00157a   5069     MOVF      0x69,0x0,0x0                                                                                    
00157c   0b40     ANDLW     0x40                                                                                            
00157e   e001     BZ        0x1582                                                                                          
001580   d837     RCALL     0x15f0                                                                                          
001582   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)  USBStallHandler();                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001584   0b20     ANDLW     0x20                                                                                            
001586   e004     BZ        0x1590                                                                                          
001588   5069     MOVF      0x69,0x0,0x0                                                                                    
00158a   0b20     ANDLW     0x20                                                                                            
00158c   e001     BZ        0x1590                                                                                          
00158e   d832     RCALL     0x15f4                                                                                          
001590   5068     MOVF      0x68,0x0,0x0       if(UIRbits.UERRIF && UIEbits.UERRIE)    USBErrorHandler();                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001592   0b02     ANDLW     0x2                                                                                             
001594   e004     BZ        0x159e                                                                                          
001596   5069     MOVF      0x69,0x0,0x0                                                                                    
001598   0b02     ANDLW     0x2                                                                                             
00159a   e001     BZ        0x159e                                                                                          
00159c   d832     RCALL     0x1602                                                                                          
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * state and is ready for communication.                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00159e   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015a0   0100     MOVLB     0x0                                                                                             
0015a2   5dfb     SUBWF     0xfb,0x0,0x1                                                                                    
0015a4   e201     BC        0x15a8                                                                                          
0015a6   d009     BRA       0x15ba                                                                                          
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015a8   5068     MOVF      0x68,0x0,0x0       if(UIRbits.TRNIF && UIEbits.TRNIE)                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015aa   0b08     ANDLW     0x8                                                                                             
0015ac   e006     BZ        0x15ba                                                                                          
0015ae   5069     MOVF      0x69,0x0,0x0                                                                                    
0015b0   0b08     ANDLW     0x8                                                                                             
0015b2   e003     BZ        0x15ba                                                                                          
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    * USBCtrlEPService only services transactions over EP0.                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    * It ignores all other EP transactions.                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015b4   eced     CALL      0xdda,0x0              USBCtrlEPService();                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015b6   f006                                                                                                               
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    * Other EP can be serviced later by responsible device class firmware.  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    * Each device driver knows when an OUT or IN transaction is ready by    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    * checking the buffer ownership bit.                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    * An OUT EP should always be owned by SIE until the data is ready.      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    * An IN EP should always be owned by CPU until the data is ready.       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    *                                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    * Because of this logic, it is not necessary to save the USTAT value    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    * of non-EP0 transactions.                                              E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015b8   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015ba   0012     RETURN    0x0            }//end USBDriverService                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSuspend(void)                                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void)                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Do not clear UIRbits.ACTVIF here!                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Reason:                                                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * ACTVIF is only generated once an IDLEIF has been generated.               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * This is a 1:1 ratio interrupt generation.                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * For every IDLEIF, there will be only one ACTVIF regardless of             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * the number of subsequent bus transitions.                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * If the ACTIF is cleared here, a problem could occur when:                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * [       IDLE       ][bus activity ->                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * <--- 3 ms ----->     ^                                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                ^     ACTVIF=1                                             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                IDLEIF=1                                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *  #           #           #           #   (#=Program polling flags)        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                          ^                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                          This polling loop will see both                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                          IDLEIF=1 and ACTVIF=1.                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                          However, the program services IDLEIF first       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                          because ACTIVIE=0.                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                          If this routine clears the only ACTIVIF,         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                          then it can never get out of the suspend         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                          mode.                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015bc   8469     BSF       0x69,0x2,0x0       UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015be   9868     BCF       0x68,0x4,0x0       UIRbits.IDLEIF = 0;                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015c0   826d     BSF       0x6d,0x1,0x0       UCONbits.SUSPND = 1;                    // Put USB module in power conserve  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                       // mode, SIE clock inactive          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * At this point the PIC can go into sleep,idle, or                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * switch to a slower clock, etc.                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /* Modifiable Section */                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /* End Modifiable Section */                                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015c2   0012     RETURN    0x0            }//end USBSuspend                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBWakeFromSuspend(void)                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void)                                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * If using clock switching, this is the place to restore the                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * original clock frequency.                                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015c4   926d     BCF       0x6d,0x1,0x0       UCONbits.SUSPND = 0;                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015c6   9469     BCF       0x69,0x2,0x0       UIEbits.ACTVIE = 0;                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015c8   9468     BCF       0x68,0x2,0x0       UIRbits.ACTVIF = 0;                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015ca   0012     RETURN    0x0            }//end USBWakeFromSuspend                                                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBRemoteWakeup(void)                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This function should be called by user when the device       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  is waken up by an external stimulus other than ACTIVIF.      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  Please read the note below to understand the limitations.    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            The modifiable section in this routine should be changed     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  to meet the application needs. Current implementation        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  temporary blocks other functions from executing for a        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  period of 1-13 ms depending on the core frequency.           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  According to USB 2.0 specification section 7.1.7.7,          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  "The remote wakeup device must hold the resume signaling     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  for at lest 1 ms but for no more than 15 ms."                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  The idea here is to use a delay counter loop, using a        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  common value that would work over a wide range of core       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  frequencies.                                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  That value selected is 1800. See table below:                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  Core Freq(MHz)      MIP         RESUME Signal Period (ms)    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                      48              12          1.05                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                       4              1           12.6                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  * These timing could be incorrect when using code            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                    optimization or extended instruction mode,                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                    or when having other interrupts enabled.                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                    Make sure to verify using the MPLAB SIM's Stopwatch        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBRemoteWakeup(void)                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               static word delay_count;                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015cc   0100     MOVLB     0x0                if(usb_stat.RemoteWakeup == 1)          // Check if RemoteWakeup function    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015ce   a1fc     BTFSS     0xfc,0x0,0x1                                                                                    
0015d0   d00e     BRA       0x15ee                                                                                          
                                               {                                       // has been enabled by the host.     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015d2   dff8     RCALL     0x15c4                 USBWakeFromSuspend();               // Unsuspend USB modue               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015d4   846d     BSF       0x6d,0x2,0x0           UCONbits.RESUME = 1;                // Start RESUME signaling            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                   /* Modifiable Section */                                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015d6   0101     MOVLB     0x1                    delay_count = 1800U;                // Set RESUME line for 1-13 ms       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015d8   0e08     MOVLW     0x8                                                                                             
0015da   6f55     MOVWF     0x55,0x1                                                                                        
0015dc   0e07     MOVLW     0x7                                                                                             
0015de   6f56     MOVWF     0x56,0x1                                                                                        
                                                   do                                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                   {                                                                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015e0   0755     DECF      0x55,0x1,0x1               delay_count--;                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015e2   0e00     MOVLW     0x0                                                                                             
0015e4   5b56     SUBWFB    0x56,0x1,0x1                                                                                    
0015e6   5155     MOVF      0x55,0x0,0x1           }while(delay_count);                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015e8   1156     IORWF     0x56,0x0,0x1                                                                                    
0015ea   e1fa     BNZ       0x15e0                                                                                          
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                   /* End Modifiable Section */                                             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015ec   946d     BCF       0x6d,0x2,0x0           UCONbits.RESUME = 0;                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               }//endif                                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015ee   0012     RETURN    0x0            }//end USBRemoteWakeup                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USB_SOF_Handler(void)                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The USB host sends out a SOF packet to full-speed devices    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  every 1 ms. This interrupt may be useful for isochronous     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  pipes. End designers should implement callback routine       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  as necessary.                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void)                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /* Callback routine here */                                                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015f0   9c68     BCF       0x68,0x6,0x0       UIRbits.SOFIF = 0;                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015f2   0012     RETURN    0x0            }//end USB_SOF_Handler                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBStallHandler(void)                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A STALL packet is sent to the host by the SIE.               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The STALLIF is set anytime the SIE sends out a STALL         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  packet regardless of which endpoint causes it.               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  A Setup transaction overrides the STALL function. A stalled  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  endpoint stops stalling once it receives a setup packet.     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  In this case, the SIE will accepts the Setup packet and      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  set the TRNIF flag to notify the firmware. STALL function    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  for that particular endpoint pipe will be automatically      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  disabled (direction specific).                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  There are a few reasons for an endpoint to be stalled.       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  1. When a non-supported USB request is received.             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                     Example: GET_DESCRIPTOR(DEVICE_QUALIFIER)                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  2. When an endpoint is currently halted.                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  3. When the device class specifies that an endpoint must     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                     stall in response to a specific event.                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                     Example: Mass Storage Device Class                        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                              If the CBW is not valid, the device shall        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                              STALL the Bulk-In pipe.                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                              See USB Mass Storage Class Bulk-only Transport   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                              Specification for more details.                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            UEPn.EPSTALL can be scanned to see which endpoint causes     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  the stall event.                                             E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  If                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void)                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * Does not really have to do anything here,                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * even for the control endpoint.                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * All BDs of Endpoint 0 are owned by SIE right now,                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * but once a Setup Transaction is received, the ownership                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * for EP0_OUT will be returned to CPU.                                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * When the Setup Transaction is serviced, the ownership                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * for EP0_IN will then be forced back to CPU by firmware.                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *                                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Above description is not quite true at this point.                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *       It seems the SIE never returns the UOWN bit to CPU,                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *       and a TRNIF is never generated upon successful                      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *       reception of a SETUP transaction.                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                *       Firmware work-around is implemented below.                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                */                                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015f4   a070     BTFSS     0x70,0x0,0x0       if(UEP0bits.EPSTALL == 1)                                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015f6   d003     BRA       0x15fe                                                                                          
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015f8   ec60     CALL      0x10c0,0x0             USBPrepareForNextSetupTrf();        // Firmware Work-Around              E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015fa   f008                                                                                                               
0015fc   9070     BCF       0x70,0x0,0x0           UEP0bits.EPSTALL = 0;                                                    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                               }                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
0015fe   9a68     BCF       0x68,0x5,0x0       UIRbits.STALLIF = 0;                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001600   0012     RETURN    0x0            }//end USBStallHandler                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBErrorHandler(void)                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The purpose of this interrupt is mainly for debugging        E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  during development. Check UEIR to see which error causes     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  the interrupt.                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void)                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001602   9268     BCF       0x68,0x1,0x0       UIRbits.UERRIF = 0;                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001604   0012     RETURN    0x0            }//end USBErrorHandler                                                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBProtocolResetHandler(void)                           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A USB bus reset is received from the host.                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  might not be desirable in some applications.                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Overview:        Once a USB bus reset is received from the host, this         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  routine should be called. It resets the device address to    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  be ready for default communication, clears all USB           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                  reinitializes internal state-machine variables.              E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *                                                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void)                                               E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001606   6a6a     CLRF      0x6a,0x0           UEIR = 0;                       // Clear all USB error flags                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001608   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00160a   0e9f     MOVLW     0x9f               UEIE = 0b10011111;              // Unmask all USB error interrupts           E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00160c   6e6b     MOVWF     0x6b,0x0                                                                                        
00160e   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001610   6e69     MOVWF     0x69,0x0                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001612   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001614   0e0f     MOVLW     0xf                mDisableEP1to15();              // Reset all non-EP0 UEPn registers          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001616   6ee6     MOVWF     0xe6,0x0                                                                                        
001618   0e71     MOVLW     0x71                                                                                            
00161a   6ee6     MOVWF     0xe6,0x0                                                                                        
00161c   0e0f     MOVLW     0xf                                                                                             
00161e   6ee6     MOVWF     0xe6,0x0                                                                                        
001620   d814     RCALL     0x164a                                                                                          
001622   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001624   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001626   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001628   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00162a   6e70     MOVWF     0x70,0x0                                                                                        
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00162c   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00162e   d002     BRA       0x1634                                                                                          
001632   d7fc     BRA       0x162c                                                                                          
001630   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001634   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001636   ec60     CALL      0x10c0,0x0         USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001638   f008                                                                                                               
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00163a   0100     MOVLB     0x0                usb_stat.RemoteWakeup = 0;      // Default status flag to disable            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00163c   91fc     BCF       0xfc,0x0,0x1                                                                                    
00163e   0100     MOVLB     0x0                usb_active_cfg = 0;             // Clear active configuration                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001640   6bfd     CLRF      0xfd,0x1                                                                                        
001642   0100     MOVLB     0x0                usb_device_state = DEFAULT_STATE;                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001644   0e03     MOVLW     0x3                                                                                             
001646   6ffb     MOVWF     0xfb,0x1                                                                                        
001648   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /* Auxiliary Function */                                                         E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00164a   cfd9     MOVFF     0xfd9,0xfe6    void ClearArray(byte* startAdr,byte count)                                       E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00164c   ffe6                                                                                                               
00164e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001650   ffd9                                                                                                               
                                           {                                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001652   0efd     MOVLW     0xfd               *startAdr;                                                                   E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001654   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001656   ffe9                                                                                                               
001658   0efe     MOVLW     0xfe                                                                                            
00165a   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00165c   ffea                                                                                                               
00165e   0efc     MOVLW     0xfc               while(count)                                                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001660   50db     MOVF      0xdb,0x0,0x0                                                                                    
001662   e004     BZ        0x166c                                                                                          
00166a   d7f9     BRA       0x165e                                                                                          
                                               {                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                   _asm                                                                     E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001664   6aee     CLRF      0xee,0x0               clrf POSTINC0,0                                                          E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                                   _endasm                                                                  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001666   0efc     MOVLW     0xfc                   count--;                                                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
001668   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while                                                                 E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00166c   52e5     MOVF      0xe5,0x1,0x0   }//end ClearArray                                                                E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
00166e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001670   ffd9                                                                                                               
001672   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /** EOF usbdrv.c *************************************************************/  E:\usb20\sinegen1\system\usb\usbdrv\usbdrv.c
                                           /*********************************************************************           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                Microchip USB C18 Firmware Version 1.0                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *********************************************************************           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * FileName:        usbdsc.c                                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Dependencies:    See INCLUDES section below                                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Processor:       PIC18                                                        E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Compiler:        C18 2.30.01+                                                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Company:         Microchip Technology, Inc.                                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Software License Agreement                                                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * (the 鼎ompany) for its PICmicroｮ Microcontroller is intended and             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * supplied to you, the Company痴 customer, for use solely and                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * software is owned by the Company and/or its supplier, and is                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * protected under applicable copyright laws. All rights are reserved.           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Any use in violation of the foregoing restrictions may subject the            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * user to criminal sanctions under applicable laws, as well as to               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * civil liability for the breach of the terms and conditions of this            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * license.                                                                      E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN 鄭S IS CONDITION. NO WARRANTIES,             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            ********************************************************************/           E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           /*********************************************************************           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * -usbdsc.c-                                                                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * This file contains the USB descriptor information. It is used                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * in conjunction with the usbdsc.h file. When a descriptor is added             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * or removed from the main configuration descriptor, i.e. CFG01,                E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * the user must also change the descriptor structure defined in                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * the usbdsc.h file. The structure is used to calculate the                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * descriptor size, i.e. sizeof(CFG01).                                          E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * A typical configuration descriptor consists of:                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * At least one configuration descriptor (USB_CFG_DSC)                           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * One or more interface descriptors (USB_INTF_DSC)                              E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * One or more endpoint descriptors (USB_EP_DSC)                                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Naming Convention:                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * To resolve ambiguity, the naming convention are as followed:                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * - USB_CFG_DSC type should be named cdxx, where xx is the                      E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *   configuration number. This number should match the actual                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *   index value of this configuration.                                          E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * - USB_INTF_DSC type should be named i<yy>a<zz>, where yy is the               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *   interface number and zz is the alternate interface number.                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * - USB_EP_DSC type should be named ep<##><d>_i<yy>a<zz>, where                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *   ## is the endpoint number and d is the direction of transfer.               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *   The interface name should also be listed as a suffix to identify            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *   which interface does the endpoint belong to.                                E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Example:                                                                      E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * If a device has one configuration, two interfaces; interface 0                E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * has two endpoints (in and out), and interface 1 has one endpoint(in).         E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Then the CFG01 structure in the usbdsc.h should be:                           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * #define CFG01 rom struct                            \                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * {   USB_CFG_DSC             cd01;                   \                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i00a00;                 \                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01o_i00a00;           \                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01i_i00a00;           \                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i01a00;                 \                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep02i_i01a00;           \                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * } cfg01                                                                       E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Note the hierarchy of the descriptors above, it follows the USB               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * specification requirement. All endpoints belonging to an interface            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * should be listed immediately after that interface.                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Filling in the descriptor values in the usbdsc.c file:                        E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Most items should be self-explanatory, however, a few will be                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * explained for clarification.                                                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * [Configuration Descriptor(USB_CFG_DSC)]                                       E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The configuration attribute must always have the _DEFAULT                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * definition at the minimum. Additional options can be ORed                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * to the _DEFAULT attribute. Available options are _SELF and _RWU.              E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * These definitions are defined in the usbdefs_std_dsc.h file. The              E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * _SELF tells the USB host that this device is self-powered. The                E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * _RWU tells the USB host that this device supports Remote Wakeup.              E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * [Endpoint Descriptor(USB_EP_DSC)]                                             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Assume the following example:                                                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,0x00                             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The first two parameters are self-explanatory. They specify the               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * length of this endpoint descriptor (7) and the descriptor type.               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The next parameter identifies the endpoint, the definitions are               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * defined in usbdefs_std_dsc.h and has the following naming                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * convention:                                                                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * _EP<##>_<dir>                                                                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * where ## is the endpoint number and dir is the direction of                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * transfer. The dir has the value of either 'OUT' or 'IN'.                      E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The next parameter identifies the type of the endpoint. Available             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * options are _BULK, _INT, _ISO, and _CTRL. The _CTRL is not                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * typically used because the default control transfer endpoint is               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * not defined in the USB descriptors. When _ISO option is used,                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * addition options can be ORed to _ISO. Example:                                E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * _ISO|_AD|_FE                                                                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * This describes the endpoint as an isochronous pipe with adaptive              E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * and feedback attributes. See usbdefs_std_dsc.h and the USB                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * specification for details. The next parameter defines the size of             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * the endpoint. The last parameter in the polling interval.                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Adding a USB String                                                           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * A string descriptor array should have the following format:                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[size];}sdxxx={              E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * sizeof(sdxxx),DSC_STR,<text>};                                                E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The above structure provides a means for the C compiler to                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * calculate the length of string descriptor sdxxx, where xxx is the             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * index number. The first two bytes of the descriptor are descriptor            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * length and type. The rest <text> are string texts which must be               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * in the unicode format. The unicode format is achieved by declaring            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * each character as a word type. The whole text string is declared              E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * as a word array with the number of characters equals to <size>.               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * <size> has to be manually counted and entered into the array                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * declaration. Let's study this through an example:                             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * if the string is "USB" , then the string descriptor should be:                E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * (Using index 02)                                                              E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[3];}sd002={                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * sizeof(sd002),DSC_STR,'U','S','B'};                                           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * A USB project may have multiple strings and the firmware supports             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * the management of multiple strings through a look-up table.                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The look-up table is defined as:                                              E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The above declaration has 3 strings, sd000, sd001, and sd002.                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Strings can be removed or added. sd000 is a specialized string                E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * descriptor. It defines the language code, usually this is                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * US English (0x0409). The index of the string must match the index             E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * position of the USB_SD_Ptr array, &sd000 must be in position                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * USB_SD_Ptr[0], &sd001 must be in position USB_SD_Ptr[1] and so on.            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The look-up table USB_SD_Ptr is used by the get string handler                E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * function in usb9.c.                                                           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The look-up table scheme also applies to the configuration                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * descriptor. A USB device may have multiple configuration                      E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * descriptors, i.e. CFG01, CFG02, etc. To add a configuration                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * descriptor, user must implement a structure similar to CFG01.                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * The next step is to add the configuration descriptor name, i.e.               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * cfg01, cfg02,.., to the look-up table USB_CD_Ptr. USB_CD_Ptr[0]               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * is a dummy place holder since configuration 0 is the un-configured            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * state according to the definition in the USB specification.                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            ********************************************************************/           E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           /*********************************************************************           E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Descriptor specific type definitions are defined in:                          E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * system\usb\usbdefs\usbdefs_std_dsc.h                                          E:\usb20\sinegen1\autofiles\usbdsc.c
                                            *                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * Configuration information is defined in:                                      E:\usb20\sinegen1\autofiles\usbdsc.c
                                            * autofiles\usbcfg.h                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                            ********************************************************************/           E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           /** I N C L U D E S *************************************************/           E:\usb20\sinegen1\autofiles\usbdsc.c
                                           #include "system\typedefs.h"                                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                           #include "system\usb\usb.h"                                                      E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           /** C O N S T A N T S ************************************************/          E:\usb20\sinegen1\autofiles\usbdsc.c
                                           #pragma romdata                                                                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           /* Device Descriptor */                                                          E:\usb20\sinegen1\autofiles\usbdsc.c
                                           rom USB_DEV_DSC device_dsc=                                                      E:\usb20\sinegen1\autofiles\usbdsc.c
                                           {                                                                                E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_DEV_DSC),    // Size of this descriptor in bytes                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                               DSC_DEV,                // DEVICE descriptor type                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x0200,                 // USB Spec Release Number in BCD format             E:\usb20\sinegen1\autofiles\usbdsc.c
                                               CDC_DEVICE,             // Class Code                                        E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                               EP0_BUFF_SIZE,          // Max packet size for EP0, see usbcfg.h             E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x04D8,                 // Vendor ID                                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x000A,                 // Product ID: CDC RS-232 Emulation Demo             E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x0000,                 // Device release number in BCD format               E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x01,                   // Manufacturer string index                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x02,                   // Product string index                              E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x00,                   // Device serial number string index                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0x01                    // Number of possible configurations                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                           };                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           /* Configuration 1 Descriptor */                                                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                           CFG01=                                                                           E:\usb20\sinegen1\autofiles\usbdsc.c
                                           {                                                                                E:\usb20\sinegen1\autofiles\usbdsc.c
                                               /* Configuration Descriptor */                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_CFG_DSC),    // Size of this descriptor in bytes                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                               DSC_CFG,                // CONFIGURATION descriptor type                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(cfg01),          // Total length of data for this cfg                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                               2,                      // Number of interfaces in this cfg                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                               1,                      // Index value of this configuration                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0,                      // Configuration string index                        E:\usb20\sinegen1\autofiles\usbdsc.c
                                               _DEFAULT,               // Attributes, see usbdefs_std_dsc.h                 E:\usb20\sinegen1\autofiles\usbdsc.c
                                               50,                     // Max power consumption (2X mA)                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0,                      // Interface Number                                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          E:\usb20\sinegen1\autofiles\usbdsc.c
                                               1,                      // Number of endpoints in this intf                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                               COMM_INTF,              // Class code                                        E:\usb20\sinegen1\autofiles\usbdsc.c
                                               ABSTRACT_CONTROL_MODEL, // Subclass code                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                               V25TER,                 // Protocol code                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0,                      // Interface string index                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                               /* CDC Class-Specific Descriptors */                                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_CDC_HEADER_FN_DSC),CS_INTERFACE,DSC_FN_HEADER,0x0110,             E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_CDC_ACM_FN_DSC),CS_INTERFACE,DSC_FN_ACM,0x02,                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_CDC_UNION_FN_DSC),CS_INTERFACE,DSC_FN_UNION,CDC_COMM_INTF_ID,CDC_DATA_INTF_ID, E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_CDC_CALL_MGT_FN_DSC),CS_INTERFACE,DSC_FN_CALL_MGT,0x00,CDC_DATA_INTF_ID, E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                               /* Endpoint Descriptor */                                                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP02_IN,_INT,CDC_INT_EP_SIZE,0x02,                E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                               1,                      // Interface Number                                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          E:\usb20\sinegen1\autofiles\usbdsc.c
                                               2,                      // Number of endpoints in this intf                  E:\usb20\sinegen1\autofiles\usbdsc.c
                                               DATA_INTF,              // Class code                                        E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0,                      // Subclass code                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                               NO_PROTOCOL,            // Protocol code                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                               0,                      // Interface string index                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                               /* Endpoint Descriptors */                                                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP03_OUT,_BULK,CDC_BULK_OUT_EP_SIZE,0x00,         E:\usb20\sinegen1\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP03_IN,_BULK,CDC_BULK_IN_EP_SIZE,0x00            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           };                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                           sizeof(sd000),DSC_STR,0x0409};                                                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd001={                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                           sizeof(sd001),DSC_STR,                                                           E:\usb20\sinegen1\autofiles\usbdsc.c
                                           'M','i','c','r','o','c','h','i','p',' ',                                         E:\usb20\sinegen1\autofiles\usbdsc.c
                                           'T','e','c','h','n','o','l','o','g','y',' ','I','n','c','.'};                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd002={                   E:\usb20\sinegen1\autofiles\usbdsc.c
                                           sizeof(sd002),DSC_STR,                                                           E:\usb20\sinegen1\autofiles\usbdsc.c
                                           'C','D','C',' ','R','S','-','2','3','2',' ',                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                           'E','m','u','l','a','t','i','o','n',' ','D','e','m','o'};                        E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_CD_Ptr[]={&cfg01,&cfg01};                       E:\usb20\sinegen1\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};                E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           rom pFunc ClassReqHandler[1]=                                                    E:\usb20\sinegen1\autofiles\usbdsc.c
                                           {                                                                                E:\usb20\sinegen1\autofiles\usbdsc.c
                                               &USBCheckCDCRequest                                                          E:\usb20\sinegen1\autofiles\usbdsc.c
                                           };                                                                               E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           #pragma code                                                                     E:\usb20\sinegen1\autofiles\usbdsc.c
                                                                                                                            E:\usb20\sinegen1\autofiles\usbdsc.c
                                           /** EOF usbdsc.c ****************************************************/           E:\usb20\sinegen1\autofiles\usbdsc.c
                                           ///////////////////////////////////////////////                                  E:\usb20\sinegen1\lcd_lib.c
                                           //  液晶表示器制御ライブラリ　for PIC18Fxxxx                                     E:\usb20\sinegen1\lcd_lib.c
                                           //  内蔵関数は以下                                                               E:\usb20\sinegen1\lcd_lib.c
                                           //    lcd_init()    ----- 初期化                                                 E:\usb20\sinegen1\lcd_lib.c
                                           //    lcd_cmd(cmd)  ----- コマンド出力                                           E:\usb20\sinegen1\lcd_lib.c
                                           //    lcd_data(chr) ----- １文字表示出力                                         E:\usb20\sinegen1\lcd_lib.c
                                           //    lcd_clear()   ----- 全消去                                                 E:\usb20\sinegen1\lcd_lib.c
                                           //////////////////////////////////////////////                                   E:\usb20\sinegen1\lcd_lib.c
                                           #include <p18cxxx.h>                                                             E:\usb20\sinegen1\lcd_lib.c
                                           #include "io_cfg.h"                                                              E:\usb20\sinegen1\lcd_lib.c
                                           #include	"delays.h"                                                              E:\usb20\sinegen1\lcd_lib.c
                                           #include "lcd_lib.h"                                                             E:\usb20\sinegen1\lcd_lib.c
                                                                                                                            E:\usb20\sinegen1\lcd_lib.c
                                           //////// データ出力サブ関数                                                      E:\usb20\sinegen1\lcd_lib.c
001366   cfd9     MOVFF     0xfd9,0xfe6    void lcd_out(char code, char flag)                                               E:\usb20\sinegen1\lcd_lib.c
001368   ffe6                                                                                                               
00136a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00136c   ffd9                                                                                                               
                                           {                                                                                E:\usb20\sinegen1\lcd_lib.c
00136e   0efe     MOVLW     0xfe           	lcd_port = code & 0xF0;                                                         E:\usb20\sinegen1\lcd_lib.c
001370   50db     MOVF      0xdb,0x0,0x0                                                                                    
001372   0bf0     ANDLW     0xf0                                                                                            
001374   6e8a     MOVWF     0x8a,0x0                                                                                        
001376   0efd     MOVLW     0xfd           	if (flag == 0)                                                                  E:\usb20\sinegen1\lcd_lib.c
001378   50db     MOVF      0xdb,0x0,0x0                                                                                    
00137a   e102     BNZ       0x1380                                                                                          
00137c   848a     BSF       0x8a,0x2,0x0   		lcd_rs = 1;			//表示データの場合                                               E:\usb20\sinegen1\lcd_lib.c
00137e   d001     BRA       0x1382         	else                                                                            E:\usb20\sinegen1\lcd_lib.c
001380   948a     BCF       0x8a,0x2,0x0   		lcd_rs = 0;			//コマンドデータの場合                                           E:\usb20\sinegen1\lcd_lib.c
001382   0000     NOP                      	Delay1TCY();				//NOP		                                                         E:\usb20\sinegen1\lcd_lib.c
001384   868a     BSF       0x8a,0x3,0x0   	lcd_stb = 1;				//strobe out                                                    E:\usb20\sinegen1\lcd_lib.c
001386   0e01     MOVLW     0x1            	Delay10TCYx(1);			//10NOP                                                       E:\usb20\sinegen1\lcd_lib.c
001388   6ee6     MOVWF     0xe6,0x0                                                                                        
00138a   ec6f     CALL      0x18de,0x0                                                                                      
00138c   f00c                                                                                                               
00138e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001390   968a     BCF       0x8a,0x3,0x0   	lcd_stb = 0;				//reset strobe                                                  E:\usb20\sinegen1\lcd_lib.c
001392   52e5     MOVF      0xe5,0x1,0x0   }                                                                                E:\usb20\sinegen1\lcd_lib.c
001394   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001396   ffd9                                                                                                               
001398   0012     RETURN    0x0                                                                                             
                                           //////// １文字表示関数                                                          E:\usb20\sinegen1\lcd_lib.c
00139a   cfd9     MOVFF     0xfd9,0xfe6    void lcd_data(char asci)                                                         E:\usb20\sinegen1\lcd_lib.c
00139c   ffe6                                                                                                               
00139e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0013a0   ffd9                                                                                                               
                                           {                                                                                E:\usb20\sinegen1\lcd_lib.c
0013a2   6ae6     CLRF      0xe6,0x0       	lcd_out(asci, 0);			//上位４ビット出力                                          E:\usb20\sinegen1\lcd_lib.c
0013a4   0efe     MOVLW     0xfe                                                                                            
0013a6   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0013a8   ffe6                                                                                                               
0013aa   dfdd     RCALL     0x1366                                                                                          
0013ac   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013ae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013b0   6ae6     CLRF      0xe6,0x0       	lcd_out(asci<<4, 0);		//下位４ビット出力                                        E:\usb20\sinegen1\lcd_lib.c
0013b2   0efe     MOVLW     0xfe                                                                                            
0013b4   38db     SWAPF     0xdb,0x0,0x0                                                                                    
0013b6   0bf0     ANDLW     0xf0                                                                                            
0013b8   6ee6     MOVWF     0xe6,0x0                                                                                        
0013ba   dfd5     RCALL     0x1366                                                                                          
0013bc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013be   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013c0   0e32     MOVLW     0x32           	Delay10TCYx(50);			//50μsec待ち                                                E:\usb20\sinegen1\lcd_lib.c
0013c2   6ee6     MOVWF     0xe6,0x0                                                                                        
0013c4   ec6f     CALL      0x18de,0x0                                                                                      
0013c6   f00c                                                                                                               
0013c8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013ca   52e5     MOVF      0xe5,0x1,0x0   }                                                                                E:\usb20\sinegen1\lcd_lib.c
0013cc   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0013ce   ffd9                                                                                                               
0013d0   0012     RETURN    0x0                                                                                             
                                           /////// コマンド出力関数                                                         E:\usb20\sinegen1\lcd_lib.c
0013d2   cfd9     MOVFF     0xfd9,0xfe6    void lcd_cmd(char cmd)                                                           E:\usb20\sinegen1\lcd_lib.c
0013d4   ffe6                                                                                                               
0013d6   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0013d8   ffd9                                                                                                               
                                           {                                                                                E:\usb20\sinegen1\lcd_lib.c
0013da   0e01     MOVLW     0x1            	lcd_out(cmd, 1);			//上位４ビット出力                                           E:\usb20\sinegen1\lcd_lib.c
0013dc   6ee6     MOVWF     0xe6,0x0                                                                                        
0013de   0efe     MOVLW     0xfe                                                                                            
0013e0   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0013e2   ffe6                                                                                                               
0013e4   dfc0     RCALL     0x1366                                                                                          
0013e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013ea   0e01     MOVLW     0x1            	lcd_out(cmd<<4, 1);		//下位４ビット出力                                         E:\usb20\sinegen1\lcd_lib.c
0013ec   6ee6     MOVWF     0xe6,0x0                                                                                        
0013ee   0efe     MOVLW     0xfe                                                                                            
0013f0   38db     SWAPF     0xdb,0x0,0x0                                                                                    
0013f2   0bf0     ANDLW     0xf0                                                                                            
0013f4   6ee6     MOVWF     0xe6,0x0                                                                                        
0013f6   dfb7     RCALL     0x1366                                                                                          
0013f8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013fa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013fc   0efe     MOVLW     0xfe           	if((cmd & 0x03) != 0)                                                           E:\usb20\sinegen1\lcd_lib.c
0013fe   50db     MOVF      0xdb,0x0,0x0                                                                                    
001400   0b03     ANDLW     0x3                                                                                             
001402   e006     BZ        0x1410                                                                                          
001404   0e02     MOVLW     0x2            		Delay10KTCYx(2);		//2msec待ち                                                  E:\usb20\sinegen1\lcd_lib.c
001406   6ee6     MOVWF     0xe6,0x0                                                                                        
001408   ec4c     CALL      0x1898,0x0                                                                                      
00140a   f00c                                                                                                               
00140c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00140e   d005     BRA       0x141a         	else                                                                            E:\usb20\sinegen1\lcd_lib.c
001410   0e32     MOVLW     0x32           		Delay10TCYx(50);		//50usec待ち                                                 E:\usb20\sinegen1\lcd_lib.c
001412   6ee6     MOVWF     0xe6,0x0                                                                                        
001414   ec6f     CALL      0x18de,0x0                                                                                      
001416   f00c                                                                                                               
001418   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00141a   52e5     MOVF      0xe5,0x1,0x0   }                                                                                E:\usb20\sinegen1\lcd_lib.c
00141c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00141e   ffd9                                                                                                               
001420   0012     RETURN    0x0                                                                                             
                                           /////// 全消去関数                                                               E:\usb20\sinegen1\lcd_lib.c
                                           void lcd_clear(void)                                                             E:\usb20\sinegen1\lcd_lib.c
                                           {                                                                                E:\usb20\sinegen1\lcd_lib.c
001422   0e01     MOVLW     0x1            	lcd_cmd(0x01);			//初期化コマンド出力                                           E:\usb20\sinegen1\lcd_lib.c
001424   6ee6     MOVWF     0xe6,0x0                                                                                        
001426   dfd5     RCALL     0x13d2                                                                                          
001428   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00142a   0012     RETURN    0x0            }                                                                                E:\usb20\sinegen1\lcd_lib.c
                                                                                                                            E:\usb20\sinegen1\lcd_lib.c
                                           /////// 文字列出力関数                                                           E:\usb20\sinegen1\lcd_lib.c
00142c   cfd9     MOVFF     0xfd9,0xfe6    void lcd_str(char *str)                                                          E:\usb20\sinegen1\lcd_lib.c
00142e   ffe6                                                                                                               
001430   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001432   ffd9                                                                                                               
                                           {                                                                                E:\usb20\sinegen1\lcd_lib.c
001434   0efd     MOVLW     0xfd           	while(*str != 0x00)			//文字列の終わり判定                                      E:\usb20\sinegen1\lcd_lib.c
001436   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001438   ffe9                                                                                                               
00143a   0efe     MOVLW     0xfe                                                                                            
00143c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00143e   ffea                                                                                                               
001440   50ef     MOVF      0xef,0x0,0x0                                                                                    
001442   e010     BZ        0x1464                                                                                          
001462   d7e8     BRA       0x1434                                                                                          
                                           	{                                                                               E:\usb20\sinegen1\lcd_lib.c
001444   0efd     MOVLW     0xfd           		lcd_data(*str);			//文字列１文字出力                                           E:\usb20\sinegen1\lcd_lib.c
001446   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001448   ffe9                                                                                                               
00144a   0efe     MOVLW     0xfe                                                                                            
00144c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00144e   ffea                                                                                                               
001450   50ef     MOVF      0xef,0x0,0x0                                                                                    
001452   6ee6     MOVWF     0xe6,0x0                                                                                        
001454   dfa2     RCALL     0x139a                                                                                          
001456   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001458   0efd     MOVLW     0xfd           		str++;					//ポインタ＋１                                                      E:\usb20\sinegen1\lcd_lib.c
00145a   2adb     INCF      0xdb,0x1,0x0                                                                                    
00145c   0efe     MOVLW     0xfe                                                                                            
00145e   e301     BNC       0x1462                                                                                          
001460   2adb     INCF      0xdb,0x1,0x0                                                                                    
                                           	}                                                                               E:\usb20\sinegen1\lcd_lib.c
001464   52e5     MOVF      0xe5,0x1,0x0   }                                                                                E:\usb20\sinegen1\lcd_lib.c
001466   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001468   ffd9                                                                                                               
00146a   0012     RETURN    0x0                                                                                             
                                                                                                                            E:\usb20\sinegen1\lcd_lib.c
                                           /////// 初期化関数                                                               E:\usb20\sinegen1\lcd_lib.c
                                           void lcd_init(void)                                                              E:\usb20\sinegen1\lcd_lib.c
                                           {                                                                                E:\usb20\sinegen1\lcd_lib.c
00146c   0e14     MOVLW     0x14           	Delay10KTCYx(20);                                                               E:\usb20\sinegen1\lcd_lib.c
00146e   6ee6     MOVWF     0xe6,0x0                                                                                        
001470   ec4c     CALL      0x1898,0x0                                                                                      
001472   f00c                                                                                                               
001474   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001476   0e01     MOVLW     0x1            	lcd_out(0x30, 1);			//8bit mode set                                             E:\usb20\sinegen1\lcd_lib.c
001478   6ee6     MOVWF     0xe6,0x0                                                                                        
00147a   0e30     MOVLW     0x30                                                                                            
00147c   6ee6     MOVWF     0xe6,0x0                                                                                        
00147e   df73     RCALL     0x1366                                                                                          
001480   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001482   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001484   0e05     MOVLW     0x5            	Delay10KTCYx(5);                                                                E:\usb20\sinegen1\lcd_lib.c
001486   6ee6     MOVWF     0xe6,0x0                                                                                        
001488   ec4c     CALL      0x1898,0x0                                                                                      
00148a   f00c                                                                                                               
00148c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00148e   0e01     MOVLW     0x1            	lcd_out(0x30, 1);			//8bit mode set                                             E:\usb20\sinegen1\lcd_lib.c
001490   6ee6     MOVWF     0xe6,0x0                                                                                        
001492   0e30     MOVLW     0x30                                                                                            
001494   6ee6     MOVWF     0xe6,0x0                                                                                        
001496   df67     RCALL     0x1366                                                                                          
001498   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00149a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00149c   0e01     MOVLW     0x1            	Delay10KTCYx(1);                                                                E:\usb20\sinegen1\lcd_lib.c
00149e   6ee6     MOVWF     0xe6,0x0                                                                                        
0014a0   ec4c     CALL      0x1898,0x0                                                                                      
0014a2   f00c                                                                                                               
0014a4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014a6   0e01     MOVLW     0x1            	lcd_out(0x30, 1);			//8bit mode set                                             E:\usb20\sinegen1\lcd_lib.c
0014a8   6ee6     MOVWF     0xe6,0x0                                                                                        
0014aa   0e30     MOVLW     0x30                                                                                            
0014ac   6ee6     MOVWF     0xe6,0x0                                                                                        
0014ae   df5b     RCALL     0x1366                                                                                          
0014b0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014b2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014b4   0e01     MOVLW     0x1            	Delay10KTCYx(1);                                                                E:\usb20\sinegen1\lcd_lib.c
0014b6   6ee6     MOVWF     0xe6,0x0                                                                                        
0014b8   ec4c     CALL      0x1898,0x0                                                                                      
0014ba   f00c                                                                                                               
0014bc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014be   0e01     MOVLW     0x1            	lcd_out(0x20, 1);			//4bit mode set                                             E:\usb20\sinegen1\lcd_lib.c
0014c0   6ee6     MOVWF     0xe6,0x0                                                                                        
0014c2   0e20     MOVLW     0x20                                                                                            
0014c4   6ee6     MOVWF     0xe6,0x0                                                                                        
0014c6   df4f     RCALL     0x1366                                                                                          
0014c8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014ca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014cc   0e01     MOVLW     0x1            	Delay10KTCYx(1);                                                                E:\usb20\sinegen1\lcd_lib.c
0014ce   6ee6     MOVWF     0xe6,0x0                                                                                        
0014d0   ec4c     CALL      0x1898,0x0                                                                                      
0014d2   f00c                                                                                                               
0014d4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014d6   0e2e     MOVLW     0x2e           	lcd_cmd(0x2E);			//DL=0 4bit mode                                               E:\usb20\sinegen1\lcd_lib.c
0014d8   6ee6     MOVWF     0xe6,0x0                                                                                        
0014da   df7b     RCALL     0x13d2                                                                                          
0014dc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014de   0e08     MOVLW     0x8            	lcd_cmd(0x08);			//display off C=D=B=0                                          E:\usb20\sinegen1\lcd_lib.c
0014e0   6ee6     MOVWF     0xe6,0x0                                                                                        
0014e2   df77     RCALL     0x13d2                                                                                          
0014e4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014e6   0e0d     MOVLW     0xd            	lcd_cmd(0x0D);			//display on C=D=1 B=0                                         E:\usb20\sinegen1\lcd_lib.c
0014e8   6ee6     MOVWF     0xe6,0x0                                                                                        
0014ea   df73     RCALL     0x13d2                                                                                          
0014ec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014ee   0e06     MOVLW     0x6            	lcd_cmd(0x06);			//entry I/D=1 S=0                                              E:\usb20\sinegen1\lcd_lib.c
0014f0   6ee6     MOVWF     0xe6,0x0                                                                                        
0014f2   df6f     RCALL     0x13d2                                                                                          
0014f4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014f6   0e01     MOVLW     0x1            	lcd_cmd(0x01);			//all clear                                                    E:\usb20\sinegen1\lcd_lib.c
0014f8   6ee6     MOVWF     0xe6,0x0                                                                                        
0014fa   df6b     RCALL     0x13d2                                                                                          
0014fc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014fe   0012     RETURN    0x0            }                                                                                E:\usb20\sinegen1\lcd_lib.c
